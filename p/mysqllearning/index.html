<!DOCTYPE html>
<html lang="en-us">
    <head><meta charset='utf-8'>
<meta name='viewport' content='width=device-width, initial-scale=1'><meta name='description' content='mysql学习文档 一 为什么要学习数据库 二 数据库的相关概念 DBMS DB SQL
三 数据库存储数据的特点 四 初始mysql mysql产品的介绍
mysql产品的安装
mysql服务的启动和停止
mysql服务的登陆和退出
mysql的常见命令和语法规范
五DQL语言的学习 基础查询
条件查询
排序查询
常见函数
分组查询
连接查询
子查询
分页查询
union联合查询
六 DML语言的学习 插入语句
修改语句
删除语句
七 DDL语言的学习 库和表的管理
常见数据类型介绍
常见约束
保存数据的容器:
数组 集合 内存数据 断电就没了
文件 但是文件不好查找
因此把文件做成方便增删改查的软件 对文件进行操作 这样的软件就叫做数据库
数据库的好处  实现数据持久化 使用完整的管理系统统一管理,易于查询  数据库的概念 DB 数据库 database:存储数据的仓库,保存了一系列有组织的数据.
DBMS 数据库管理系统 database management system 数据库是通过dbms创建和操作的容器
常见的数据库管理系统 mysql oracle db2 sqlserver
SQL 结构化查询语言 structure query language :专门用来与数据库通信的语言'><title>MysqlLearning</title>

<link rel='canonical' href='https://linjianshu.github.io/p/mysqllearning/'>

<link rel="stylesheet" href="/scss/style.min.css"><meta property='og:title' content='MysqlLearning'>
<meta property='og:description' content='mysql学习文档 一 为什么要学习数据库 二 数据库的相关概念 DBMS DB SQL
三 数据库存储数据的特点 四 初始mysql mysql产品的介绍
mysql产品的安装
mysql服务的启动和停止
mysql服务的登陆和退出
mysql的常见命令和语法规范
五DQL语言的学习 基础查询
条件查询
排序查询
常见函数
分组查询
连接查询
子查询
分页查询
union联合查询
六 DML语言的学习 插入语句
修改语句
删除语句
七 DDL语言的学习 库和表的管理
常见数据类型介绍
常见约束
保存数据的容器:
数组 集合 内存数据 断电就没了
文件 但是文件不好查找
因此把文件做成方便增删改查的软件 对文件进行操作 这样的软件就叫做数据库
数据库的好处  实现数据持久化 使用完整的管理系统统一管理,易于查询  数据库的概念 DB 数据库 database:存储数据的仓库,保存了一系列有组织的数据.
DBMS 数据库管理系统 database management system 数据库是通过dbms创建和操作的容器
常见的数据库管理系统 mysql oracle db2 sqlserver
SQL 结构化查询语言 structure query language :专门用来与数据库通信的语言'>
<meta property='og:url' content='https://linjianshu.github.io/p/mysqllearning/'>
<meta property='og:site_name' content='think hy how to learn'>
<meta property='og:type' content='article'><meta property='article:section' content='Post' /><meta property='article:published_time' content='2021-09-25T23:44:44&#43;08:00'/><meta property='article:modified_time' content='2021-09-25T23:44:44&#43;08:00'/><meta property='og:image' content='https://linjianshu.github.io/' />
<meta name="twitter:site" content="@ljs56495989">
    <meta name="twitter:creator" content="@ljs56495989"><meta name="twitter:title" content="MysqlLearning">
<meta name="twitter:description" content="mysql学习文档 一 为什么要学习数据库 二 数据库的相关概念 DBMS DB SQL
三 数据库存储数据的特点 四 初始mysql mysql产品的介绍
mysql产品的安装
mysql服务的启动和停止
mysql服务的登陆和退出
mysql的常见命令和语法规范
五DQL语言的学习 基础查询
条件查询
排序查询
常见函数
分组查询
连接查询
子查询
分页查询
union联合查询
六 DML语言的学习 插入语句
修改语句
删除语句
七 DDL语言的学习 库和表的管理
常见数据类型介绍
常见约束
保存数据的容器:
数组 集合 内存数据 断电就没了
文件 但是文件不好查找
因此把文件做成方便增删改查的软件 对文件进行操作 这样的软件就叫做数据库
数据库的好处  实现数据持久化 使用完整的管理系统统一管理,易于查询  数据库的概念 DB 数据库 database:存储数据的仓库,保存了一系列有组织的数据.
DBMS 数据库管理系统 database management system 数据库是通过dbms创建和操作的容器
常见的数据库管理系统 mysql oracle db2 sqlserver
SQL 结构化查询语言 structure query language :专门用来与数据库通信的语言"><meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:image" content='https://linjianshu.github.io/' />
    </head>
    <body class="
    article-page has-toc
">
    <script>
        (function() {
            const colorSchemeKey = 'StackColorScheme';
            if(!localStorage.getItem(colorSchemeKey)){
                localStorage.setItem(colorSchemeKey, "auto");
            }
        })();
    </script><script>
    (function() {
        const colorSchemeKey = 'StackColorScheme';
        const colorSchemeItem = localStorage.getItem(colorSchemeKey);
        const supportDarkMode = window.matchMedia('(prefers-color-scheme: dark)').matches === true;

        if (colorSchemeItem == 'dark' || colorSchemeItem === 'auto' && supportDarkMode) {
            

            document.documentElement.dataset.scheme = 'dark';
        } else {
            document.documentElement.dataset.scheme = 'light';
        }
    })();
</script>
<div class="container main-container flex 
    
        extended
    
">
    
        <div id="article-toolbar">
            <a href="https://linjianshu.github.io/" class="back-home">
                <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-chevron-left" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <polyline points="15 6 9 12 15 18" />
</svg>



                <span>返回</span>
            </a>
        </div>
    
<main class="main full-width">
    <article class="main-article">
    <header class="article-header">

    <div class="article-details">
    

    <h2 class="article-title">
        <a href="/p/mysqllearning/">MysqlLearning</a>
    </h2>

    

    
    <footer class="article-time">
        
            <div>
                <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-calendar-time" width="56" height="56" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <path d="M11.795 21h-6.795a2 2 0 0 1 -2 -2v-12a2 2 0 0 1 2 -2h12a2 2 0 0 1 2 2v4" />
  <circle cx="18" cy="18" r="4" />
  <path d="M15 3v4" />
  <path d="M7 3v4" />
  <path d="M3 11h16" />
  <path d="M18 16.496v1.504l1 1" />
</svg>
                <time class="article-time--published">Sep 25, 2021</time>
            </div>
        

        
            <div>
                <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-clock" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="12" cy="12" r="9" />
  <polyline points="12 7 12 12 15 15" />
</svg>



                <time class="article-time--reading">
                    阅读时长: 11 分钟
                </time>
            </div>
        
    </footer>
    
</div>
</header>

    <section class="article-content">
    <h3 id="mysql学习文档">mysql学习文档</h3>
<h5 id="一-为什么要学习数据库">一 为什么要学习数据库</h5>
<h5 id="二-数据库的相关概念">二 数据库的相关概念</h5>
<p>DBMS DB SQL</p>
<h5 id="三-数据库存储数据的特点">三 数据库存储数据的特点</h5>
<h5 id="四-初始mysql">四 初始mysql</h5>
<p>mysql产品的介绍</p>
<p>mysql产品的安装</p>
<p>mysql服务的启动和停止</p>
<p>mysql服务的登陆和退出</p>
<p>mysql的常见命令和语法规范</p>
<h5 id="五dql语言的学习">五DQL语言的学习</h5>
<p>基础查询</p>
<p>条件查询</p>
<p>排序查询</p>
<p>常见函数</p>
<p>分组查询</p>
<p>连接查询</p>
<p>子查询</p>
<p>分页查询</p>
<p>union联合查询</p>
<h5 id="六-dml语言的学习">六 DML语言的学习</h5>
<p>插入语句</p>
<p>修改语句</p>
<p>删除语句</p>
<h5 id="七-ddl语言的学习">七 DDL语言的学习</h5>
<p>库和表的管理</p>
<p>常见数据类型介绍</p>
<p>常见约束</p>
<p>保存数据的容器:</p>
<p>数组 集合 内存数据 断电就没了</p>
<p>文件 但是文件不好查找</p>
<p>因此把文件做成方便增删改查的软件 对文件进行操作 这样的软件就叫做数据库</p>
<h5 id="数据库的好处">数据库的好处</h5>
<ul>
<li>实现数据持久化</li>
<li>使用完整的管理系统统一管理,易于查询</li>
</ul>
<h5 id="数据库的概念">数据库的概念</h5>
<p>DB 数据库 database:存储数据的仓库,保存了一系列有组织的数据.</p>
<p>DBMS 数据库管理系统 database management system 数据库是通过dbms创建和操作的容器</p>
<p>常见的数据库管理系统 mysql oracle db2 sqlserver</p>
<p>SQL 结构化查询语言 structure query language :专门用来与数据库通信的语言</p>
<p>sql的优点:</p>
<ol>
<li>不是某个特定数据库供应商专有的语言,几乎所有DBMS都支持sql</li>
<li>简单易学</li>
<li>虽然简单,但实际上是一种强有力的语言,灵活使用其语言元素,可以进行非常复杂和高级的数据库操作</li>
</ol>
<p>类似于管家 管理 文件柜  DBMS 管理 DB</p>
<h5 id="数据库的特点">数据库的特点</h5>
<ol>
<li>将数据放到表中,表再放到库中</li>
<li>一个数据库中够可以有多个表,每个表都有一个自己的名字,用来标识自己,表名具有唯一性</li>
<li>表具有一些特性,这些特性定义了数据在表中如何存储,类似java中类的设计</li>
<li>表由列组成,我们也称为字段.所有表都是由一个或多个列组成的,每个列类似java中的属性</li>
<li>表中的数据是按行存储的,每一行类似于java中的对象</li>
</ol>
<h5 id="mysql产品的特点">Mysql产品的特点</h5>
<ul>
<li>mysql数据库隶属于mysqlab公司,总部位于瑞典,后被oracle收购</li>
<li>优点
<ul>
<li>成本低:开放源代码,一般可以免费使用</li>
<li>性能高:执行很快</li>
<li>简单:很容易安装和使用</li>
</ul>
</li>
</ul>
<h5 id="dbms分为两类">DBMS分为两类</h5>
<ul>
<li>基于共享文件系统的DBMS 例如 access</li>
<li>基于客户机&mdash;服务器的DBMS 例如 mysql oracle sqlserver</li>
</ul>
<h5 id="mysql版本">mysql版本</h5>
<ul>
<li>社区版 免费</li>
<li>企业版 收费</li>
</ul>
<h5 id="mysql卸载">mysql卸载</h5>
<p>先控制面板卸载</p>
<p>然后在安装目录下删除文件夹</p>
<p>然后在programdata中删除残余文件</p>
<p>清理注册表</p>
<p><figure 
	>
	<a href="/C:%5cUsers%5cAdministrator.YOURTREEDAD%5cAppData%5cRoaming%5cTypora%5ctypora-user-images%5cimage-20210919154523464.png" >
		<img src="/C:%5cUsers%5cAdministrator.YOURTREEDAD%5cAppData%5cRoaming%5cTypora%5ctypora-user-images%5cimage-20210919154523464.png"
			
			
			
			loading="lazy"
			alt="image-20210919154523464">
	</a>
	
	<figcaption>image-20210919154523464</figcaption>
	
</figure></p>
<h5 id="myini-配置文件">my.ini 配置文件</h5>
<p><figure 
	>
	<a href="/C:%5cUsers%5cAdministrator.YOURTREEDAD%5cAppData%5cRoaming%5cTypora%5ctypora-user-images%5cimage-20210919160841225.png" >
		<img src="/C:%5cUsers%5cAdministrator.YOURTREEDAD%5cAppData%5cRoaming%5cTypora%5ctypora-user-images%5cimage-20210919160841225.png"
			
			
			
			loading="lazy"
			alt="image-20210919160841225">
	</a>
	
	<figcaption>image-20210919160841225</figcaption>
	
</figure></p>
<p>端口号 安装位置 数据存放位置 字符集 默认存储引擎 语法模式 最大连接数</p>
<p>改完服务需要重启</p>
<h5 id="mysql服务的启动和停止">mysql服务的启动和停止</h5>
<p><figure 
	>
	<a href="/C:%5cUsers%5cAdministrator.YOURTREEDAD%5cAppData%5cRoaming%5cTypora%5ctypora-user-images%5cimage-20210919161439996.png" >
		<img src="/C:%5cUsers%5cAdministrator.YOURTREEDAD%5cAppData%5cRoaming%5cTypora%5ctypora-user-images%5cimage-20210919161439996.png"
			
			
			
			loading="lazy"
			alt="image-20210919161439996">
	</a>
	
	<figcaption>image-20210919161439996</figcaption>
	
</figure></p>
<h5 id="mysql服务端的登陆和退出">mysql服务端的登陆和退出</h5>
<ol>
<li>使用mysql command line client 不建议 只适用于root用户</li>
</ol>
<p><figure 
	>
	<a href="/C:%5cUsers%5cAdministrator.YOURTREEDAD%5cAppData%5cRoaming%5cTypora%5ctypora-user-images%5cimage-20210919161620401.png" >
		<img src="/C:%5cUsers%5cAdministrator.YOURTREEDAD%5cAppData%5cRoaming%5cTypora%5ctypora-user-images%5cimage-20210919161620401.png"
			
			
			
			loading="lazy"
			alt="image-20210919161620401">
	</a>
	
	<figcaption>image-20210919161620401</figcaption>
	
</figure></p>
<p><figure 
	>
	<a href="/C:%5cUsers%5cAdministrator.YOURTREEDAD%5cAppData%5cRoaming%5cTypora%5ctypora-user-images%5cimage-20210919161637466.png" >
		<img src="/C:%5cUsers%5cAdministrator.YOURTREEDAD%5cAppData%5cRoaming%5cTypora%5ctypora-user-images%5cimage-20210919161637466.png"
			
			
			
			loading="lazy"
			alt="image-20210919161637466">
	</a>
	
	<figcaption>image-20210919161637466</figcaption>
	
</figure></p>
<p>2.命令行 p输入密码不能有空格 -h 主机名 -P 端口号 -u 用户名 -p密码</p>
<p><figure 
	>
	<a href="/C:%5cUsers%5cAdministrator.YOURTREEDAD%5cAppData%5cRoaming%5cTypora%5ctypora-user-images%5cimage-20210919161848290.png" >
		<img src="/C:%5cUsers%5cAdministrator.YOURTREEDAD%5cAppData%5cRoaming%5cTypora%5ctypora-user-images%5cimage-20210919161848290.png"
			
			
			
			loading="lazy"
			alt="image-20210919161848290">
	</a>
	
	<figcaption>image-20210919161848290</figcaption>
	
</figure></p>
<p>简化命令 退出exit 或者 ctrl+C</p>
<p><figure 
	>
	<a href="/C:%5cUsers%5cAdministrator.YOURTREEDAD%5cAppData%5cRoaming%5cTypora%5ctypora-user-images%5cimage-20210919161938321.png" >
		<img src="/C:%5cUsers%5cAdministrator.YOURTREEDAD%5cAppData%5cRoaming%5cTypora%5ctypora-user-images%5cimage-20210919161938321.png"
			
			
			
			loading="lazy"
			alt="image-20210919161938321">
	</a>
	
	<figcaption>image-20210919161938321</figcaption>
	
</figure></p>
<p>基本命令</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="k">show</span><span class="w"> </span><span class="n">databases</span><span class="w"> </span><span class="p">;</span><span class="w"> 
</span><span class="w"></span><span class="n">use</span><span class="w"> </span><span class="n">tset</span><span class="w"> </span><span class="p">;</span><span class="w"> </span><span class="o">//</span><span class="err">进入数据库</span><span class="w">
</span></code></pre></div><p><figure 
	>
	<a href="/C:%5cUsers%5cAdministrator.YOURTREEDAD%5cAppData%5cRoaming%5cTypora%5ctypora-user-images%5cimage-20210919163057930.png" >
		<img src="/C:%5cUsers%5cAdministrator.YOURTREEDAD%5cAppData%5cRoaming%5cTypora%5ctypora-user-images%5cimage-20210919163057930.png"
			
			
			
			loading="lazy"
			alt="image-20210919163057930">
	</a>
	
	<figcaption>image-20210919163057930</figcaption>
	
</figure></p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="k">show</span><span class="w"> </span><span class="n">tables</span><span class="w"> </span><span class="p">;</span><span class="w"> </span><span class="o">//</span><span class="err">查看数据库里的表</span><span class="w"> </span><span class="err">在当前用户进入的数据库中查看</span><span class="w">
</span><span class="w"></span><span class="k">show</span><span class="w"> </span><span class="n">tables</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">sys</span><span class="w"> </span><span class="p">;</span><span class="w"> </span><span class="o">//</span><span class="err">查看数据库里的表</span><span class="w"> </span><span class="err">可以在当前数据库中查看别的数据库中的表</span><span class="w">
</span><span class="w"></span><span class="k">select</span><span class="w"> </span><span class="k">database</span><span class="p">()</span><span class="w"> </span><span class="p">;</span><span class="w"> </span><span class="o">//</span><span class="err">查看当前处于什么位置</span><span class="w">  </span><span class="err">类似于</span><span class="n">linux中的</span><span class="w"> </span><span class="n">pwd</span><span class="w">
</span><span class="w"></span><span class="k">create</span><span class="w"> </span><span class="k">table</span><span class="w"> </span><span class="p">...</span><span class="w"> </span><span class="o">//</span><span class="err">创建表</span><span class="w">
</span></code></pre></div><p><figure 
	>
	<a href="/C:%5cUsers%5cAdministrator.YOURTREEDAD%5cAppData%5cRoaming%5cTypora%5ctypora-user-images%5cimage-20210919163334648.png" >
		<img src="/C:%5cUsers%5cAdministrator.YOURTREEDAD%5cAppData%5cRoaming%5cTypora%5ctypora-user-images%5cimage-20210919163334648.png"
			
			
			
			loading="lazy"
			alt="image-20210919163334648">
	</a>
	
	<figcaption>image-20210919163334648</figcaption>
	
</figure></p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="k">desc</span><span class="w"> </span><span class="n">stuInfo</span><span class="w"> </span><span class="p">;</span><span class="w"> </span><span class="o">//</span><span class="err">查看表</span><span class="n">stuInfo中的字段</span><span class="w">
</span><span class="w"></span><span class="k">insert</span><span class="w"> </span><span class="k">into</span><span class="w"> </span><span class="n">stuInfo</span><span class="p">(</span><span class="n">id</span><span class="p">,</span><span class="n">name</span><span class="p">)</span><span class="w"> </span><span class="n">value</span><span class="w"> </span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="s1">&#39;ljs&#39;</span><span class="p">)</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="k">delete</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">stuInfo</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="n">id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1</span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="k">update</span><span class="w"> </span><span class="n">stuInfo</span><span class="w"> </span><span class="k">set</span><span class="w"> </span><span class="n">name</span><span class="w"> </span><span class="o">=</span><span class="s1">&#39;jwt&#39;</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="n">id</span><span class="w"> </span><span class="o">=</span><span class="mi">1</span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="k">select</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">stuInfo</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="o">//</span><span class="err">增删改查</span><span class="w">
</span></code></pre></div><p><figure 
	>
	<a href="/C:%5cUsers%5cAdministrator.YOURTREEDAD%5cAppData%5cRoaming%5cTypora%5ctypora-user-images%5cimage-20210919163430191.png" >
		<img src="/C:%5cUsers%5cAdministrator.YOURTREEDAD%5cAppData%5cRoaming%5cTypora%5ctypora-user-images%5cimage-20210919163430191.png"
			
			
			
			loading="lazy"
			alt="image-20210919163430191">
	</a>
	
	<figcaption>image-20210919163430191</figcaption>
	
</figure></p>
<p>练习</p>
<p><figure 
	>
	<a href="/C:%5cUsers%5cAdministrator.YOURTREEDAD%5cAppData%5cRoaming%5cTypora%5ctypora-user-images%5cimage-20210919164509494.png" >
		<img src="/C:%5cUsers%5cAdministrator.YOURTREEDAD%5cAppData%5cRoaming%5cTypora%5ctypora-user-images%5cimage-20210919164509494.png"
			
			
			
			loading="lazy"
			alt="image-20210919164509494">
	</a>
	
	<figcaption>image-20210919164509494</figcaption>
	
</figure></p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="k">sql</span><span class="w">
</span><span class="w"></span><span class="k">select</span><span class="w"> </span><span class="k">version</span><span class="p">()</span><span class="w"> </span><span class="p">;</span><span class="w"> </span><span class="o">//</span><span class="err">查看版本号</span><span class="w"> </span><span class="n">sql中</span><span class="w">
</span><span class="w"></span><span class="n">cmd</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="w"> </span><span class="c1">--version 
</span><span class="c1"></span><span class="n">mysql</span><span class="w"> </span><span class="o">-</span><span class="n">V</span><span class="w"> 
</span></code></pre></div><h5 id="mysql的语法规范">mysql的语法规范</h5>
<ol>
<li>不区分大小写,但建议关键字大写,表名 列名小写</li>
<li>每条命令用分号结尾</li>
<li>每条命令根据需要,可以进行缩进或者换行</li>
<li>注释
<ol>
<li>单行注释 #注释文字 &ndash; 注释文字 (必须要有空格)</li>
<li>多行注释 /*     lkdfjasldfj     */</li>
</ol>
</li>
</ol>
<h5 id="基础查询">基础查询</h5>
<p>select 查询列表 from 表名</p>
<ul>
<li>查询列表可以是:表中的字段 / 常量值 / 表达式 / 函数</li>
<li>查询的结果可以是一个虚拟的表格</li>
</ul>
<p>查询单个字段</p>
<p>查询多个字段</p>
<p>查询所有字段</p>
<p>select * 不能控制字段的显示顺序</p>
<p>之所以用`` 着重号 第一为了直白,第二为了区分关键字 防止与关键字重名</p>
<p>查询常量</p>
<p>查询表达式</p>
<p>查询函数</p>
<p><figure 
	>
	<a href="/C:%5cUsers%5cAdministrator.YOURTREEDAD%5cAppData%5cRoaming%5cTypora%5ctypora-user-images%5cimage-20210919202609756.png" >
		<img src="/C:%5cUsers%5cAdministrator.YOURTREEDAD%5cAppData%5cRoaming%5cTypora%5ctypora-user-images%5cimage-20210919202609756.png"
			
			
			
			loading="lazy"
			alt="image-20210919202609756">
	</a>
	
	<figcaption>image-20210919202609756</figcaption>
	
</figure></p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="k">select</span><span class="w"> </span><span class="mi">100</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="k">select</span><span class="w"> </span><span class="s1">&#39;join&#39;</span><span class="w"> </span><span class="p">;</span><span class="w"> 
</span><span class="w"></span><span class="k">select</span><span class="w"> </span><span class="mi">100</span><span class="o">*</span><span class="mi">98</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="k">select</span><span class="w"> </span><span class="k">database</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="k">select</span><span class="w"> </span><span class="k">version</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="k">show</span><span class="w"> </span><span class="n">tables</span><span class="w"> </span><span class="p">;</span><span class="w">
</span></code></pre></div><p>起别名 方便理解 如果要查询的字段有重名的情况,使用别名可以区分开来</p>
<p>方式一: 使用as</p>
<p>方式二: 直接不用as</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="k">select</span><span class="w"> </span><span class="n">last_name</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="err">姓</span><span class="w"> </span><span class="p">,</span><span class="n">first_name</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="err">名</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">employees</span><span class="w">  </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="k">select</span><span class="w"> </span><span class="n">last_name</span><span class="w">  </span><span class="err">姓</span><span class="w"> </span><span class="p">,</span><span class="n">first_name</span><span class="w">  </span><span class="err">名</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">employees</span><span class="w">  </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="o">#</span><span class="w"> </span><span class="err">防止歧义</span><span class="w"> </span><span class="err">双引号也行</span><span class="w"> </span><span class="err">单引号也可以</span><span class="w">
</span><span class="w"></span><span class="k">select</span><span class="w"> </span><span class="n">salary</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="o">`</span><span class="k">out</span><span class="w"> </span><span class="n">put</span><span class="o">`</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">employees</span><span class="w"> </span><span class="p">;</span><span class="w">
</span></code></pre></div><p>去重</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="k">select</span><span class="w"> </span><span class="k">database</span><span class="p">()</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="k">show</span><span class="w"> </span><span class="n">tables</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="k">desc</span><span class="w"> </span><span class="n">employees</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="k">select</span><span class="w"> </span><span class="k">distinct</span><span class="w"> </span><span class="n">department_id</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">employees</span><span class="w"> </span><span class="p">;</span><span class="w">
</span></code></pre></div><p><figure 
	>
	<a href="/C:%5cUsers%5cAdministrator.YOURTREEDAD%5cAppData%5cRoaming%5cTypora%5ctypora-user-images%5cimage-20210919203515527.png" >
		<img src="/C:%5cUsers%5cAdministrator.YOURTREEDAD%5cAppData%5cRoaming%5cTypora%5ctypora-user-images%5cimage-20210919203515527.png"
			
			
			
			loading="lazy"
			alt="image-20210919203515527">
	</a>
	
	<figcaption>image-20210919203515527</figcaption>
	
</figure></p>
<p>+号的作用</p>
<p>姓名连接成一个字段 , 显示为姓名</p>
<p>以下错误</p>
<p><figure 
	>
	<a href="/C:%5cUsers%5cAdministrator.YOURTREEDAD%5cAppData%5cRoaming%5cTypora%5ctypora-user-images%5cimage-20210919203805417.png" >
		<img src="/C:%5cUsers%5cAdministrator.YOURTREEDAD%5cAppData%5cRoaming%5cTypora%5ctypora-user-images%5cimage-20210919203805417.png"
			
			
			
			loading="lazy"
			alt="image-20210919203805417">
	</a>
	
	<figcaption>image-20210919203805417</figcaption>
	
</figure></p>
<p>java中的+号:</p>
<ul>
<li>运算符 , 操作数为数值型</li>
<li>连接符, 只要有一个操作数为字符串</li>
</ul>
<p>mysql中的+号:</p>
<ul>
<li>仅仅只有一个功能:运算符</li>
</ul>
<p>select 100+90 ;</p>
<p>select &lsquo;123&rsquo; +90 ; 其中一方为字符型,视图将字符型数值转换为数值型, 如果转换成功,则继续做加法运算</p>
<p>select &lsquo;james&rsquo; + 90 ; 如果转换失败,则将字符型数值转换成0</p>
<p>select null +10 ; 只要其中一方为null , 则结果肯定为null <figure 
	>
	<a href="/C:%5cUsers%5cAdministrator.YOURTREEDAD%5cAppData%5cRoaming%5cTypora%5ctypora-user-images%5cimage-20210919204251938.png" >
		<img src="/C:%5cUsers%5cAdministrator.YOURTREEDAD%5cAppData%5cRoaming%5cTypora%5ctypora-user-images%5cimage-20210919204251938.png"
			
			
			
			loading="lazy"
			alt="image-20210919204251938">
	</a>
	
	<figcaption>image-20210919204251938</figcaption>
	
</figure></p>
<p>所以需要使用函数 concat() ;</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="o">//</span><span class="err">这是错误的用法</span><span class="w"> </span><span class="p">,</span><span class="w"> </span><span class="err">加上了单引号</span><span class="w"> </span><span class="p">,</span><span class="w"> </span><span class="err">无法解析</span><span class="w">
</span><span class="w"></span><span class="k">select</span><span class="w"> </span><span class="n">concat</span><span class="w"> </span><span class="p">(</span><span class="s1">&#39;last_name&#39;</span><span class="w"> </span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;first_name&#39;</span><span class="p">)</span><span class="w"> </span><span class="err">姓名</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">employees</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="o">//</span><span class="err">这是正确的</span><span class="w">
</span><span class="w"></span><span class="k">select</span><span class="w"> </span><span class="n">concat</span><span class="w"> </span><span class="p">(</span><span class="n">last_name</span><span class="w"> </span><span class="p">,</span><span class="w"> </span><span class="n">first_name</span><span class="p">)</span><span class="w"> </span><span class="err">姓名</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">employees</span><span class="w"> </span><span class="p">;</span><span class="w">
</span></code></pre></div><h5 id="显示出表employees中的全部列各个列之间用逗号连接列头显示成out_put">显示出表employees中的全部列,各个列之间用逗号连接,列头显示成out_put</h5>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="o">#</span><span class="err">查看某表列名</span><span class="w">
</span><span class="w"></span><span class="k">select</span><span class="w"> </span><span class="k">column_name</span><span class="w"> </span><span class="n">fuck_name</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">information_schema</span><span class="p">.</span><span class="n">columns</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="n">table_schema</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;myemployees&#39;</span><span class="w"> </span><span class="k">and</span><span class="w"> </span><span class="k">table_name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;employees&#39;</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="o">#</span><span class="err">没问题</span><span class="w"> </span><span class="err">因为不存在</span><span class="k">null</span><span class="w">
</span><span class="w"></span><span class="k">select</span><span class="w"> </span><span class="n">concat</span><span class="w"> </span><span class="p">(</span><span class="n">employee_id</span><span class="w"> </span><span class="p">,</span><span class="s1">&#39;,&#39;</span><span class="p">,</span><span class="n">first_name</span><span class="w"> </span><span class="p">)</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">employees</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="o">#</span><span class="err">有问题</span><span class="w"> </span><span class="err">因为存在</span><span class="k">null</span><span class="w">  </span><span class="p">,</span><span class="w"> </span><span class="err">导致那行都变成</span><span class="k">null</span><span class="w"> </span><span class="err">了</span><span class="w">
</span><span class="w"></span><span class="k">select</span><span class="w"> </span><span class="n">concat</span><span class="w"> </span><span class="p">(</span><span class="n">employee_id</span><span class="w"> </span><span class="p">,</span><span class="s1">&#39;,&#39;</span><span class="p">,</span><span class="n">first_name</span><span class="p">,</span><span class="s1">&#39;,&#39;</span><span class="p">,</span><span class="n">commission_pct</span><span class="w"> </span><span class="p">)</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">employees</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">----------------------------------------------------------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="n">concat</span><span class="w"> </span><span class="p">(</span><span class="n">employee_id</span><span class="w"> </span><span class="p">,</span><span class="s1">&#39;,&#39;</span><span class="p">,</span><span class="n">first_name</span><span class="p">,</span><span class="s1">&#39;,&#39;</span><span class="p">,</span><span class="n">commission_pct</span><span class="w"> </span><span class="p">)</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">----------------------------------------------------------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="k">NULL</span><span class="w">                                                     </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w"> </span><span class="k">NULL</span><span class="w">                                                     </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w"> </span><span class="k">NULL</span><span class="w">                                                     </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w"> </span><span class="k">NULL</span><span class="w">                                                     </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w"> </span><span class="k">NULL</span><span class="w">                                                     </span><span class="o">|</span><span class="w">
</span></code></pre></div><h5 id="引入函数-ifnull">引入函数 IFNULL</h5>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="k">select</span><span class="w"> </span><span class="n">IFNULL</span><span class="p">(</span><span class="n">a</span><span class="p">,</span><span class="n">b</span><span class="p">)</span><span class="w">
</span><span class="w"></span><span class="k">select</span><span class="w"> </span><span class="n">ifnull</span><span class="p">(</span><span class="n">commission_pct</span><span class="p">,</span><span class="mi">0</span><span class="p">)</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="err">奖金率</span><span class="p">,</span><span class="w"> </span><span class="n">commission_pct</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">employees</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="n">ifnull</span><span class="p">(</span><span class="n">commission_pct</span><span class="p">,</span><span class="mi">0</span><span class="p">)</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="err">奖金率</span><span class="p">,</span><span class="w"> </span><span class="n">commission_pct</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">employees</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">--------+----------------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="err">奖金率</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">commission_pct</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">--------+----------------+
</span><span class="c1"></span><span class="o">|</span><span class="w">   </span><span class="mi">0</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="o">|</span><span class="w">           </span><span class="k">NULL</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w">   </span><span class="mi">0</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="o">|</span><span class="w">           </span><span class="k">NULL</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w">   </span><span class="mi">0</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="o">|</span><span class="w">           </span><span class="k">NULL</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w">   </span><span class="mi">0</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="o">|</span><span class="w">           </span><span class="k">NULL</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w">   </span><span class="mi">0</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="o">|</span><span class="w">           </span><span class="k">NULL</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w">   </span><span class="mi">0</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="o">|</span><span class="w">           </span><span class="k">NULL</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w">   </span><span class="mi">0</span><span class="p">.</span><span class="mi">40</span><span class="w"> </span><span class="o">|</span><span class="w">           </span><span class="mi">0</span><span class="p">.</span><span class="mi">40</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w">   </span><span class="mi">0</span><span class="p">.</span><span class="mi">30</span><span class="w"> </span><span class="o">|</span><span class="w">           </span><span class="mi">0</span><span class="p">.</span><span class="mi">30</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w">   </span><span class="mi">0</span><span class="p">.</span><span class="mi">30</span><span class="w"> </span><span class="o">|</span><span class="w">           </span><span class="mi">0</span><span class="p">.</span><span class="mi">30</span><span class="w"> </span><span class="o">|</span><span class="w">
</span></code></pre></div><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="o">#</span><span class="err">这是正确的</span><span class="w">
</span><span class="w"></span><span class="k">select</span><span class="w"> </span><span class="n">concat</span><span class="w"> </span><span class="p">(</span><span class="n">employee_id</span><span class="w"> </span><span class="p">,</span><span class="s1">&#39;,&#39;</span><span class="p">,</span><span class="n">first_name</span><span class="p">,</span><span class="s1">&#39;,&#39;</span><span class="p">,</span><span class="n">ifnull</span><span class="p">(</span><span class="n">commission_pct</span><span class="p">,</span><span class="mi">0</span><span class="p">)</span><span class="w"> </span><span class="p">)</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">employees</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">--------------------------------------------------------------------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="n">concat</span><span class="w"> </span><span class="p">(</span><span class="n">employee_id</span><span class="w"> </span><span class="p">,</span><span class="s1">&#39;,&#39;</span><span class="p">,</span><span class="n">first_name</span><span class="p">,</span><span class="s1">&#39;,&#39;</span><span class="p">,</span><span class="n">ifnull</span><span class="p">(</span><span class="n">commission_pct</span><span class="p">,</span><span class="mi">0</span><span class="p">)</span><span class="w"> </span><span class="p">)</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">--------------------------------------------------------------------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="mi">142</span><span class="p">,</span><span class="n">Curtis</span><span class="p">,</span><span class="mi">0</span><span class="p">.</span><span class="mi">00</span><span class="w">                                                    </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w"> </span><span class="mi">143</span><span class="p">,</span><span class="n">Randall</span><span class="p">,</span><span class="mi">0</span><span class="p">.</span><span class="mi">00</span><span class="w">                                                   </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w"> </span><span class="mi">144</span><span class="p">,</span><span class="n">Peter</span><span class="p">,</span><span class="mi">0</span><span class="p">.</span><span class="mi">00</span><span class="w">                                                     </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w"> </span><span class="mi">161</span><span class="p">,</span><span class="n">Sarath</span><span class="p">,</span><span class="mi">0</span><span class="p">.</span><span class="mi">25</span><span class="w">                                                    </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w"> </span><span class="mi">169</span><span class="p">,</span><span class="n">Harrison</span><span class="p">,</span><span class="mi">0</span><span class="p">.</span><span class="mi">20</span><span class="w">                                                  </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w"> </span><span class="mi">170</span><span class="p">,</span><span class="n">Tayler</span><span class="p">,</span><span class="mi">0</span><span class="p">.</span><span class="mi">20</span><span class="w">                                                    </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w"> </span><span class="mi">171</span><span class="p">,</span><span class="n">William</span><span class="p">,</span><span class="mi">0</span><span class="p">.</span><span class="mi">15</span><span class="w">                                                   </span><span class="o">|</span><span class="w">
</span></code></pre></div><h5 id="条件查询-select-查询列表-from-表名-where-筛选条件-">条件查询 select 查询列表 from 表名 where 筛选条件 ;</h5>
<p>先查表名有没有在,再筛选,再查询</p>
<p>分类</p>
<ul>
<li>按条件表达式筛选
<ul>
<li>条件运算符 &gt; &lt; = &lt;&gt;(不等于)</li>
</ul>
</li>
<li>按逻辑表达式筛选 作用用于连接条件表达式
<ul>
<li>&amp;&amp; || ! and or not</li>
</ul>
</li>
<li>模糊查询
<ul>
<li>like</li>
<li>between and</li>
<li>in</li>
<li>is null</li>
</ul>
</li>
</ul>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="o">#</span><span class="err">条件运算符</span><span class="w">
</span><span class="w"></span><span class="k">select</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">employees</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="n">salary</span><span class="w"> </span><span class="o">&gt;</span><span class="mi">12000</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="o">#</span><span class="err">逻辑运算符</span><span class="w">
</span><span class="w"></span><span class="k">select</span><span class="w"> </span><span class="n">first_name</span><span class="w"> </span><span class="p">,</span><span class="w"> </span><span class="n">department_id</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">employees</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="n">department_id</span><span class="w"> </span><span class="o">&lt;&gt;</span><span class="w"> </span><span class="mi">90</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="o">#</span><span class="err">逻辑表达式筛选</span><span class="w">
</span><span class="w"></span><span class="k">select</span><span class="w"> </span><span class="n">first_name</span><span class="w"> </span><span class="p">,</span><span class="w"> </span><span class="n">salary</span><span class="w"> </span><span class="p">,</span><span class="w"> </span><span class="n">commission_pct</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">employees</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="n">salary</span><span class="w"> </span><span class="o">&gt;</span><span class="mi">10000</span><span class="w"> </span><span class="k">and</span><span class="w"> </span><span class="n">salary</span><span class="w"> </span><span class="o">&lt;</span><span class="mi">20000</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="o">#</span><span class="err">好像三个不太一样</span><span class="w">
</span><span class="w"></span><span class="k">select</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">employees</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="k">not</span><span class="p">(</span><span class="n">department_id</span><span class="w"> </span><span class="k">between</span><span class="w"> </span><span class="mi">90</span><span class="w"> </span><span class="k">and</span><span class="w"> </span><span class="mi">120</span><span class="p">)</span><span class="w"> </span><span class="k">or</span><span class="w"> </span><span class="n">salary</span><span class="w"> </span><span class="o">&gt;</span><span class="mi">15000</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"> 
</span><span class="w"></span><span class="k">select</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">employees</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="n">department_id</span><span class="w"> </span><span class="k">not</span><span class="w"> </span><span class="k">in</span><span class="p">(</span><span class="mi">90</span><span class="p">,</span><span class="w"> </span><span class="mi">120</span><span class="p">)</span><span class="w"> </span><span class="k">or</span><span class="w"> </span><span class="n">salary</span><span class="w"> </span><span class="o">&gt;</span><span class="mi">15000</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"> 
</span><span class="w"></span><span class="k">select</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">employees</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="n">department_id</span><span class="w"> </span><span class="k">not</span><span class="w"> </span><span class="k">in</span><span class="p">(</span><span class="n">department_id</span><span class="w"> </span><span class="k">between</span><span class="w"> </span><span class="mi">90</span><span class="w"> </span><span class="k">and</span><span class="w"> </span><span class="mi">120</span><span class="p">)</span><span class="w"> </span><span class="k">or</span><span class="w"> </span><span class="n">salary</span><span class="w"> </span><span class="o">&gt;</span><span class="mi">15000</span><span class="w"> </span><span class="p">;</span><span class="w">
</span></code></pre></div><p>模糊查询</p>
<ul>
<li>like</li>
<li>一般和通配符使用
<ul>
<li>% 0到任意个字符</li>
<li>_ 任意一个字符</li>
</ul>
</li>
<li>between and</li>
<li>in</li>
<li>is null | is not null</li>
</ul>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="o">#</span><span class="err">模糊查询</span><span class="w">
</span><span class="w"></span><span class="k">select</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">employees</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="n">first_name</span><span class="w"> </span><span class="k">like</span><span class="w"> </span><span class="s1">&#39;%a%&#39;</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="k">select</span><span class="w"> </span><span class="n">first_name</span><span class="w"> </span><span class="p">,</span><span class="w"> </span><span class="n">salary</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">employees</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="n">first_name</span><span class="w"> </span><span class="k">like</span><span class="w"> </span><span class="s1">&#39;__e_a%&#39;</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="o">#</span><span class="err">如果不想使用转义字符</span><span class="w"> </span><span class="p">,</span><span class="w"> </span><span class="err">第二个字符就是</span><span class="n">_</span><span class="w"> </span><span class="err">而不是任意单个字符的话</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="n">last_name</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">employees</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="n">last_name</span><span class="w"> </span><span class="k">like</span><span class="w"> </span><span class="s1">&#39;_\_%&#39;</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">-----------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="n">last_name</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">-----------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="n">K_ing</span><span class="w">     </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w"> </span><span class="n">K_ing</span><span class="w">     </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">-----------+
</span><span class="c1"></span><span class="mi">2</span><span class="w"> </span><span class="k">rows</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="k">set</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="o">#</span><span class="err">或者使用以下这种</span><span class="w"> </span><span class="err">使用</span><span class="k">ESCAPE</span><span class="w"> </span><span class="err">来取消转义</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="n">last_name</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">employees</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="n">last_name</span><span class="w"> </span><span class="k">like</span><span class="w"> </span><span class="s1">&#39;_$_%&#39;</span><span class="w"> </span><span class="k">escape</span><span class="w"> </span><span class="s1">&#39;$&#39;</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">-----------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="n">last_name</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">-----------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="n">K_ing</span><span class="w">     </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w"> </span><span class="n">K_ing</span><span class="w">     </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">-----------+
</span><span class="c1"></span><span class="mi">2</span><span class="w"> </span><span class="k">rows</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="k">set</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="n">last_name</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">employees</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="n">last_name</span><span class="w"> </span><span class="k">like</span><span class="w"> </span><span class="s1">&#39;_h_%&#39;</span><span class="w"> </span><span class="k">escape</span><span class="w"> </span><span class="s1">&#39;h&#39;</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">-----------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="n">last_name</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">-----------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="n">K_ing</span><span class="w">     </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w"> </span><span class="n">K_ing</span><span class="w">     </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">-----------+
</span><span class="c1"></span><span class="mi">2</span><span class="w"> </span><span class="k">rows</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="k">set</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span><span class="w">
</span></code></pre></div><h5 id="between-and">between and</h5>
<ul>
<li>提高语句简洁度</li>
<li>左右都包含临界值</li>
<li>不能颠倒顺序</li>
</ul>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="o">#</span><span class="err">左闭右闭</span><span class="w">
</span><span class="w"></span><span class="k">select</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">employees</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="n">employee_id</span><span class="w"> </span><span class="k">between</span><span class="w"> </span><span class="mi">100</span><span class="w"> </span><span class="k">and</span><span class="w"> </span><span class="mi">120</span><span class="w"> </span><span class="p">;</span><span class="w">
</span></code></pre></div><h5 id="in-判断某字段的值是否属于in列表中的某一项">in 判断某字段的值是否属于in列表中的某一项</h5>
<ul>
<li>
<p>使用 in 提高语句的简洁度</p>
</li>
<li>
<p>in 列表的值类型必须一致或兼容</p>
</li>
<li>
<p>in 不支持通配符  毕竟不是like关键字</p>
</li>
</ul>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="k">select</span><span class="w"> </span><span class="n">employee_id</span><span class="w"> </span><span class="p">,</span><span class="w"> </span><span class="n">job_id</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">employees</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="n">job_id</span><span class="w"> </span><span class="k">in</span><span class="p">(</span><span class="s1">&#39;IT_PROG&#39;</span><span class="p">,</span><span class="s1">&#39;AD_VP&#39;</span><span class="p">,</span><span class="s1">&#39;AD_PRES&#39;</span><span class="p">)</span><span class="w"> </span><span class="p">;</span><span class="w">
</span></code></pre></div><h5 id="is-null">is null</h5>
<ul>
<li>= 或 &lt;&gt; 不能用于判断null值</li>
</ul>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="k">select</span><span class="w"> </span><span class="n">first_name</span><span class="w"> </span><span class="p">,</span><span class="w"> </span><span class="n">commission_pct</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">employees</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="n">commission_pct</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="k">null</span><span class="w"> </span><span class="p">;</span><span class="w">
</span></code></pre></div><h5 id="is-not-null">is not null</h5>
<h5 id="安全等于---">安全等于   &lt;=&gt;</h5>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="o">#</span><span class="err">安全等于可以用来判断是不是为空</span><span class="w">
</span><span class="w"></span><span class="k">select</span><span class="w"> </span><span class="n">first_name</span><span class="w"> </span><span class="p">,</span><span class="w"> </span><span class="n">commission_pct</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">employees</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="n">commission_pct</span><span class="w"> </span><span class="o">&lt;=&gt;</span><span class="w"> </span><span class="k">null</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="o">#</span><span class="err">安全等于也可以用来判断是不是某个数值</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="n">last_name</span><span class="w"> </span><span class="p">,</span><span class="w"> </span><span class="n">salary</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">employees</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="n">salary</span><span class="w"> </span><span class="o">&lt;=&gt;</span><span class="w"> </span><span class="mi">12000</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">-----------+----------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="n">last_name</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">salary</span><span class="w">   </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">-----------+----------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="n">Greenberg</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="mi">12000</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w"> </span><span class="n">Errazuriz</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="mi">12000</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w"> </span><span class="n">Higgins</span><span class="w">   </span><span class="o">|</span><span class="w"> </span><span class="mi">12000</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">-----------+----------+
</span><span class="c1"></span><span class="mi">3</span><span class="w"> </span><span class="k">rows</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="k">set</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span><span class="w">
</span></code></pre></div><h5 id="安全等于和is-null-的区别">安全等于和is null 的区别</h5>
<p>is null 仅仅可以判断null值 , 可读性较高 , 建议使用</p>
<p>&lt;=&gt; 既可以判断null值,又可以判断普通的数值</p>
<h5 id="复习一下">复习一下</h5>
<h5 id="mysql">mysql</h5>
<h5 id="与mysql的第一次亲密接触">与mysql的第一次亲密接触</h5>
<h5 id="数据库的好处-1">数据库的好处</h5>
<ol>
<li>持久化数据到本地</li>
<li>结构化查询</li>
</ol>
<h5 id="数据库的常见概念">数据库的常见概念</h5>
<ol>
<li>DB 数据库,存储数据的容器</li>
<li>DBMS 数据库管理系统, 又称为数据库软件或数据库产品,用于创建或管理DB</li>
<li>SQL 结构化查询语言 ,用于和数据库通信的语言,不是某个数据库软件特有的,而是几乎所有的主流数据库软件通用的语言</li>
</ol>
<h5 id="数据库存储的特点">数据库存储的特点</h5>
<ol>
<li>数据存放到表中,然后表再存放到库中</li>
<li>一个库中可以有多张表,每张表具有唯一的表名用以标识自己</li>
<li>表有一个或多个列,列又称为字段,相当于java中的属性</li>
<li>表中的每一行数据,相当于java中的对象</li>
</ol>
<h5 id="常见的数据库管理系统">常见的数据库管理系统</h5>
<p>mysq oracle db2 sqlserver</p>
<h5 id="mysql的介绍">mysql的介绍</h5>
<h5 id="mysql的背景">mysql的背景</h5>
<p>前身属于瑞典的一家公司 mysql ab , 08被sun收购 , 09年被oracle收购</p>
<h5 id="mysql的优点">mysql的优点</h5>
<ol>
<li>开源免费成本低</li>
<li>性能高 , 移植性好</li>
<li>体积小,便于安装</li>
</ol>
<h5 id="mysql的安装">mysql的安装</h5>
<p>属于c/s架构的软件,一般来讲是安装服务端</p>
<p>企业版/社区版</p>
<p>环境变量配置</p>
<h5 id="mysql服务的启动和停止-1">mysql服务的启动和停止</h5>
<p>net start mysql</p>
<p>图形化界面里开服务</p>
<h5 id="mysql服务的登陆和退出">mysql服务的登陆和退出</h5>
<p>mysql -h localhost -P 3306 -u root -p123456</p>
<p>exit或者ctrl+C</p>
<h5 id="dql语言">DQL语言</h5>
<h5 id="基础查询-1">基础查询</h5>
<p>select 查询列表 from 表名</p>
<p>特点</p>
<ol>
<li>查询列表可以是字段/常量 / 表达式/ 函数/ 也可以是多个</li>
<li>查询结果是一个虚拟表</li>
</ol>
<p>示例</p>
<h5 id="查询单个字段">查询单个字段</h5>
<p>select 字段名 from 表名  ;</p>
<h5 id="查询多个字段">查询多个字段</h5>
<p>select 字段名 , 字段名 from 表名 ;</p>
<h5 id="查询所有字段">查询所有字段</h5>
<p>select * from 表名 ;</p>
<h5 id="查询常量">查询常量</h5>
<p>select 常量 as &hellip; ;</p>
<p><strong>注意:字符型和日期型的常量值必须用单引号引起来,数值型不需要</strong></p>
<h5 id="查询函数">查询函数</h5>
<p>select 函数名(实参列表) ;</p>
<h5 id="查询表达式">查询表达式</h5>
<p>select 100%98 ;</p>
<h5 id="起别名">起别名</h5>
<ol>
<li>as</li>
<li>空格</li>
</ol>
<h5 id="去重">去重</h5>
<p>distinct 只能给一个参数用</p>
<h5 id="号的作用">+号的作用</h5>
<p>只能做加法运算</p>
<p>select 数值+数值 ; 直接运算</p>
<p>select 字符 +数值 ; 尝试隐式转换然后运算 , 成功就成功,不成功就是0+数值</p>
<p>select null + 数值; 返回null</p>
<h5 id="concat函数">concat函数</h5>
<p>拼接字符</p>
<p>select concat (字符1 , 字符2 , 字符3 &hellip;) ;</p>
<h5 id="ifnull函数">ifnull函数</h5>
<p>判断某自字段或表达式是否为null , 如果为null 返回指定的值, 否则返回原本的值</p>
<p>select ifnull(commission_pct,0) from employees ; 如果是null则返回0 , 如果不是null , 则返回原值</p>
<h5 id="isnull函数">isnull函数</h5>
<p>判断是不是null , 是的话返回1 , 否的话就返回0</p>
<h5 id="条件查询">条件查询</h5>
<p>select 查询列表 from 表名 where 筛选条件</p>
<p>筛选条件的分类</p>
<ol>
<li>简单条件运算符 &gt; &lt; = &lt;&gt; &lt;=&gt; &gt;= &lt;=</li>
<li>逻辑运算符  || &amp;&amp; ! and or not</li>
<li>模糊查询</li>
</ol>
<p>like in is null is not null between and</p>
<p>like :一般搭配通配符使用, 用于判断字符型数值, <strong>在5.5版本之后 , 也可以判断int类型的</strong> , % 和 _ 区别</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="n">mysql</span><span class="o">&gt;</span><span class="w">  </span><span class="k">select</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">employees</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="n">department_id</span><span class="w"> </span><span class="k">like</span><span class="w"> </span><span class="s1">&#39;1__&#39;</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">-------------+-------------+-----------+----------+--------------+------------+----------+----------------+------------+---------------+---------------------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="n">employee_id</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">first_name</span><span class="w">  </span><span class="o">|</span><span class="w"> </span><span class="n">last_name</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">email</span><span class="w">    </span><span class="o">|</span><span class="w"> </span><span class="n">phone_number</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">job_id</span><span class="w">     </span><span class="o">|</span><span class="w"> </span><span class="n">salary</span><span class="w">   </span><span class="o">|</span><span class="w"> </span><span class="n">commission_pct</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">manager_id</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">department_id</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">hiredate</span><span class="w">            </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">-------------+-------------+-----------+----------+--------------+------------+----------+----------------+------------+---------------+---------------------+
</span><span class="c1"></span><span class="o">|</span><span class="w">         </span><span class="mi">108</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">Nancy</span><span class="w">       </span><span class="o">|</span><span class="w"> </span><span class="n">Greenberg</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">NGREENBE</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="mi">515</span><span class="p">.</span><span class="mi">124</span><span class="p">.</span><span class="mi">4569</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">FI_MGR</span><span class="w">     </span><span class="o">|</span><span class="w"> </span><span class="mi">12000</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="o">|</span><span class="w">           </span><span class="k">NULL</span><span class="w"> </span><span class="o">|</span><span class="w">        </span><span class="mi">101</span><span class="w"> </span><span class="o">|</span><span class="w">           </span><span class="mi">100</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="mi">1998</span><span class="o">-</span><span class="mi">03</span><span class="o">-</span><span class="mi">03</span><span class="w"> </span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w">         </span><span class="mi">109</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">Daniel</span><span class="w">      </span><span class="o">|</span><span class="w"> </span><span class="n">Faviet</span><span class="w">    </span><span class="o">|</span><span class="w"> </span><span class="n">DFAVIET</span><span class="w">  </span><span class="o">|</span><span class="w"> </span><span class="mi">515</span><span class="p">.</span><span class="mi">124</span><span class="p">.</span><span class="mi">4169</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">FI_ACCOUNT</span><span class="w"> </span><span class="o">|</span><span class="w">  </span><span class="mi">9000</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="o">|</span><span class="w">           </span><span class="k">NULL</span><span class="w"> </span><span class="o">|</span><span class="w">        </span><span class="mi">108</span><span class="w"> </span><span class="o">|</span><span class="w">           </span><span class="mi">100</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="mi">1998</span><span class="o">-</span><span class="mi">03</span><span class="o">-</span><span class="mi">03</span><span class="w"> </span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w">         </span><span class="mi">110</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">John</span><span class="w">        </span><span class="o">|</span><span class="w"> </span><span class="n">Chen</span><span class="w">      </span><span class="o">|</span><span class="w"> </span><span class="n">JCHEN</span><span class="w">    </span><span class="o">|</span><span class="w"> </span><span class="mi">515</span><span class="p">.</span><span class="mi">124</span><span class="p">.</span><span class="mi">4269</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">FI_ACCOUNT</span><span class="w"> </span><span class="o">|</span><span class="w">  </span><span class="mi">8200</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="o">|</span><span class="w">           </span><span class="k">NULL</span><span class="w"> </span><span class="o">|</span><span class="w">        </span><span class="mi">108</span><span class="w"> </span><span class="o">|</span><span class="w">           </span><span class="mi">100</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="mi">2000</span><span class="o">-</span><span class="mi">09</span><span class="o">-</span><span class="mi">09</span><span class="w"> </span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w">         </span><span class="mi">111</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">Ismael</span><span class="w">      </span><span class="o">|</span><span class="w"> </span><span class="n">Sciarra</span><span class="w">   </span><span class="o">|</span><span class="w"> </span><span class="n">ISCIARRA</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="mi">515</span><span class="p">.</span><span class="mi">124</span><span class="p">.</span><span class="mi">4369</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">FI_ACCOUNT</span><span class="w"> </span><span class="o">|</span><span class="w">  </span><span class="mi">7700</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="o">|</span><span class="w">           </span><span class="k">NULL</span><span class="w"> </span><span class="o">|</span><span class="w">        </span><span class="mi">108</span><span class="w"> </span><span class="o">|</span><span class="w">           </span><span class="mi">100</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="mi">2000</span><span class="o">-</span><span class="mi">09</span><span class="o">-</span><span class="mi">09</span><span class="w"> </span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w">         </span><span class="mi">112</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">Jose</span><span class="w"> </span><span class="n">Manuel</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">Urman</span><span class="w">     </span><span class="o">|</span><span class="w"> </span><span class="n">JMURMAN</span><span class="w">  </span><span class="o">|</span><span class="w"> </span><span class="mi">515</span><span class="p">.</span><span class="mi">124</span><span class="p">.</span><span class="mi">4469</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">FI_ACCOUNT</span><span class="w"> </span><span class="o">|</span><span class="w">  </span><span class="mi">7800</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="o">|</span><span class="w">           </span><span class="k">NULL</span><span class="w"> </span><span class="o">|</span><span class="w">        </span><span class="mi">108</span><span class="w"> </span><span class="o">|</span><span class="w">           </span><span class="mi">100</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="mi">2000</span><span class="o">-</span><span class="mi">09</span><span class="o">-</span><span class="mi">09</span><span class="w"> </span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w">         </span><span class="mi">113</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">Luis</span><span class="w">        </span><span class="o">|</span><span class="w"> </span><span class="n">Popp</span><span class="w">      </span><span class="o">|</span><span class="w"> </span><span class="n">LPOPP</span><span class="w">    </span><span class="o">|</span><span class="w"> </span><span class="mi">515</span><span class="p">.</span><span class="mi">124</span><span class="p">.</span><span class="mi">4567</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">FI_ACCOUNT</span><span class="w"> </span><span class="o">|</span><span class="w">  </span><span class="mi">6900</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="o">|</span><span class="w">           </span><span class="k">NULL</span><span class="w"> </span><span class="o">|</span><span class="w">        </span><span class="mi">108</span><span class="w"> </span><span class="o">|</span><span class="w">           </span><span class="mi">100</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="mi">2000</span><span class="o">-</span><span class="mi">09</span><span class="o">-</span><span class="mi">09</span><span class="w"> </span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w">         </span><span class="mi">205</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">Shelley</span><span class="w">     </span><span class="o">|</span><span class="w"> </span><span class="n">Higgins</span><span class="w">   </span><span class="o">|</span><span class="w"> </span><span class="n">SHIGGINS</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="mi">515</span><span class="p">.</span><span class="mi">123</span><span class="p">.</span><span class="mi">8080</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">AC_MGR</span><span class="w">     </span><span class="o">|</span><span class="w"> </span><span class="mi">12000</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="o">|</span><span class="w">           </span><span class="k">NULL</span><span class="w"> </span><span class="o">|</span><span class="w">        </span><span class="mi">101</span><span class="w"> </span><span class="o">|</span><span class="w">           </span><span class="mi">110</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="mi">2016</span><span class="o">-</span><span class="mi">03</span><span class="o">-</span><span class="mi">03</span><span class="w"> </span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w">         </span><span class="mi">206</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">William</span><span class="w">     </span><span class="o">|</span><span class="w"> </span><span class="n">Gietz</span><span class="w">     </span><span class="o">|</span><span class="w"> </span><span class="n">WGIETZ</span><span class="w">   </span><span class="o">|</span><span class="w"> </span><span class="mi">515</span><span class="p">.</span><span class="mi">123</span><span class="p">.</span><span class="mi">8181</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">AC_ACCOUNT</span><span class="w"> </span><span class="o">|</span><span class="w">  </span><span class="mi">8300</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="o">|</span><span class="w">           </span><span class="k">NULL</span><span class="w"> </span><span class="o">|</span><span class="w">        </span><span class="mi">205</span><span class="w"> </span><span class="o">|</span><span class="w">           </span><span class="mi">110</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="mi">2016</span><span class="o">-</span><span class="mi">03</span><span class="o">-</span><span class="mi">03</span><span class="w"> </span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">-------------+-------------+-----------+----------+--------------+------------+----------+----------------+------------+---------------+---------------------+
</span><span class="c1"></span><span class="mi">8</span><span class="w"> </span><span class="k">rows</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="k">set</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span><span class="w">
</span></code></pre></div><h5 id="is-null-和-的区别">is null 和&lt;=&gt; 的区别</h5>
<p>is null 只会判断null</p>
<p>&lt;=&gt; 不仅判断null 还可以普通类型的数值</p>
<h5 id="排序查询">排序查询</h5>
<p>select 查询列表 from 表 where 筛选条件 order by 排序列表 asc|desc</p>
<p>默认是asc 升序</p>
<p>支持单个字段/多个字段/表达式/函数/别名</p>
<p>order by 一般是放在查询语句的最后面 limit子句除外</p>
<ul>
<li>按表达式排序</li>
<li>按字段排序</li>
<li>按别名排序</li>
<li>按函数排序</li>
<li>按多字段排序</li>
</ul>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="k">select</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">employees</span><span class="w"> </span><span class="k">order</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="n">salary</span><span class="w"> </span><span class="k">desc</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="k">select</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">employees</span><span class="w"> </span><span class="k">order</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="n">salary</span><span class="w"> </span><span class="k">asc</span><span class="w"> </span><span class="p">;</span><span class="w"> 
</span><span class="w"></span><span class="o">#</span><span class="err">默认升序</span><span class="w"> </span><span class="k">asc</span><span class="w">
</span><span class="w"></span><span class="k">select</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">employees</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="n">department_id</span><span class="w"> </span><span class="o">&gt;=</span><span class="mi">90</span><span class="w"> </span><span class="k">order</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="n">hiredate</span><span class="w"> </span><span class="k">desc</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="o">#</span><span class="w"> </span><span class="o">*</span><span class="err">必须放在前面</span><span class="w"> </span><span class="err">可以按照表达式排序</span><span class="w"> </span><span class="err">也可以按照别名排序</span><span class="w">
</span><span class="w"></span><span class="k">select</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="p">,</span><span class="w"> </span><span class="n">salary</span><span class="o">*</span><span class="mi">12</span><span class="o">*</span><span class="p">(</span><span class="mi">1</span><span class="o">+</span><span class="n">ifnull</span><span class="p">(</span><span class="n">commission_pct</span><span class="p">,</span><span class="mi">0</span><span class="p">))</span><span class="k">as</span><span class="w"> </span><span class="err">年薪</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">employees</span><span class="w"> </span><span class="k">order</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="err">年薪</span><span class="w"> </span><span class="k">desc</span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="o">#</span><span class="w"> </span><span class="err">按照函数排序</span><span class="w">
</span><span class="w"></span><span class="k">select</span><span class="w"> </span><span class="n">last_name</span><span class="w"> </span><span class="p">,</span><span class="w"> </span><span class="n">salary</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">employees</span><span class="w"> </span><span class="k">order</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="k">length</span><span class="p">(</span><span class="n">last_name</span><span class="p">)</span><span class="w"> </span><span class="k">desc</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="o">#</span><span class="err">双重排序</span><span class="w"> </span><span class="err">先按照工资升序排</span><span class="w"> </span><span class="p">,</span><span class="w"> </span><span class="err">再按照员工编号降序排</span><span class="w">
</span><span class="w"></span><span class="k">select</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">employees</span><span class="w"> </span><span class="k">order</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="n">salary</span><span class="w"> </span><span class="k">asc</span><span class="w"> </span><span class="p">,</span><span class="w"> </span><span class="n">employee_id</span><span class="w"> </span><span class="k">desc</span><span class="w"> </span><span class="p">;</span><span class="w">
</span></code></pre></div><p>练习</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="k">select</span><span class="w"> </span><span class="n">last_name</span><span class="w"> </span><span class="p">,</span><span class="w"> </span><span class="n">department_id</span><span class="w"> </span><span class="p">,</span><span class="w"> </span><span class="n">salary</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="mi">12</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="p">(</span><span class="mi">1</span><span class="o">+</span><span class="n">ifnull</span><span class="p">(</span><span class="n">commission_pct</span><span class="p">,</span><span class="mi">0</span><span class="p">))</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="err">年薪</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">employees</span><span class="w"> </span><span class="k">order</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="err">年薪</span><span class="w"> </span><span class="k">desc</span><span class="w"> </span><span class="p">,</span><span class="w"> </span><span class="k">length</span><span class="p">(</span><span class="n">last_name</span><span class="p">)</span><span class="w"> </span><span class="k">asc</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="o">#</span><span class="err">以下用法</span><span class="w"> </span><span class="err">错误</span><span class="w"> </span><span class="k">between</span><span class="w"> </span><span class="k">and</span><span class="w"> </span><span class="err">不能</span><span class="w"> </span><span class="err">按照</span><span class="w"> </span><span class="err">别名来</span><span class="w"> 
</span><span class="w"></span><span class="k">select</span><span class="w"> </span><span class="n">last_name</span><span class="w"> </span><span class="p">,</span><span class="w"> </span><span class="n">salary</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="err">工资</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">employees</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="k">not</span><span class="p">(</span><span class="err">工资</span><span class="w"> </span><span class="k">between</span><span class="w"> </span><span class="mi">8000</span><span class="w"> </span><span class="k">and</span><span class="w"> </span><span class="mi">17000</span><span class="p">)</span><span class="w"> </span><span class="k">order</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="err">工资</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="o">#</span><span class="err">以下用法</span><span class="w"> </span><span class="err">正确</span><span class="w">
</span><span class="w"></span><span class="k">select</span><span class="w"> </span><span class="n">last_name</span><span class="w"> </span><span class="p">,</span><span class="w"> </span><span class="n">salary</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="err">工资</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">employees</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="k">not</span><span class="p">(</span><span class="n">salary</span><span class="w"> </span><span class="k">between</span><span class="w"> </span><span class="mi">8000</span><span class="w"> </span><span class="k">and</span><span class="w"> </span><span class="mi">17000</span><span class="p">)</span><span class="w"> </span><span class="k">order</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="err">工资</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="o">#</span><span class="err">可以这样</span><span class="w"> </span><span class="err">直接</span><span class="w"> </span><span class="k">not</span><span class="w"> </span><span class="k">between</span><span class="w"> </span><span class="k">and</span><span class="w"> 
</span><span class="w"></span><span class="k">select</span><span class="w"> </span><span class="n">last_name</span><span class="w"> </span><span class="p">,</span><span class="w"> </span><span class="n">salary</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="err">工资</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">employees</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="n">salary</span><span class="w"> </span><span class="k">not</span><span class="w"> </span><span class="k">between</span><span class="w"> </span><span class="mi">8000</span><span class="w"> </span><span class="k">and</span><span class="w"> </span><span class="mi">17000</span><span class="w"> </span><span class="k">order</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="err">工资</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="k">select</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">employees</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="n">email</span><span class="w"> </span><span class="k">like</span><span class="w"> </span><span class="s1">&#39;%e%&#39;</span><span class="w"> </span><span class="k">order</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="k">length</span><span class="p">(</span><span class="n">email</span><span class="p">)</span><span class="w"> </span><span class="k">desc</span><span class="w"> </span><span class="p">,</span><span class="w"> </span><span class="n">department_id</span><span class="w"> </span><span class="p">;</span><span class="w">
</span></code></pre></div><h5 id="常见函数">常见函数</h5>
<p>功能:类似于java中的方法,将一组逻辑语句封装在方法体中,对外暴露方法名</p>
<p>好处:1.隐藏了实现细节 2.提高代码的重用性</p>
<p>调用: select 函数名(实参列表)  [from 表] ;</p>
<p>特点:</p>
<ul>
<li>叫什么 函数名</li>
<li>干什么 函数功能</li>
</ul>
<p>分类：</p>
<ul>
<li>单行函数
<ul>
<li>字符函数 length concat substr substring replace lpad rpad upper lower instr trim</li>
<li>数学函数 mod floor round ceil  truncate</li>
<li>日期函数 now curdate curtime year month monthname day hour minute second date_format str_to_date</li>
<li>其他函数</li>
<li>流程控制函数</li>
<li>concat / length / ifnull 等</li>
</ul>
</li>
<li>分组函数
<ul>
<li>做统计使用 又称为统计函数、聚合函数、组函数</li>
</ul>
</li>
</ul>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="o">#</span><span class="err">查看字节长度</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="k">length</span><span class="p">(</span><span class="s1">&#39;lalala&#39;</span><span class="p">)</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">------------------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="k">length</span><span class="p">(</span><span class="s1">&#39;lalala&#39;</span><span class="p">)</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">------------------+
</span><span class="c1"></span><span class="o">|</span><span class="w">                </span><span class="mi">6</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">------------------+
</span><span class="c1"></span><span class="mi">1</span><span class="w"> </span><span class="k">row</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="k">set</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="o">#</span><span class="err">查看字节长度</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="k">length</span><span class="w"> </span><span class="p">(</span><span class="s1">&#39;林健树&#39;</span><span class="p">)</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">-------------------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="k">length</span><span class="w"> </span><span class="p">(</span><span class="s1">&#39;林健树&#39;</span><span class="p">)</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">-------------------+
</span><span class="c1"></span><span class="o">|</span><span class="w">                 </span><span class="mi">6</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">-------------------+
</span><span class="c1"></span><span class="mi">1</span><span class="w"> </span><span class="k">row</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="k">set</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="o">#</span><span class="err">展示字符集</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">show</span><span class="w"> </span><span class="n">variables</span><span class="w"> </span><span class="k">like</span><span class="w"> </span><span class="s1">&#39;%char%&#39;</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">--------------------------+---------------------------------------------------------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="n">Variable_name</span><span class="w">            </span><span class="o">|</span><span class="w"> </span><span class="n">Value</span><span class="w">                                                   </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">--------------------------+---------------------------------------------------------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="n">character_set_client</span><span class="w">     </span><span class="o">|</span><span class="w"> </span><span class="n">gbk</span><span class="w">                                                     </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w"> </span><span class="n">character_set_connection</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">gbk</span><span class="w">                                                     </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w"> </span><span class="n">character_set_database</span><span class="w">   </span><span class="o">|</span><span class="w"> </span><span class="n">utf8mb4</span><span class="w">                                                 </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w"> </span><span class="n">character_set_filesystem</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="nb">binary</span><span class="w">                                                  </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w"> </span><span class="n">character_set_results</span><span class="w">    </span><span class="o">|</span><span class="w"> </span><span class="n">gbk</span><span class="w">                                                     </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w"> </span><span class="n">character_set_server</span><span class="w">     </span><span class="o">|</span><span class="w"> </span><span class="n">utf8mb4</span><span class="w">                                                 </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w"> </span><span class="n">character_set_system</span><span class="w">     </span><span class="o">|</span><span class="w"> </span><span class="n">utf8mb3</span><span class="w">                                                 </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w"> </span><span class="n">character_sets_dir</span><span class="w">       </span><span class="o">|</span><span class="w"> </span><span class="k">C</span><span class="p">:</span><span class="err">\</span><span class="n">Program</span><span class="w"> </span><span class="n">Files</span><span class="err">\</span><span class="n">MySQL</span><span class="err">\</span><span class="n">MySQL</span><span class="w"> </span><span class="n">Server</span><span class="w"> </span><span class="mi">8</span><span class="p">.</span><span class="mi">0</span><span class="err">\</span><span class="k">share</span><span class="err">\</span><span class="n">charsets</span><span class="err">\</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">--------------------------+---------------------------------------------------------+
</span><span class="c1"></span><span class="w">
</span><span class="w"></span><span class="o">#</span><span class="err">拼接字符</span><span class="w">
</span><span class="w"></span><span class="k">select</span><span class="w"> </span><span class="n">concat</span><span class="p">(</span><span class="n">last_name</span><span class="w"> </span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;_&#39;</span><span class="w"> </span><span class="p">,</span><span class="w"> </span><span class="n">first_name</span><span class="w"> </span><span class="p">)</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">employees</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"> 
</span><span class="w"></span><span class="o">#</span><span class="w"> </span><span class="k">upper</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="k">lower</span><span class="w"> 
</span><span class="w"></span><span class="k">select</span><span class="w"> </span><span class="k">upper</span><span class="p">(</span><span class="s1">&#39;aaabbbccc&#39;</span><span class="p">)</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="k">select</span><span class="w"> </span><span class="k">lower</span><span class="p">(</span><span class="s1">&#39;aBc&#39;</span><span class="p">)</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="o">#</span><span class="err">函数嵌套</span><span class="w">
</span><span class="w"></span><span class="k">select</span><span class="w"> </span><span class="n">concat</span><span class="p">(</span><span class="k">lower</span><span class="p">(</span><span class="n">last_name</span><span class="p">),</span><span class="s1">&#39;_&#39;</span><span class="p">,</span><span class="k">upper</span><span class="p">(</span><span class="n">first_name</span><span class="p">))</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">employees</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="o">#</span><span class="n">substr</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="k">substring</span><span class="w">
</span><span class="w"></span><span class="o">#</span><span class="n">sql中索引从1开始</span><span class="w">
</span><span class="w"> </span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="k">substring</span><span class="p">(</span><span class="s1">&#39;李莫愁爱上了陆展元&#39;</span><span class="p">,</span><span class="mi">7</span><span class="p">)</span><span class="w"> </span><span class="n">out_put</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">---------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="n">out_put</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">---------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="err">陆展元</span><span class="w">  </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">---------+
</span><span class="c1"></span><span class="mi">1</span><span class="w"> </span><span class="k">row</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="k">set</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span><span class="w">
</span><span class="w"></span><span class="o">#</span><span class="err">函数的重载</span><span class="w"> </span><span class="err">从指定索引出指定字符长度的字符</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="k">SUBSTRING</span><span class="p">(</span><span class="s1">&#39;李莫愁爱上了陆展元&#39;</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">3</span><span class="p">)</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">-------------------------------------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="k">SUBSTRING</span><span class="p">(</span><span class="s1">&#39;李莫愁爱上了陆展元&#39;</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">3</span><span class="p">)</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">-------------------------------------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="err">李莫愁</span><span class="w">                              </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">-------------------------------------+
</span><span class="c1"></span><span class="mi">1</span><span class="w"> </span><span class="k">row</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="k">set</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="k">select</span><span class="w"> </span><span class="n">concat</span><span class="p">(</span><span class="n">concat</span><span class="p">(</span><span class="k">upper</span><span class="p">(</span><span class="k">substring</span><span class="p">(</span><span class="n">first_name</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">)),</span><span class="n">substr</span><span class="p">(</span><span class="n">first_name</span><span class="p">,</span><span class="mi">2</span><span class="p">)),</span><span class="s1">&#39;_&#39;</span><span class="p">,</span><span class="n">last_name</span><span class="p">)</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">employees</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="o">#</span><span class="n">instr</span><span class="w"> </span><span class="err">判断是否在字符串中</span><span class="w"> 
</span><span class="w"></span><span class="o">#</span><span class="err">返回的是第一次出现的索引</span><span class="w"> </span><span class="err">索引仍然从</span><span class="mi">1</span><span class="err">开始</span><span class="w"> </span><span class="p">,</span><span class="w"> </span><span class="err">如果找不到返回</span><span class="mi">0</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="n">instr</span><span class="p">(</span><span class="s1">&#39;杨不悔爱上了尹柳霞&#39;</span><span class="p">,</span><span class="s1">&#39;尹柳霞&#39;</span><span class="p">)</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">--------------------------------------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="n">instr</span><span class="p">(</span><span class="s1">&#39;杨不悔爱上了尹柳霞&#39;</span><span class="p">,</span><span class="s1">&#39;尹柳霞&#39;</span><span class="p">)</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">--------------------------------------+
</span><span class="c1"></span><span class="o">|</span><span class="w">                                    </span><span class="mi">7</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">--------------------------------------+
</span><span class="c1"></span><span class="mi">1</span><span class="w"> </span><span class="k">row</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="k">set</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="n">instr</span><span class="p">(</span><span class="s1">&#39;杨不悔尹柳霞爱上了尹柳霞&#39;</span><span class="p">,</span><span class="s1">&#39;尹柳霞&#39;</span><span class="p">)</span><span class="w"> </span><span class="n">out_put</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">---------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="n">out_put</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">---------+
</span><span class="c1"></span><span class="o">|</span><span class="w">       </span><span class="mi">4</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">---------+
</span><span class="c1"></span><span class="mi">1</span><span class="w"> </span><span class="k">row</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="k">set</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="o">#</span><span class="k">trim</span><span class="w"> </span><span class="err">去空格</span><span class="w"> 
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w">  </span><span class="k">select</span><span class="w"> </span><span class="k">length</span><span class="p">(</span><span class="s1">&#39;   张翠山   &#39;</span><span class="p">)</span><span class="w"> </span><span class="p">,</span><span class="w"> </span><span class="k">length</span><span class="w"> </span><span class="p">(</span><span class="k">trim</span><span class="p">(</span><span class="s1">&#39;    张翠山   &#39;</span><span class="p">))</span><span class="w">  </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">------------------------+--------------------------------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="k">length</span><span class="p">(</span><span class="s1">&#39;   张翠山   &#39;</span><span class="p">)</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="k">length</span><span class="w"> </span><span class="p">(</span><span class="k">trim</span><span class="p">(</span><span class="s1">&#39;    张翠山   &#39;</span><span class="p">))</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">------------------------+--------------------------------+
</span><span class="c1"></span><span class="o">|</span><span class="w">                     </span><span class="mi">12</span><span class="w"> </span><span class="o">|</span><span class="w">                              </span><span class="mi">6</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">------------------------+--------------------------------+
</span><span class="c1"></span><span class="mi">1</span><span class="w"> </span><span class="k">row</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="k">set</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="o">#</span><span class="k">trim</span><span class="w"> </span><span class="err">可以去掉指定的字符或者字符串</span><span class="w"> </span><span class="err">中间不会去掉的</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="k">trim</span><span class="p">(</span><span class="s1">&#39;a&#39;</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="s1">&#39;aabbaaccaa&#39;</span><span class="p">)</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">out_put</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">---------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="n">out_put</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">---------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="n">bbaacc</span><span class="w">  </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">---------+
</span><span class="c1"></span><span class="mi">1</span><span class="w"> </span><span class="k">row</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="k">set</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="o">#</span><span class="k">trim</span><span class="w"> </span><span class="err">只是按照单位去去的</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="k">trim</span><span class="p">(</span><span class="s1">&#39;aa&#39;</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="s1">&#39;aaabbaaccaaa&#39;</span><span class="p">)</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">out_put</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">----------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="n">out_put</span><span class="w">  </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">----------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="n">abbaacca</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">----------+
</span><span class="c1"></span><span class="mi">1</span><span class="w"> </span><span class="k">row</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="k">set</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="o">#</span><span class="n">lpad</span><span class="w"> </span><span class="err">用指定的字符来实现左填充指定长度</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="n">lpad</span><span class="p">(</span><span class="s1">&#39;殷素素&#39;</span><span class="p">,</span><span class="mi">10</span><span class="p">,</span><span class="s1">&#39;*&#39;</span><span class="p">)</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">-----------------------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="n">lpad</span><span class="p">(</span><span class="s1">&#39;殷素素&#39;</span><span class="p">,</span><span class="mi">10</span><span class="p">,</span><span class="s1">&#39;*&#39;</span><span class="p">)</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">-----------------------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="o">*******</span><span class="err">殷素素</span><span class="w">         </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">-----------------------+
</span><span class="c1"></span><span class="mi">1</span><span class="w"> </span><span class="k">row</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="k">set</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="n">lpad</span><span class="p">(</span><span class="s1">&#39;97&#39;</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="s1">&#39;0&#39;</span><span class="p">)</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">------------------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="n">lpad</span><span class="p">(</span><span class="s1">&#39;97&#39;</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="s1">&#39;0&#39;</span><span class="p">)</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">------------------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="mi">097</span><span class="w">              </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">------------------+
</span><span class="c1"></span><span class="mi">1</span><span class="w"> </span><span class="k">row</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="k">set</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="o">#</span><span class="n">lpad</span><span class="w"> </span><span class="err">如果长度超过了</span><span class="w"> </span><span class="err">反而会发生截断</span><span class="w"> </span><span class="err">从左边开始向右边截断</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="n">lpad</span><span class="p">(</span><span class="s1">&#39;101&#39;</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="s1">&#39;0&#39;</span><span class="p">)</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">-------------------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="n">lpad</span><span class="p">(</span><span class="s1">&#39;101&#39;</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="s1">&#39;0&#39;</span><span class="p">)</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">-------------------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="mi">10</span><span class="w">                </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">-------------------+
</span><span class="c1"></span><span class="mi">1</span><span class="w"> </span><span class="k">row</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="k">set</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="o">#</span><span class="n">Rpad同理</span><span class="w">
</span><span class="w"></span><span class="o">#</span><span class="n">replace替换</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="k">replace</span><span class="p">(</span><span class="s1">&#39;张无忌爱上了周芷若&#39;</span><span class="p">,</span><span class="s1">&#39;周芷若&#39;</span><span class="p">,</span><span class="s1">&#39;赵敏&#39;</span><span class="p">)</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">out_put</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">------------------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="n">out_put</span><span class="w">          </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">------------------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="err">张无忌爱上了赵敏</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">------------------+
</span><span class="c1"></span><span class="mi">1</span><span class="w"> </span><span class="k">row</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="k">set</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="o">#</span><span class="k">replace</span><span class="w"> </span><span class="err">凡是有的全部替换喔</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="k">replace</span><span class="p">(</span><span class="s1">&#39;周芷若张无忌爱上了周芷若&#39;</span><span class="p">,</span><span class="s1">&#39;周芷若&#39;</span><span class="p">,</span><span class="s1">&#39;赵敏&#39;</span><span class="p">)</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">out_put</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">----------------------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="n">out_put</span><span class="w">              </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">----------------------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="err">赵敏张无忌爱上了赵敏</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">----------------------+
</span><span class="c1"></span><span class="mi">1</span><span class="w"> </span><span class="k">row</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="k">set</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span><span class="w">
</span></code></pre></div><h5 id="数学函数">数学函数</h5>
<p>round 四舍五入</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="o">#</span><span class="n">round</span><span class="w"> </span><span class="err">四舍五入</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="n">round</span><span class="p">(</span><span class="mi">4</span><span class="p">.</span><span class="mi">65</span><span class="p">)</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">-------------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="n">round</span><span class="p">(</span><span class="mi">4</span><span class="p">.</span><span class="mi">65</span><span class="p">)</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">-------------+
</span><span class="c1"></span><span class="o">|</span><span class="w">           </span><span class="mi">5</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">-------------+
</span><span class="c1"></span><span class="mi">1</span><span class="w"> </span><span class="k">row</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="k">set</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="o">#</span><span class="n">round</span><span class="w"> </span><span class="err">两个参数时</span><span class="p">,</span><span class="err">后面的参数是值按小数点后几位来四舍五入</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="n">round</span><span class="p">(</span><span class="mi">4</span><span class="p">.</span><span class="mi">65</span><span class="p">,</span><span class="mi">1</span><span class="p">)</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">---------------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="n">round</span><span class="p">(</span><span class="mi">4</span><span class="p">.</span><span class="mi">65</span><span class="p">,</span><span class="mi">1</span><span class="p">)</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">---------------+
</span><span class="c1"></span><span class="o">|</span><span class="w">           </span><span class="mi">4</span><span class="p">.</span><span class="mi">7</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">---------------+
</span><span class="c1"></span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="n">round</span><span class="p">(</span><span class="mi">4</span><span class="p">.</span><span class="mi">65</span><span class="p">,</span><span class="mi">0</span><span class="p">)</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">---------------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="n">round</span><span class="p">(</span><span class="mi">4</span><span class="p">.</span><span class="mi">65</span><span class="p">,</span><span class="mi">0</span><span class="p">)</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">---------------+
</span><span class="c1"></span><span class="o">|</span><span class="w">             </span><span class="mi">5</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">---------------+
</span><span class="c1"></span><span class="mi">1</span><span class="w"> </span><span class="k">row</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="k">set</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="o">#</span><span class="n">ceil</span><span class="w"> </span><span class="err">向上取整</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="n">ceil</span><span class="p">(</span><span class="mi">1</span><span class="p">.</span><span class="mi">001</span><span class="p">)</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">-------------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="n">ceil</span><span class="p">(</span><span class="mi">1</span><span class="p">.</span><span class="mi">001</span><span class="p">)</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">-------------+
</span><span class="c1"></span><span class="o">|</span><span class="w">           </span><span class="mi">2</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">-------------+
</span><span class="c1"></span><span class="mi">1</span><span class="w"> </span><span class="k">row</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="k">set</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="o">#</span><span class="n">floor</span><span class="w"> </span><span class="err">向下取整</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="n">floor</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">.</span><span class="mi">01</span><span class="p">)</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">--------------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="n">floor</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">.</span><span class="mi">01</span><span class="p">)</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">--------------+
</span><span class="c1"></span><span class="o">|</span><span class="w">           </span><span class="o">-</span><span class="mi">2</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">--------------+
</span><span class="c1"></span><span class="mi">1</span><span class="w"> </span><span class="k">row</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="k">set</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span><span class="w">
</span><span class="w"> 
</span><span class="w"></span><span class="o">#</span><span class="k">truncate</span><span class="w"> </span><span class="err">截断</span><span class="w"> </span><span class="err">保留小数点后几位</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="k">truncate</span><span class="p">(</span><span class="mi">1</span><span class="p">.</span><span class="mi">6999</span><span class="p">,</span><span class="mi">2</span><span class="p">)</span><span class="w">  </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">--------------------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="k">truncate</span><span class="p">(</span><span class="mi">1</span><span class="p">.</span><span class="mi">6999</span><span class="p">,</span><span class="mi">2</span><span class="p">)</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">--------------------+
</span><span class="c1"></span><span class="o">|</span><span class="w">               </span><span class="mi">1</span><span class="p">.</span><span class="mi">69</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">--------------------+
</span><span class="c1"></span><span class="mi">1</span><span class="w"> </span><span class="k">row</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="k">set</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="o">#</span><span class="k">mod</span><span class="w"> </span><span class="err">取余运算</span><span class="w"> </span><span class="n">a</span><span class="o">-</span><span class="n">a</span><span class="o">/</span><span class="n">b</span><span class="o">*</span><span class="n">b</span><span class="w"> </span><span class="n">a</span><span class="o">/</span><span class="n">b会发生截断的可能</span><span class="w"> </span><span class="err">所以这个等式没毛病</span><span class="w">
</span><span class="w"></span><span class="o">#</span><span class="w"> </span><span class="o">-</span><span class="mi">10</span><span class="w"> </span><span class="k">mod</span><span class="w"> </span><span class="o">-</span><span class="mi">3</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">-</span><span class="mi">1</span><span class="w">  </span><span class="o">-</span><span class="mi">10</span><span class="w"> </span><span class="k">mod</span><span class="w"> </span><span class="mi">3</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">-</span><span class="mi">1</span><span class="w"> </span><span class="mi">10</span><span class="w"> </span><span class="k">mod</span><span class="w"> </span><span class="o">-</span><span class="mi">3</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="err">只要被除数是</span><span class="o">-</span><span class="w"> </span><span class="err">就是</span><span class="o">-</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="k">mod</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span><span class="o">-</span><span class="mi">3</span><span class="p">)</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">------------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="k">mod</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span><span class="o">-</span><span class="mi">3</span><span class="p">)</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">------------+
</span><span class="c1"></span><span class="o">|</span><span class="w">          </span><span class="mi">1</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">------------+
</span><span class="c1"></span><span class="mi">1</span><span class="w"> </span><span class="k">row</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="k">set</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span><span class="w">
</span></code></pre></div><h5 id="日期函数">日期函数</h5>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="o">#</span><span class="w"> </span><span class="n">now</span><span class="w"> </span><span class="err">返回当前系统日期</span><span class="w"> </span><span class="err">包含时间</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="n">now</span><span class="p">()</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">---------------------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="n">now</span><span class="p">()</span><span class="w">               </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">---------------------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="mi">2021</span><span class="o">-</span><span class="mi">09</span><span class="o">-</span><span class="mi">20</span><span class="w"> </span><span class="mi">16</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">28</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">---------------------+
</span><span class="c1"></span><span class="mi">1</span><span class="w"> </span><span class="k">row</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="k">set</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="o">#</span><span class="w"> </span><span class="n">curdate</span><span class="w"> </span><span class="err">返回当前日期</span><span class="w"> </span><span class="err">不包含时间</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="n">curdate</span><span class="p">()</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">------------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="n">curdate</span><span class="p">()</span><span class="w">  </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">------------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="mi">2021</span><span class="o">-</span><span class="mi">09</span><span class="o">-</span><span class="mi">20</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">------------+
</span><span class="c1"></span><span class="mi">1</span><span class="w"> </span><span class="k">row</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="k">set</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span><span class="w">
</span><span class="w"></span><span class="o">#</span><span class="w"> </span><span class="n">curtime</span><span class="w"> </span><span class="err">返回当前时间</span><span class="w"> </span><span class="err">不包含日期</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="n">curtime</span><span class="p">()</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">-----------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="n">curtime</span><span class="p">()</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">-----------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="mi">16</span><span class="p">:</span><span class="mi">01</span><span class="p">:</span><span class="mi">21</span><span class="w">  </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">-----------+
</span><span class="c1"></span><span class="mi">1</span><span class="w"> </span><span class="k">row</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="k">set</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="o">#</span><span class="err">获取指定的部分</span><span class="w"> </span><span class="p">,</span><span class="w"> </span><span class="err">年</span><span class="w"> </span><span class="err">月</span><span class="w"> </span><span class="err">日</span><span class="w"> </span><span class="err">时</span><span class="w"> </span><span class="err">分</span><span class="w"> </span><span class="err">秒</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="k">year</span><span class="p">(</span><span class="n">now</span><span class="p">())</span><span class="w"> </span><span class="err">年</span><span class="w"> </span><span class="p">,</span><span class="w"> </span><span class="k">month</span><span class="w"> </span><span class="p">(</span><span class="s1">&#39;1998-1-1&#39;</span><span class="p">)</span><span class="w"> </span><span class="err">月</span><span class="p">,</span><span class="w"> </span><span class="k">day</span><span class="p">(</span><span class="n">curdate</span><span class="p">())</span><span class="err">日</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">------+------+------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="err">年</span><span class="w">   </span><span class="o">|</span><span class="w"> </span><span class="err">月</span><span class="w">   </span><span class="o">|</span><span class="w"> </span><span class="err">日</span><span class="w">   </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">------+------+------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="mi">2021</span><span class="w"> </span><span class="o">|</span><span class="w">    </span><span class="mi">1</span><span class="w"> </span><span class="o">|</span><span class="w">   </span><span class="mi">20</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">------+------+------+
</span><span class="c1"></span><span class="mi">1</span><span class="w"> </span><span class="k">row</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="k">set</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="o">#</span><span class="w"> </span><span class="err">获取月份的英文</span><span class="w"> 
</span><span class="w"> </span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="n">monthname</span><span class="p">(</span><span class="n">hiredate</span><span class="p">)</span><span class="w"> </span><span class="err">月份英文</span><span class="p">,</span><span class="w"> </span><span class="k">year</span><span class="p">(</span><span class="n">hiredate</span><span class="p">)</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">employees</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">-----------+----------------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="err">月份英文</span><span class="w">  </span><span class="o">|</span><span class="w"> </span><span class="k">year</span><span class="p">(</span><span class="n">hiredate</span><span class="p">)</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">-----------+----------------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="n">April</span><span class="w">     </span><span class="o">|</span><span class="w">           </span><span class="mi">1992</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w"> </span><span class="n">April</span><span class="w">     </span><span class="o">|</span><span class="w">           </span><span class="mi">1992</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="o">#</span><span class="w"> </span><span class="err">日期转换函数</span><span class="w"> </span><span class="n">str_to_date</span><span class="p">()</span><span class="w"> </span><span class="n">date_format</span><span class="p">()</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="n">str_to_date</span><span class="w"> </span><span class="p">(</span><span class="s1">&#39;9--10--2021&#39;</span><span class="p">,</span><span class="s1">&#39;%m--%d--%Y&#39;</span><span class="p">)</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">out_put</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">------------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="n">out_put</span><span class="w">    </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">------------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="mi">2021</span><span class="o">-</span><span class="mi">09</span><span class="o">-</span><span class="mi">10</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">------------+
</span><span class="c1"></span><span class="mi">1</span><span class="w"> </span><span class="k">row</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="k">set</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="n">date_format</span><span class="p">(</span><span class="s1">&#39;2021-09-20&#39;</span><span class="p">,</span><span class="s1">&#39;%y年%m月%d日&#39;</span><span class="p">)</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">out_put</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">--------------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="n">out_put</span><span class="w">      </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">--------------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="mi">21</span><span class="err">年</span><span class="mi">09</span><span class="err">月</span><span class="mi">20</span><span class="err">日</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">--------------+
</span><span class="c1"></span><span class="mi">1</span><span class="w"> </span><span class="k">row</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="k">set</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span><span class="w">
</span><span class="w"> 
</span><span class="w"></span><span class="o">#</span><span class="w"> </span><span class="err">前端传进来的是字符串</span><span class="w"> </span><span class="err">而且格式不一</span><span class="w"> </span><span class="err">我们要使用函数来将字符串做处理</span><span class="w"> </span><span class="err">解析成想要的格式</span><span class="w"> </span><span class="err">然后再到数据库中查找</span><span class="w"> 
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="n">hiredate</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">employees</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="n">hiredate</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">str_to_date</span><span class="p">(</span><span class="s1">&#39;4-3 1992&#39;</span><span class="p">,</span><span class="s1">&#39;%c-%d %Y&#39;</span><span class="p">)</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">---------------------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="n">hiredate</span><span class="w">            </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">---------------------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="mi">1992</span><span class="o">-</span><span class="mi">04</span><span class="o">-</span><span class="mi">03</span><span class="w"> </span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w"> </span><span class="mi">1992</span><span class="o">-</span><span class="mi">04</span><span class="o">-</span><span class="mi">03</span><span class="w"> </span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w"> </span><span class="mi">1992</span><span class="o">-</span><span class="mi">04</span><span class="o">-</span><span class="mi">03</span><span class="w"> </span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w"> </span><span class="mi">1992</span><span class="o">-</span><span class="mi">04</span><span class="o">-</span><span class="mi">03</span><span class="w"> </span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w"> </span><span class="mi">1992</span><span class="o">-</span><span class="mi">04</span><span class="o">-</span><span class="mi">03</span><span class="w"> </span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">---------------------+
</span><span class="c1"></span><span class="mi">5</span><span class="w"> </span><span class="k">rows</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="k">set</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="o">#</span><span class="err">数据库这边也需要做好相应的处理</span><span class="w"> </span><span class="err">将日期处理成对应格式字符串然后返回回去</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="n">last_name</span><span class="w"> </span><span class="p">,</span><span class="n">date_format</span><span class="p">(</span><span class="n">hiredate</span><span class="p">,</span><span class="s1">&#39;%m月/%d日 %y年&#39;</span><span class="p">)</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="err">入职日期</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">employees</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="n">commission_pct</span><span class="w"> </span><span class="o">&lt;=&gt;</span><span class="w"> </span><span class="k">null</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">-------------+----------------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="n">last_name</span><span class="w">   </span><span class="o">|</span><span class="w"> </span><span class="err">入职日期</span><span class="w">       </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">-------------+----------------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="n">K_ing</span><span class="w">       </span><span class="o">|</span><span class="w"> </span><span class="mi">04</span><span class="err">月</span><span class="o">/</span><span class="mi">03</span><span class="err">日</span><span class="w"> </span><span class="mi">92</span><span class="err">年</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w"> </span><span class="n">Kochhar</span><span class="w">     </span><span class="o">|</span><span class="w"> </span><span class="mi">04</span><span class="err">月</span><span class="o">/</span><span class="mi">03</span><span class="err">日</span><span class="w"> </span><span class="mi">92</span><span class="err">年</span><span class="w"> </span><span class="o">|</span><span class="w">
</span></code></pre></div><p><figure 
	>
	<a href="/C:%5cUsers%5cAdministrator.YOURTREEDAD%5cAppData%5cRoaming%5cTypora%5ctypora-user-images%5cimage-20210920161042293.png" >
		<img src="/C:%5cUsers%5cAdministrator.YOURTREEDAD%5cAppData%5cRoaming%5cTypora%5ctypora-user-images%5cimage-20210920161042293.png"
			
			
			
			loading="lazy"
			alt="image-20210920161042293">
	</a>
	
	<figcaption>image-20210920161042293</figcaption>
	
</figure></p>
<p><figure 
	>
	<a href="/C:%5cUsers%5cAdministrator.YOURTREEDAD%5cAppData%5cRoaming%5cTypora%5ctypora-user-images%5cimage-20210920161613677.png" >
		<img src="/C:%5cUsers%5cAdministrator.YOURTREEDAD%5cAppData%5cRoaming%5cTypora%5ctypora-user-images%5cimage-20210920161613677.png"
			
			
			
			loading="lazy"
			alt="image-20210920161613677">
	</a>
	
	<figcaption>image-20210920161613677</figcaption>
	
</figure></p>
<h5 id="其他函数">其他函数</h5>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="k">version</span><span class="p">()</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">-----------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="k">version</span><span class="p">()</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">-----------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="mi">8</span><span class="p">.</span><span class="mi">0</span><span class="p">.</span><span class="mi">24</span><span class="w">    </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">-----------+
</span><span class="c1"></span><span class="mi">1</span><span class="w"> </span><span class="k">row</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="k">set</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="k">database</span><span class="p">()</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">-------------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="k">database</span><span class="p">()</span><span class="w">  </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">-------------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="n">myemployees</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">-------------+
</span><span class="c1"></span><span class="mi">1</span><span class="w"> </span><span class="k">row</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="k">set</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="k">user</span><span class="p">()</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">----------------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="k">user</span><span class="p">()</span><span class="w">         </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">----------------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="n">root</span><span class="o">@</span><span class="n">localhost</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">----------------+
</span><span class="c1"></span><span class="mi">1</span><span class="w"> </span><span class="k">row</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="k">set</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span><span class="w">
</span></code></pre></div><h5 id="流程控制函数">流程控制函数</h5>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="o">#</span><span class="w"> </span><span class="n">IF函数</span><span class="w"> </span><span class="n">true就是第二个参数</span><span class="w"> </span><span class="n">false就是第三个参数</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="n">commission_pct</span><span class="w"> </span><span class="p">,</span><span class="w"> </span><span class="k">if</span><span class="p">(</span><span class="k">isnull</span><span class="p">(</span><span class="n">commission_pct</span><span class="p">)</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span><span class="s1">&#39;没奖金 呵呵&#39;</span><span class="p">,</span><span class="s1">&#39;有奖金 嘻嘻&#39;</span><span class="p">)</span><span class="w"> </span><span class="err">备注</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">employees</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">----------------+-------------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="n">commission_pct</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="err">备注</span><span class="w">        </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">----------------+-------------+
</span><span class="c1"></span><span class="o">|</span><span class="w">           </span><span class="k">NULL</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="err">有奖金</span><span class="w"> </span><span class="err">嘻嘻</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w">           </span><span class="k">NULL</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="err">有奖金</span><span class="w"> </span><span class="err">嘻嘻</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="o">#</span><span class="w"> </span><span class="n">mysql中默认</span><span class="w"> </span><span class="mi">0</span><span class="err">就是第三个参数</span><span class="w"> </span><span class="mi">1</span><span class="err">就是第二个参数</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="n">commission_pct</span><span class="w"> </span><span class="p">,</span><span class="w"> </span><span class="k">if</span><span class="p">(</span><span class="k">isnull</span><span class="p">(</span><span class="n">commission_pct</span><span class="p">),</span><span class="s1">&#39;没奖金 呵呵&#39;</span><span class="p">,</span><span class="s1">&#39;有奖金 嘻嘻&#39;</span><span class="p">)</span><span class="w"> </span><span class="err">备注</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">employees</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">----------------+-------------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="n">commission_pct</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="err">备注</span><span class="w">        </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">----------------+-------------+
</span><span class="c1"></span><span class="o">|</span><span class="w">           </span><span class="k">NULL</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="err">没奖金</span><span class="w"> </span><span class="err">呵呵</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w">           </span><span class="k">NULL</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="err">没奖金</span><span class="w"> </span><span class="err">呵呵</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="n">commission_pct</span><span class="w"> </span><span class="p">,</span><span class="w"> </span><span class="k">if</span><span class="p">(</span><span class="k">isnull</span><span class="p">(</span><span class="n">commission_pct</span><span class="p">),</span><span class="n">concat</span><span class="p">(</span><span class="s1">&#39;没奖金 呵呵 &#39;</span><span class="p">,</span><span class="mi">0</span><span class="p">),</span><span class="n">concat</span><span class="p">(</span><span class="s1">&#39;有奖金 嘻嘻 &#39;</span><span class="p">,</span><span class="n">commission_pct</span><span class="p">))</span><span class="w"> </span><span class="err">备注</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">employees</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">----------------+------------------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="n">commission_pct</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="err">备注</span><span class="w">             </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">----------------+------------------+
</span><span class="c1"></span><span class="o">|</span><span class="w">           </span><span class="k">NULL</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="err">没奖金</span><span class="w"> </span><span class="err">呵呵</span><span class="w"> </span><span class="mi">0</span><span class="w">    </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w">           </span><span class="k">NULL</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="err">没奖金</span><span class="w"> </span><span class="err">呵呵</span><span class="w"> </span><span class="mi">0</span><span class="w">    </span><span class="o">|</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="o">#</span><span class="k">case</span><span class="w"> </span><span class="err">函数</span><span class="w"> </span><span class="err">相当于</span><span class="w"> </span><span class="n">switch</span><span class="w"> </span><span class="n">case的效果</span><span class="w">
</span><span class="w"></span><span class="cm">/*
</span><span class="cm">	case 要判断的字段或者表达式
</span><span class="cm">	when 常量1 then 要显示的值1或语句1
</span><span class="cm">	when 常量2 then 要显示的值2或语句2
</span><span class="cm">	...
</span><span class="cm">	else 要显示的值n或语句n
</span><span class="cm">	end
</span><span class="cm">*/</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="n">salary</span><span class="w"> </span><span class="err">原始工资</span><span class="w"> </span><span class="p">,</span><span class="w"> </span><span class="n">department_id</span><span class="w"> </span><span class="err">部门</span><span class="p">,</span><span class="w"> </span><span class="k">case</span><span class="w"> </span><span class="n">department_id</span><span class="w"> </span><span class="k">when</span><span class="w"> </span><span class="mi">30</span><span class="w"> </span><span class="k">then</span><span class="w"> </span><span class="n">salary</span><span class="o">*</span><span class="mi">1</span><span class="p">.</span><span class="mi">1</span><span class="w"> </span><span class="k">when</span><span class="w"> </span><span class="mi">40</span><span class="w"> </span><span class="k">then</span><span class="w"> </span><span class="n">salary</span><span class="o">*</span><span class="mi">1</span><span class="p">.</span><span class="mi">2</span><span class="w"> </span><span class="k">when</span><span class="w"> </span><span class="mi">50</span><span class="w"> </span><span class="k">then</span><span class="w"> </span><span class="n">salary</span><span class="o">*</span><span class="mi">1</span><span class="p">.</span><span class="mi">3</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="n">salary</span><span class="w"> </span><span class="k">end</span><span class="w">  </span><span class="k">as</span><span class="w"> </span><span class="err">新工资</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">employees</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">----------+------+----------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="err">原始工资</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="err">部门</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="err">新工资</span><span class="w">   </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">----------+------+----------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="mi">24000</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="o">|</span><span class="w">   </span><span class="mi">90</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="mi">24000</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w"> </span><span class="mi">17000</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="o">|</span><span class="w">   </span><span class="mi">90</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="mi">17000</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="o">#</span><span class="k">case</span><span class="w"> </span><span class="err">多重</span><span class="n">if类似于</span><span class="w">
</span><span class="w"></span><span class="cm">/*
</span><span class="cm">	case 
</span><span class="cm">	when 条件1 then 要显示的值1或语句1
</span><span class="cm">	when 条件2 then 要显示的值2或语句2
</span><span class="cm">	...
</span><span class="cm">	else 要显示的值n或语句n
</span><span class="cm">	end
</span><span class="cm">*/</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="n">salary</span><span class="w"> </span><span class="p">,</span><span class="w">  </span><span class="k">case</span><span class="w"> </span><span class="k">when</span><span class="w"> </span><span class="n">salary</span><span class="w"> </span><span class="o">&gt;</span><span class="mi">20000</span><span class="w"> </span><span class="k">then</span><span class="w"> </span><span class="s1">&#39;A&#39;</span><span class="w"> </span><span class="k">when</span><span class="w"> </span><span class="n">salary</span><span class="w"> </span><span class="o">&gt;</span><span class="mi">15000</span><span class="w"> </span><span class="k">then</span><span class="w"> </span><span class="s1">&#39;B&#39;</span><span class="w"> </span><span class="k">when</span><span class="w"> </span><span class="n">salary</span><span class="w"> </span><span class="o">&gt;</span><span class="mi">10000</span><span class="w"> </span><span class="k">then</span><span class="w"> </span><span class="s1">&#39;C&#39;</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="s1">&#39;D&#39;</span><span class="w"> </span><span class="k">end</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="err">工资级别</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">employees</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">----------+----------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="n">salary</span><span class="w">   </span><span class="o">|</span><span class="w"> </span><span class="err">工资级别</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">----------+----------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="mi">24000</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">A</span><span class="w">        </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w"> </span><span class="mi">17000</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">B</span><span class="w">        </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w"> </span><span class="mi">17000</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">B</span><span class="w">        </span><span class="o">|</span><span class="w">
</span></code></pre></div><p>练习</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="k">select</span><span class="w"> </span><span class="n">employee_id</span><span class="w"> </span><span class="p">,</span><span class="w"> </span><span class="n">last_name</span><span class="w"> </span><span class="p">,</span><span class="w"> </span><span class="n">salary</span><span class="w"> </span><span class="p">,</span><span class="w"> </span><span class="n">salary</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="mi">1</span><span class="p">.</span><span class="mi">2</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="o">`</span><span class="k">new</span><span class="w"> </span><span class="n">salary</span><span class="o">`</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">employees</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"> 
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="n">last_name</span><span class="w"> </span><span class="p">,</span><span class="w"> </span><span class="n">substr</span><span class="p">(</span><span class="n">last_name</span><span class="w"> </span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">)</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">szm</span><span class="w"> </span><span class="p">,</span><span class="k">length</span><span class="p">(</span><span class="n">last_name</span><span class="p">)</span><span class="w"> </span><span class="o">`</span><span class="k">length</span><span class="o">`</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">employees</span><span class="w"> </span><span class="k">order</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="n">szm</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">-------------+------+--------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="n">last_name</span><span class="w">   </span><span class="o">|</span><span class="w"> </span><span class="n">szm</span><span class="w">  </span><span class="o">|</span><span class="w"> </span><span class="k">length</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">-------------+------+--------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="n">Austin</span><span class="w">      </span><span class="o">|</span><span class="w"> </span><span class="n">A</span><span class="w">    </span><span class="o">|</span><span class="w">      </span><span class="mi">6</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w"> </span><span class="n">Atkinson</span><span class="w">    </span><span class="o">|</span><span class="w"> </span><span class="n">A</span><span class="w">    </span><span class="o">|</span><span class="w">      </span><span class="mi">8</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="n">concat</span><span class="p">(</span><span class="n">last_name</span><span class="p">,</span><span class="s1">&#39; earns &#39;</span><span class="w"> </span><span class="p">,</span><span class="n">salary</span><span class="w"> </span><span class="p">,</span><span class="s1">&#39; monthly but wants &#39;</span><span class="p">,</span><span class="w"> </span><span class="n">salary</span><span class="o">*</span><span class="mi">3</span><span class="w"> </span><span class="p">)</span><span class="w"> </span><span class="o">`</span><span class="n">Dream</span><span class="w"> </span><span class="n">Salary</span><span class="o">`</span><span class="w">  </span><span class="k">from</span><span class="w"> </span><span class="n">employees</span><span class="w">  </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">-----------------------------------------------------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="n">Dream</span><span class="w"> </span><span class="n">Salary</span><span class="w">                                        </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">-----------------------------------------------------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="n">K_ing</span><span class="w"> </span><span class="n">earns</span><span class="w"> </span><span class="mi">24000</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="n">monthly</span><span class="w"> </span><span class="n">but</span><span class="w"> </span><span class="n">wants</span><span class="w"> </span><span class="mi">72000</span><span class="p">.</span><span class="mi">00</span><span class="w">     </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w"> </span><span class="n">Kochhar</span><span class="w"> </span><span class="n">earns</span><span class="w"> </span><span class="mi">17000</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="n">monthly</span><span class="w"> </span><span class="n">but</span><span class="w"> </span><span class="n">wants</span><span class="w"> </span><span class="mi">51000</span><span class="p">.</span><span class="mi">00</span><span class="w">   </span><span class="o">|</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="n">job_id</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">job</span><span class="w"> </span><span class="p">,</span><span class="w"> </span><span class="k">case</span><span class="w"> </span><span class="n">job_id</span><span class="w"> </span><span class="k">when</span><span class="w"> </span><span class="s1">&#39;AD_PRES&#39;</span><span class="w"> </span><span class="k">then</span><span class="w"> </span><span class="s1">&#39;A&#39;</span><span class="w"> </span><span class="k">when</span><span class="w"> </span><span class="s1">&#39;ST_MAN&#39;</span><span class="w"> </span><span class="k">then</span><span class="w"> </span><span class="s1">&#39;B&#39;</span><span class="w"> </span><span class="k">when</span><span class="w"> </span><span class="s1">&#39;IT_PROG&#39;</span><span class="w"> </span><span class="k">then</span><span class="w"> </span><span class="s1">&#39;C&#39;</span><span class="k">end</span><span class="w">  </span><span class="n">grade</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">employees</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">------------+-------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="n">job</span><span class="w">        </span><span class="o">|</span><span class="w"> </span><span class="n">grade</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">------------+-------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="n">AC_ACCOUNT</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="k">NULL</span><span class="w">  </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w"> </span><span class="n">AC_MGR</span><span class="w">     </span><span class="o">|</span><span class="w"> </span><span class="k">NULL</span><span class="w">  </span><span class="o">|</span><span class="w">
</span><span class="w">
</span></code></pre></div><h5 id="分组函数">分组函数</h5>
<p>功能:用作统计使用,又称为聚合函数或统计函数或组函数</p>
<p>分类:</p>
<p>sum 求和 avg平均值 max最大值 min最小值 count计算个数</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="n">mysql</span><span class="o">&gt;</span><span class="w">  </span><span class="k">select</span><span class="w"> </span><span class="k">sum</span><span class="p">(</span><span class="n">salary</span><span class="p">)</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">employees</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">-------------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="k">sum</span><span class="p">(</span><span class="n">salary</span><span class="p">)</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">-------------+
</span><span class="c1"></span><span class="o">|</span><span class="w">   </span><span class="mi">691400</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">-------------+
</span><span class="c1"></span><span class="mi">1</span><span class="w"> </span><span class="k">row</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="k">set</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="k">avg</span><span class="p">(</span><span class="n">salary</span><span class="p">)</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">employees</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">-------------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="k">avg</span><span class="p">(</span><span class="n">salary</span><span class="p">)</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">-------------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="mi">6461</span><span class="p">.</span><span class="mi">682243</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">-------------+
</span><span class="c1"></span><span class="mi">1</span><span class="w"> </span><span class="k">row</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="k">set</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="k">min</span><span class="p">(</span><span class="n">salary</span><span class="p">)</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">employees</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">-------------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="k">min</span><span class="p">(</span><span class="n">salary</span><span class="p">)</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">-------------+
</span><span class="c1"></span><span class="o">|</span><span class="w">     </span><span class="mi">2100</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">-------------+
</span><span class="c1"></span><span class="mi">1</span><span class="w"> </span><span class="k">row</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="k">set</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="k">max</span><span class="p">(</span><span class="n">salary</span><span class="p">)</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">employees</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">-------------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="k">max</span><span class="p">(</span><span class="n">salary</span><span class="p">)</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">-------------+
</span><span class="c1"></span><span class="o">|</span><span class="w">    </span><span class="mi">24000</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">-------------+
</span><span class="c1"></span><span class="mi">1</span><span class="w"> </span><span class="k">row</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="k">set</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="k">count</span><span class="p">(</span><span class="n">salary</span><span class="p">)</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">employees</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">---------------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="k">count</span><span class="p">(</span><span class="n">salary</span><span class="p">)</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">---------------+
</span><span class="c1"></span><span class="o">|</span><span class="w">           </span><span class="mi">107</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">---------------+
</span><span class="c1"></span><span class="mi">1</span><span class="w"> </span><span class="k">row</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="k">set</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span><span class="w"> 
</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="k">sum</span><span class="p">(</span><span class="n">salary</span><span class="p">)</span><span class="w"> </span><span class="err">和</span><span class="w"> </span><span class="p">,</span><span class="w"> </span><span class="n">round</span><span class="p">(</span><span class="k">avg</span><span class="p">(</span><span class="n">salary</span><span class="p">),</span><span class="mi">2</span><span class="p">)</span><span class="w"> </span><span class="err">平均</span><span class="w"> </span><span class="p">,</span><span class="w"> </span><span class="k">min</span><span class="p">(</span><span class="n">salary</span><span class="p">)</span><span class="w"> </span><span class="err">最低</span><span class="w"> </span><span class="p">,</span><span class="w"> </span><span class="k">max</span><span class="p">(</span><span class="n">salary</span><span class="p">)</span><span class="w"> </span><span class="err">最高</span><span class="p">,</span><span class="k">count</span><span class="p">(</span><span class="n">salary</span><span class="p">)</span><span class="w"> </span><span class="err">个数</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">employees</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">-----------+---------+---------+----------+------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="err">和</span><span class="w">        </span><span class="o">|</span><span class="w"> </span><span class="err">平均</span><span class="w">    </span><span class="o">|</span><span class="w"> </span><span class="err">最低</span><span class="w">    </span><span class="o">|</span><span class="w"> </span><span class="err">最高</span><span class="w">     </span><span class="o">|</span><span class="w"> </span><span class="err">个数</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">-----------+---------+---------+----------+------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="mi">691400</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="mi">6461</span><span class="p">.</span><span class="mi">68</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="mi">2100</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="mi">24000</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="o">|</span><span class="w">  </span><span class="mi">107</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">-----------+---------+---------+----------+------+
</span><span class="c1"></span><span class="w">
</span><span class="w"></span><span class="o">#</span><span class="err">参数支持哪些类型</span><span class="w">
</span><span class="w"></span><span class="o">#</span><span class="k">sum</span><span class="w"> </span><span class="k">avg</span><span class="w"> </span><span class="err">不支持字符型</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="k">sum</span><span class="p">(</span><span class="n">last_name</span><span class="p">)</span><span class="w"> </span><span class="p">,</span><span class="w"> </span><span class="k">avg</span><span class="p">(</span><span class="n">last_name</span><span class="p">)</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">employees</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">----------------+----------------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="k">sum</span><span class="p">(</span><span class="n">last_name</span><span class="p">)</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="k">avg</span><span class="p">(</span><span class="n">last_name</span><span class="p">)</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">----------------+----------------+
</span><span class="c1"></span><span class="o">|</span><span class="w">              </span><span class="mi">0</span><span class="w"> </span><span class="o">|</span><span class="w">              </span><span class="mi">0</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">----------------+----------------+
</span><span class="c1"></span><span class="w">
</span><span class="w"></span><span class="o">#</span><span class="w"> </span><span class="k">max</span><span class="w"> </span><span class="k">min</span><span class="w"> </span><span class="err">支持字符型</span><span class="o">/</span><span class="err">日期型</span><span class="w"> </span><span class="err">只要能够排序</span><span class="w"> </span><span class="k">max</span><span class="w"> </span><span class="err">和</span><span class="w"> </span><span class="n">min就能支持</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="k">max</span><span class="p">(</span><span class="n">last_name</span><span class="p">)</span><span class="w"> </span><span class="p">,</span><span class="w"> </span><span class="k">min</span><span class="p">(</span><span class="n">last_name</span><span class="p">)</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">employees</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">----------------+----------------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="k">max</span><span class="p">(</span><span class="n">last_name</span><span class="p">)</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="k">min</span><span class="p">(</span><span class="n">last_name</span><span class="p">)</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">----------------+----------------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="n">Zlotkey</span><span class="w">        </span><span class="o">|</span><span class="w"> </span><span class="n">Abel</span><span class="w">           </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">----------------+----------------+
</span><span class="c1"></span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="k">max</span><span class="p">(</span><span class="n">hiredate</span><span class="p">)</span><span class="w"> </span><span class="p">,</span><span class="w"> </span><span class="k">min</span><span class="p">(</span><span class="n">hiredate</span><span class="p">)</span><span class="w"> </span><span class="k">from</span><span class="w">  </span><span class="n">employees</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">---------------------+---------------------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="k">max</span><span class="p">(</span><span class="n">hiredate</span><span class="p">)</span><span class="w">       </span><span class="o">|</span><span class="w"> </span><span class="k">min</span><span class="p">(</span><span class="n">hiredate</span><span class="p">)</span><span class="w">       </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">---------------------+---------------------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="mi">2016</span><span class="o">-</span><span class="mi">03</span><span class="o">-</span><span class="mi">03</span><span class="w"> </span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="mi">1992</span><span class="o">-</span><span class="mi">04</span><span class="o">-</span><span class="mi">03</span><span class="w"> </span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">---------------------+---------------------+
</span><span class="c1"></span><span class="mi">1</span><span class="w"> </span><span class="k">row</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="k">set</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="o">#</span><span class="n">count支持计数</span><span class="w"> </span><span class="err">计的是非</span><span class="n">null的数</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="k">count</span><span class="p">(</span><span class="n">last_name</span><span class="p">)</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">employees</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">------------------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="k">count</span><span class="p">(</span><span class="n">last_name</span><span class="p">)</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">------------------+
</span><span class="c1"></span><span class="o">|</span><span class="w">              </span><span class="mi">107</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">------------------+
</span><span class="c1"></span><span class="mi">1</span><span class="w"> </span><span class="k">row</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="k">set</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="k">count</span><span class="p">(</span><span class="n">commission_pct</span><span class="p">)</span><span class="k">from</span><span class="w"> </span><span class="n">employees</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">-----------------------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="k">count</span><span class="p">(</span><span class="n">commission_pct</span><span class="p">)</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">-----------------------+
</span><span class="c1"></span><span class="o">|</span><span class="w">                    </span><span class="mi">35</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">-----------------------+
</span><span class="c1"></span><span class="w">
</span><span class="w"></span><span class="o">#</span><span class="err">判断是否忽略</span><span class="n">null来计算</span><span class="w"> </span><span class="err">这里说明</span><span class="n">sum肯定是没参与</span><span class="w"> </span><span class="err">因为如果有</span><span class="k">null</span><span class="w"> </span><span class="k">null</span><span class="o">+</span><span class="err">任何都是</span><span class="k">null</span><span class="w"> </span><span class="err">不可能有值</span><span class="w">
</span><span class="w"></span><span class="o">#</span><span class="n">avg也没有参与</span><span class="w"> </span><span class="err">所以</span><span class="n">avg不将null的项加入运算</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="k">sum</span><span class="p">(</span><span class="n">commission_pct</span><span class="p">)</span><span class="err">总计</span><span class="w"> </span><span class="p">,</span><span class="w"> </span><span class="k">avg</span><span class="p">(</span><span class="n">commission_pct</span><span class="p">)</span><span class="w"> </span><span class="err">平均值</span><span class="p">,</span><span class="w"> </span><span class="k">sum</span><span class="p">(</span><span class="n">commission_pct</span><span class="p">)</span><span class="o">/</span><span class="mi">35</span><span class="w"> </span><span class="err">没参与</span><span class="w"> </span><span class="p">,</span><span class="w"> </span><span class="k">sum</span><span class="p">(</span><span class="n">commission_pct</span><span class="p">)</span><span class="o">/</span><span class="mi">107</span><span class="w"> </span><span class="err">参与了</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">employees</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">------+----------+----------+----------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="err">总计</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="err">平均值</span><span class="w">   </span><span class="o">|</span><span class="w"> </span><span class="err">没参与</span><span class="w">   </span><span class="o">|</span><span class="w"> </span><span class="err">参与了</span><span class="w">   </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">------+----------+----------+----------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="mi">7</span><span class="p">.</span><span class="mi">80</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="mi">0</span><span class="p">.</span><span class="mi">222857</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="mi">0</span><span class="p">.</span><span class="mi">222857</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="mi">0</span><span class="p">.</span><span class="mi">072897</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">------+----------+----------+----------+
</span><span class="c1"></span><span class="mi">1</span><span class="w"> </span><span class="k">row</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="k">set</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="o">#</span><span class="k">min</span><span class="w"> </span><span class="err">和</span><span class="w"> </span><span class="k">max</span><span class="w"> </span><span class="err">也忽略了</span><span class="k">null</span><span class="w"> </span><span class="err">否则肯定会在一头出现的</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="k">max</span><span class="p">(</span><span class="n">commission_pct</span><span class="p">)</span><span class="w"> </span><span class="k">max</span><span class="w"> </span><span class="p">,</span><span class="w"> </span><span class="k">min</span><span class="p">(</span><span class="n">commission_pct</span><span class="p">)</span><span class="w"> </span><span class="k">min</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">employees</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">------+------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="k">max</span><span class="w">  </span><span class="o">|</span><span class="w"> </span><span class="k">min</span><span class="w">  </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">------+------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="mi">0</span><span class="p">.</span><span class="mi">40</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="mi">0</span><span class="p">.</span><span class="mi">10</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">------+------+
</span><span class="c1"></span><span class="mi">1</span><span class="w"> </span><span class="k">row</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="k">set</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="o">#</span><span class="err">可以和</span><span class="k">distinct</span><span class="w"> </span><span class="err">匹配使用</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="k">sum</span><span class="p">(</span><span class="k">distinct</span><span class="w"> </span><span class="n">salary</span><span class="p">)</span><span class="w"> </span><span class="err">去重</span><span class="p">,</span><span class="w"> </span><span class="k">sum</span><span class="p">(</span><span class="n">salary</span><span class="p">)</span><span class="w"> </span><span class="err">不去重</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">employees</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">-----------+-----------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="err">去重</span><span class="w">      </span><span class="o">|</span><span class="w"> </span><span class="err">不去重</span><span class="w">    </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">-----------+-----------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="mi">397900</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="mi">691400</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">-----------+-----------+
</span><span class="c1"></span><span class="mi">1</span><span class="w"> </span><span class="k">row</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="k">set</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="k">count</span><span class="p">(</span><span class="k">distinct</span><span class="p">(</span><span class="n">salary</span><span class="p">))</span><span class="w"> </span><span class="err">几种工资</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">employees</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">----------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="err">几种工资</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">----------+
</span><span class="c1"></span><span class="o">|</span><span class="w">       </span><span class="mi">57</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">----------+
</span><span class="c1"></span><span class="mi">1</span><span class="w"> </span><span class="k">row</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="k">set</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="o">#</span><span class="w"> </span><span class="k">count</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="err">和</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="err">意思是加了一列</span><span class="w"> </span><span class="err">那么当然就等同于统计行数辣</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="k">count</span><span class="p">(</span><span class="o">*</span><span class="p">)</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">employees</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">----------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="k">count</span><span class="p">(</span><span class="o">*</span><span class="p">)</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">----------+
</span><span class="c1"></span><span class="o">|</span><span class="w">      </span><span class="mi">107</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">----------+
</span><span class="c1"></span><span class="mi">1</span><span class="w"> </span><span class="k">row</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="k">set</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="k">count</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">employees</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">----------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="k">count</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">----------+
</span><span class="c1"></span><span class="o">|</span><span class="w">      </span><span class="mi">107</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">----------+
</span><span class="c1"></span><span class="mi">1</span><span class="w"> </span><span class="k">row</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="k">set</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="k">count</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">employees</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">----------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="k">count</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">----------+
</span><span class="c1"></span><span class="o">|</span><span class="w">      </span><span class="mi">107</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">----------+
</span><span class="c1"></span><span class="mi">1</span><span class="w"> </span><span class="k">row</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="k">set</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span><span class="w">
</span></code></pre></div><p><strong>所有的分组函数 都忽略null值</strong></p>
<p><strong>可以和distinct搭配</strong></p>
<p><strong>count函数的详细介绍</strong></p>
<p>效率:</p>
<p>MYISAM 存储引擎下, count(*) 的效率高</p>
<p>INNODB存储引擎下, count(*) 和 count(1) 的效率差不多,比count(字段) 要高一点儿</p>
<p>和分组函数一同查询的字段有限制</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="o">#</span><span class="err">已经不存在逻辑意义了</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="k">avg</span><span class="p">(</span><span class="n">salary</span><span class="p">)</span><span class="w"> </span><span class="p">,</span><span class="w"> </span><span class="n">employee_id</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">employees</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">-------------+-------------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="k">avg</span><span class="p">(</span><span class="n">salary</span><span class="p">)</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">employee_id</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">-------------+-------------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="mi">6461</span><span class="p">.</span><span class="mi">682243</span><span class="w"> </span><span class="o">|</span><span class="w">         </span><span class="mi">100</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">-------------+-------------+
</span><span class="c1"></span><span class="mi">1</span><span class="w"> </span><span class="k">row</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="k">set</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span><span class="w">
</span></code></pre></div><p>和分组函数一同查询的字段要求是group by 后的字段</p>
<p>练习一下</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="n">datediff</span><span class="p">(</span><span class="k">max</span><span class="p">(</span><span class="n">hiredate</span><span class="p">),</span><span class="k">min</span><span class="p">(</span><span class="n">hiredate</span><span class="p">))</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">employees</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">---------------------------------------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="n">datediff</span><span class="p">(</span><span class="k">max</span><span class="p">(</span><span class="n">hiredate</span><span class="p">),</span><span class="k">min</span><span class="p">(</span><span class="n">hiredate</span><span class="p">))</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">---------------------------------------+
</span><span class="c1"></span><span class="o">|</span><span class="w">                                  </span><span class="mi">8735</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">---------------------------------------+
</span><span class="c1"></span><span class="mi">1</span><span class="w"> </span><span class="k">row</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="k">set</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="n">datediff</span><span class="p">(</span><span class="n">now</span><span class="p">(),</span><span class="s1">&#39;1997-11-21&#39;</span><span class="p">)</span><span class="w"> </span><span class="err">活了多久了</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">------------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="err">活了多久了</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">------------+
</span><span class="c1"></span><span class="o">|</span><span class="w">       </span><span class="mi">8705</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">------------+
</span><span class="c1"></span><span class="mi">1</span><span class="w"> </span><span class="k">row</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="k">set</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="k">count</span><span class="p">(</span><span class="o">*</span><span class="p">)</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">employees</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="n">department_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">90</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">----------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="k">count</span><span class="p">(</span><span class="o">*</span><span class="p">)</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">----------+
</span><span class="c1"></span><span class="o">|</span><span class="w">        </span><span class="mi">3</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">----------+
</span><span class="c1"></span><span class="mi">1</span><span class="w"> </span><span class="k">row</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="k">set</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span><span class="w">
</span></code></pre></div><h5 id="分组查询">分组查询</h5>
<p>select 分组函数, 列(要求出现在group by的后面) from 表 where 筛选条件 group by 分组的列表 order by 子句</p>
<p>**注意:	**查询列表必须特殊,要求是分组函数和group by 后出现的字段</p>
<p><strong>group by可以使用别名</strong>  <strong>oracle是不支持的 mysql支持</strong></p>
<p><strong>having 可以使用别名</strong> <strong>oracle是不支持的 mysql支持</strong></p>
<p><strong>order by 可以使用别名 oracle是不支持的 mysql支持</strong></p>
<p><strong>where 不可以使用别名</strong></p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="k">max</span><span class="p">(</span><span class="n">salary</span><span class="p">)</span><span class="w"> </span><span class="err">最高工资</span><span class="w"> </span><span class="p">,</span><span class="w"> </span><span class="n">job_id</span><span class="w"> </span><span class="err">工种</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">employees</span><span class="w"> </span><span class="k">group</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="err">工种</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">----------+------------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="err">最高工资</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="err">工种</span><span class="w">       </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">----------+------------+
</span><span class="c1"></span><span class="o">|</span><span class="w">  </span><span class="mi">8300</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">AC_ACCOUNT</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w"> </span><span class="mi">12000</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">AC_MGR</span><span class="w">     </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w">  </span><span class="mi">4400</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">AD_ASST</span><span class="w">    </span><span class="o">|</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="k">count</span><span class="p">(</span><span class="o">*</span><span class="p">)</span><span class="w"> </span><span class="err">部门个数</span><span class="w"> </span><span class="p">,</span><span class="w"> </span><span class="n">location_id</span><span class="w"> </span><span class="err">位置</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">departments</span><span class="w"> </span><span class="k">group</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="err">位置</span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">----------+------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="err">部门个数</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="err">位置</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">----------+------+
</span><span class="c1"></span><span class="o">|</span><span class="w">        </span><span class="mi">1</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="mi">1400</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w">        </span><span class="mi">1</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="mi">1500</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="k">avg</span><span class="p">(</span><span class="n">salary</span><span class="p">)</span><span class="w"> </span><span class="err">平均工资</span><span class="p">,</span><span class="n">department_id</span><span class="w"> </span><span class="err">部门编号</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">employees</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="n">email</span><span class="w"> </span><span class="k">like</span><span class="w"> </span><span class="s1">&#39;%a%&#39;</span><span class="w"> </span><span class="k">group</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="err">部门编号</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">--------------+----------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="err">平均工资</span><span class="w">     </span><span class="o">|</span><span class="w"> </span><span class="err">部门编号</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">--------------+----------+
</span><span class="c1"></span><span class="o">|</span><span class="w">  </span><span class="mi">7000</span><span class="p">.</span><span class="mi">000000</span><span class="w"> </span><span class="o">|</span><span class="w">     </span><span class="k">NULL</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w">  </span><span class="mi">4400</span><span class="p">.</span><span class="mi">000000</span><span class="w"> </span><span class="o">|</span><span class="w">       </span><span class="mi">10</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">--------------+----------+
</span><span class="c1"></span><span class="mi">11</span><span class="w"> </span><span class="k">rows</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="k">set</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="o">#</span><span class="err">查询有奖金的每个领导手下员工的最高工资</span><span class="w"> </span><span class="err">很奇怪</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="k">max</span><span class="p">(</span><span class="n">salary</span><span class="p">)</span><span class="err">最高工资</span><span class="p">,</span><span class="n">manager_id</span><span class="w"> </span><span class="err">领导</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">employees</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="n">commission_pct</span><span class="w"> </span><span class="o">&lt;=&gt;</span><span class="w"> </span><span class="k">null</span><span class="w"> </span><span class="k">group</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="n">manager_id</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">----------+------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="err">最高工资</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="err">领导</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">----------+------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="mi">24000</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="k">NULL</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w"> </span><span class="mi">17000</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="o">|</span><span class="w">  </span><span class="mi">100</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w">  </span><span class="mi">9000</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="o">|</span><span class="w">  </span><span class="mi">102</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w">  </span><span class="mi">6000</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="o">|</span><span class="w">  </span><span class="mi">103</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w"> </span><span class="mi">12000</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="o">|</span><span class="w">  </span><span class="mi">101</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w">  </span><span class="mi">9000</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="o">|</span><span class="w">  </span><span class="mi">108</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w">  </span><span class="mi">3100</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="o">|</span><span class="w">  </span><span class="mi">114</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w">  </span><span class="mi">3200</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="o">|</span><span class="w">  </span><span class="mi">120</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w">  </span><span class="mi">4200</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="o">|</span><span class="w">  </span><span class="mi">121</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w">  </span><span class="mi">3800</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="o">|</span><span class="w">  </span><span class="mi">122</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w">  </span><span class="mi">4000</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="o">|</span><span class="w">  </span><span class="mi">123</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w">  </span><span class="mi">3500</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="o">|</span><span class="w">  </span><span class="mi">124</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w">  </span><span class="mi">6000</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="o">|</span><span class="w">  </span><span class="mi">201</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w">  </span><span class="mi">8300</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="o">|</span><span class="w">  </span><span class="mi">205</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">----------+------+
</span><span class="c1"></span><span class="mi">14</span><span class="w"> </span><span class="k">rows</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="k">set</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="k">max</span><span class="p">(</span><span class="n">salary</span><span class="p">)</span><span class="err">最高工资</span><span class="p">,</span><span class="n">manager_id</span><span class="w"> </span><span class="err">领导</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">employees</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="n">commission_pct</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="k">not</span><span class="w"> </span><span class="k">null</span><span class="w"> </span><span class="k">group</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="n">manager_id</span><span class="w"> </span><span class="p">;</span><span class="w"> 
</span><span class="w"></span><span class="o">+</span><span class="c1">----------+------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="err">最高工资</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="err">领导</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">----------+------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="mi">14000</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="o">|</span><span class="w">  </span><span class="mi">100</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w"> </span><span class="mi">10000</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="o">|</span><span class="w">  </span><span class="mi">145</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w"> </span><span class="mi">10000</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="o">|</span><span class="w">  </span><span class="mi">146</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w"> </span><span class="mi">10500</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="o">|</span><span class="w">  </span><span class="mi">147</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w"> </span><span class="mi">11500</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="o">|</span><span class="w">  </span><span class="mi">148</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w"> </span><span class="mi">11000</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="o">|</span><span class="w">  </span><span class="mi">149</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">----------+------+
</span><span class="c1"></span><span class="mi">6</span><span class="w"> </span><span class="k">rows</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="k">set</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="o">#</span><span class="err">查询每个部门的员工个数</span><span class="w"> </span><span class="err">其实就是</span><span class="k">having</span><span class="w"> </span><span class="err">在每个</span><span class="n">group之下的筛选</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="n">department_id</span><span class="w"> </span><span class="err">部门</span><span class="w"> </span><span class="p">,</span><span class="w"> </span><span class="k">count</span><span class="p">(</span><span class="o">*</span><span class="p">)</span><span class="err">员工个数</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">employees</span><span class="w"> </span><span class="k">group</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="err">部门</span><span class="w"> </span><span class="k">having</span><span class="w"> </span><span class="err">员工个数</span><span class="o">&gt;</span><span class="mi">2</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">------+----------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="err">部门</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="err">员工个数</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">------+----------+
</span><span class="c1"></span><span class="o">|</span><span class="w">   </span><span class="mi">30</span><span class="w"> </span><span class="o">|</span><span class="w">        </span><span class="mi">6</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w">   </span><span class="mi">50</span><span class="w"> </span><span class="o">|</span><span class="w">       </span><span class="mi">45</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w">   </span><span class="mi">60</span><span class="w"> </span><span class="o">|</span><span class="w">        </span><span class="mi">5</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w">   </span><span class="mi">80</span><span class="w"> </span><span class="o">|</span><span class="w">       </span><span class="mi">34</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w">   </span><span class="mi">90</span><span class="w"> </span><span class="o">|</span><span class="w">        </span><span class="mi">3</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w">  </span><span class="mi">100</span><span class="w"> </span><span class="o">|</span><span class="w">        </span><span class="mi">6</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">------+----------+
</span><span class="c1"></span><span class="mi">6</span><span class="w"> </span><span class="k">rows</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="k">set</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="o">#</span><span class="err">查询每个工种有奖金的员工的最高工资</span><span class="o">&gt;</span><span class="mi">12000</span><span class="err">的工种编号和最高工资</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="k">max</span><span class="p">(</span><span class="n">salary</span><span class="p">)</span><span class="w"> </span><span class="err">最高工资</span><span class="w"> </span><span class="p">,</span><span class="w"> </span><span class="n">job_id</span><span class="w"> </span><span class="err">工种编号</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">employees</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="n">commission_pct</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="k">not</span><span class="w"> </span><span class="k">null</span><span class="w"> </span><span class="k">group</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="err">工种编号</span><span class="w"> </span><span class="k">having</span><span class="w"> </span><span class="err">最高工资</span><span class="o">&gt;</span><span class="mi">12000</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">----------+----------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="err">最高工资</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="err">工种编号</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">----------+----------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="mi">14000</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">SA_MAN</span><span class="w">   </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">----------+----------+
</span><span class="c1"></span><span class="mi">1</span><span class="w"> </span><span class="k">row</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="k">set</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="o">#</span><span class="err">查询领导编号</span><span class="o">&gt;</span><span class="mi">102</span><span class="err">的每个领导手下的最低工资</span><span class="o">&gt;</span><span class="mi">5000</span><span class="err">的领导编号是那个</span><span class="p">,</span><span class="err">以及其最低工资</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="k">min</span><span class="p">(</span><span class="n">salary</span><span class="p">)</span><span class="w"> </span><span class="err">最低工资</span><span class="w"> </span><span class="p">,</span><span class="w"> </span><span class="n">manager_id</span><span class="w"> </span><span class="err">领导编号</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">employees</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="n">manager_id</span><span class="o">&gt;</span><span class="mi">102</span><span class="w"> </span><span class="k">group</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="err">领导编号</span><span class="w"> </span><span class="k">having</span><span class="w"> </span><span class="err">最低工资</span><span class="o">&gt;</span><span class="mi">5000</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">----------+----------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="err">最低工资</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="err">领导编号</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">----------+----------+
</span><span class="c1"></span><span class="o">|</span><span class="w">  </span><span class="mi">6900</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="o">|</span><span class="w">      </span><span class="mi">108</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w">  </span><span class="mi">7000</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="o">|</span><span class="w">      </span><span class="mi">145</span><span class="w"> </span><span class="o">|</span><span class="w">
</span></code></pre></div><h5 id="特点">特点</h5>
<ol>
<li>分组查询中的筛选条件分为两类
<ol>
<li>分组前筛选  来源于原始表  放在group by 子句的前面 使用where关键字</li>
<li>分组后筛选  来源于分组后的结果集 放在group by子句的后面 使用having关键字</li>
<li>分组函数 min max count avg 作为条件肯定是放在having子句中</li>
<li>能用分组前筛选的,就优先考虑放在分组前面,考虑到性能</li>
</ol>
</li>
<li>group by 子句支持单个字段分组,多个字段分组(多个字段之间用逗号隔开,没有顺序之分),也支持表达式或函数(较少)</li>
<li>也可以添加排序(排序放在整个分组查询的最后)</li>
</ol>
<h5 id="按表达式或函数分组">按表达式或函数分组</h5>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="o">#</span><span class="err">按员工姓名的长度分组</span><span class="p">,</span><span class="err">查询每一组的员工个数</span><span class="p">,</span><span class="err">筛选同学个数</span><span class="o">&gt;</span><span class="mi">5</span><span class="err">的有哪些</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="k">length</span><span class="p">(</span><span class="n">last_name</span><span class="p">)</span><span class="w"> </span><span class="err">姓名长度</span><span class="w"> </span><span class="p">,</span><span class="w"> </span><span class="k">count</span><span class="p">(</span><span class="o">*</span><span class="p">)</span><span class="w"> </span><span class="err">员工个数</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">employees</span><span class="w"> </span><span class="k">group</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="k">length</span><span class="p">(</span><span class="n">last_name</span><span class="p">)</span><span class="w"> </span><span class="k">having</span><span class="w"> </span><span class="err">员工个数</span><span class="o">&gt;</span><span class="mi">5</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">----------+----------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="err">姓名长度</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="err">员工个数</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">----------+----------+
</span><span class="c1"></span><span class="o">|</span><span class="w">        </span><span class="mi">5</span><span class="w"> </span><span class="o">|</span><span class="w">       </span><span class="mi">29</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w">        </span><span class="mi">7</span><span class="w"> </span><span class="o">|</span><span class="w">       </span><span class="mi">15</span><span class="w"> </span><span class="o">|</span><span class="w">
</span></code></pre></div><h5 id="按多个字段分组">按多个字段分组</h5>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="o">#</span><span class="err">查询每个部门每个工种的员工的平均工资</span><span class="w"> </span><span class="err">交换</span><span class="k">group</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="err">的顺序不影响</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="k">avg</span><span class="p">(</span><span class="n">salary</span><span class="p">)</span><span class="w"> </span><span class="err">平均工资</span><span class="p">,</span><span class="w"> </span><span class="n">department_id</span><span class="w"> </span><span class="err">部门编号</span><span class="w"> </span><span class="p">,</span><span class="w"> </span><span class="n">job_id</span><span class="w"> </span><span class="err">工种编号</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">employees</span><span class="w"> </span><span class="k">group</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="err">部门编号</span><span class="w"> </span><span class="p">,</span><span class="w"> </span><span class="err">工种编号</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">--------------+----------+------------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="err">平均工资</span><span class="w">     </span><span class="o">|</span><span class="w"> </span><span class="err">部门编号</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="err">工种编号</span><span class="w">   </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">--------------+----------+------------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="mi">24000</span><span class="p">.</span><span class="mi">000000</span><span class="w"> </span><span class="o">|</span><span class="w">       </span><span class="mi">90</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">AD_PRES</span><span class="w">    </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w"> </span><span class="mi">17000</span><span class="p">.</span><span class="mi">000000</span><span class="w"> </span><span class="o">|</span><span class="w">       </span><span class="mi">90</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">AD_VP</span><span class="w">      </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w">  </span><span class="mi">5760</span><span class="p">.</span><span class="mi">000000</span><span class="w"> </span><span class="o">|</span><span class="w">       </span><span class="mi">60</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">IT_PROG</span><span class="w">    </span><span class="o">|</span><span class="w">
</span></code></pre></div><h5 id="分组后添加排序">分组后添加排序</h5>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="k">avg</span><span class="p">(</span><span class="n">salary</span><span class="p">)</span><span class="w"> </span><span class="err">平均工资</span><span class="p">,</span><span class="w"> </span><span class="n">department_id</span><span class="w"> </span><span class="err">部门编号</span><span class="w"> </span><span class="p">,</span><span class="w"> </span><span class="n">job_id</span><span class="w"> </span><span class="err">工种编号</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">employees</span><span class="w"> </span><span class="k">group</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="err">部门编号</span><span class="w"> </span><span class="p">,</span><span class="w"> </span><span class="err">工种编号</span><span class="w"> </span><span class="k">order</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="err">平均工资</span><span class="w"> </span><span class="k">asc</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">--------------+----------+------------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="err">平均工资</span><span class="w">     </span><span class="o">|</span><span class="w"> </span><span class="err">部门编号</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="err">工种编号</span><span class="w">   </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">--------------+----------+------------+
</span><span class="c1"></span><span class="o">|</span><span class="w">  </span><span class="mi">2780</span><span class="p">.</span><span class="mi">000000</span><span class="w"> </span><span class="o">|</span><span class="w">       </span><span class="mi">30</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">PU_CLERK</span><span class="w">   </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w">  </span><span class="mi">2785</span><span class="p">.</span><span class="mi">000000</span><span class="w"> </span><span class="o">|</span><span class="w">       </span><span class="mi">50</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">ST_CLERK</span><span class="w">   </span><span class="o">|</span><span class="w">
</span></code></pre></div><p>练习一下</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="n">job_id</span><span class="w"> </span><span class="err">工种</span><span class="p">,</span><span class="w"> </span><span class="k">max</span><span class="p">(</span><span class="n">salary</span><span class="p">)</span><span class="w"> </span><span class="err">最大</span><span class="w"> </span><span class="p">,</span><span class="k">min</span><span class="p">(</span><span class="n">salary</span><span class="p">)</span><span class="w"> </span><span class="err">最小</span><span class="w"> </span><span class="p">,</span><span class="k">avg</span><span class="p">(</span><span class="n">salary</span><span class="p">)</span><span class="w"> </span><span class="err">平均</span><span class="w"> </span><span class="p">,</span><span class="k">sum</span><span class="p">(</span><span class="n">salary</span><span class="p">)</span><span class="w"> </span><span class="err">总和</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">employees</span><span class="w"> </span><span class="k">group</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="err">工种</span><span class="w"> </span><span class="k">order</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="err">工种</span><span class="w"> </span><span class="k">asc</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">------------+----------+----------+--------------+-----------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="err">工种</span><span class="w">       </span><span class="o">|</span><span class="w"> </span><span class="err">最大</span><span class="w">     </span><span class="o">|</span><span class="w"> </span><span class="err">最小</span><span class="w">     </span><span class="o">|</span><span class="w"> </span><span class="err">平均</span><span class="w">         </span><span class="o">|</span><span class="w"> </span><span class="err">总和</span><span class="w">      </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">------------+----------+----------+--------------+-----------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="n">AC_ACCOUNT</span><span class="w"> </span><span class="o">|</span><span class="w">  </span><span class="mi">8300</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="o">|</span><span class="w">  </span><span class="mi">8300</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="o">|</span><span class="w">  </span><span class="mi">8300</span><span class="p">.</span><span class="mi">000000</span><span class="w"> </span><span class="o">|</span><span class="w">   </span><span class="mi">8300</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w"> </span><span class="n">AC_MGR</span><span class="w">     </span><span class="o">|</span><span class="w"> </span><span class="mi">12000</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="mi">12000</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="mi">12000</span><span class="p">.</span><span class="mi">000000</span><span class="w"> </span><span class="o">|</span><span class="w">  </span><span class="mi">12000</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="k">max</span><span class="p">(</span><span class="n">salary</span><span class="p">)</span><span class="o">-</span><span class="k">min</span><span class="p">(</span><span class="n">salary</span><span class="p">)</span><span class="w"> </span><span class="n">DIFFERENCE</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">employees</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">------------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="n">DIFFERENCE</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">------------+
</span><span class="c1"></span><span class="o">|</span><span class="w">   </span><span class="mi">21900</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">------------+
</span><span class="c1"></span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="n">manager_id</span><span class="w"> </span><span class="err">领导编号</span><span class="p">,</span><span class="w"> </span><span class="n">employee_id</span><span class="w"> </span><span class="err">员工编号</span><span class="p">,</span><span class="w"> </span><span class="k">min</span><span class="p">(</span><span class="n">salary</span><span class="p">)</span><span class="w"> </span><span class="err">最低工资</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">employees</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="n">salary</span><span class="w"> </span><span class="o">&gt;=</span><span class="mi">6000</span><span class="w"> </span><span class="k">and</span><span class="w"> </span><span class="n">manager_id</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="k">not</span><span class="w"> </span><span class="k">null</span><span class="w"> </span><span class="k">group</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="err">领导编号</span><span class="w">  </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">----------+----------+----------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="err">领导编号</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="err">员工编号</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="err">最低工资</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">----------+----------+----------+
</span><span class="c1"></span><span class="o">|</span><span class="w">      </span><span class="mi">100</span><span class="w"> </span><span class="o">|</span><span class="w">      </span><span class="mi">101</span><span class="w"> </span><span class="o">|</span><span class="w">  </span><span class="mi">6500</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w">      </span><span class="mi">102</span><span class="w"> </span><span class="o">|</span><span class="w">      </span><span class="mi">103</span><span class="w"> </span><span class="o">|</span><span class="w">  </span><span class="mi">9000</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="n">department_id</span><span class="w"> </span><span class="err">部门编号</span><span class="w"> </span><span class="p">,</span><span class="w"> </span><span class="k">count</span><span class="p">(</span><span class="o">*</span><span class="p">)</span><span class="w"> </span><span class="err">员工数量</span><span class="w"> </span><span class="p">,</span><span class="w"> </span><span class="k">avg</span><span class="p">(</span><span class="n">salary</span><span class="p">)</span><span class="w"> </span><span class="err">平均工资</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">employees</span><span class="w"> </span><span class="k">group</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="err">部门编号</span><span class="w"> </span><span class="k">order</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="err">平均工资</span><span class="w"> </span><span class="k">desc</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">----------+----------+--------------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="err">部门编号</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="err">员工数量</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="err">平均工资</span><span class="w">     </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">----------+----------+--------------+
</span><span class="c1"></span><span class="o">|</span><span class="w">       </span><span class="mi">90</span><span class="w"> </span><span class="o">|</span><span class="w">        </span><span class="mi">3</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="mi">19333</span><span class="p">.</span><span class="mi">333333</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w">      </span><span class="mi">110</span><span class="w"> </span><span class="o">|</span><span class="w">        </span><span class="mi">2</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="mi">10150</span><span class="p">.</span><span class="mi">000000</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="n">job_id</span><span class="w"> </span><span class="err">工种</span><span class="w"> </span><span class="p">,</span><span class="w"> </span><span class="k">count</span><span class="p">(</span><span class="o">*</span><span class="p">)</span><span class="err">人数</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">employees</span><span class="w"> </span><span class="k">group</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="err">工种</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">------------+------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="err">工种</span><span class="w">       </span><span class="o">|</span><span class="w"> </span><span class="err">人数</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">------------+------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="n">AC_ACCOUNT</span><span class="w"> </span><span class="o">|</span><span class="w">    </span><span class="mi">1</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w"> </span><span class="n">AC_MGR</span><span class="w">     </span><span class="o">|</span><span class="w">    </span><span class="mi">1</span><span class="w"> </span><span class="o">|</span><span class="w">
</span></code></pre></div><h5 id="连接查询">连接查询</h5>
<p>含义:又称为多表查询,当查询的字段来自于多个表时,就会用到连接查询</p>
<p>笛卡尔积现象: 表1 有m行 表2 有n行 结果有m*n行</p>
<p>发生原因:没有有效的连接条件</p>
<p>如何避免:添加有效的连接条件</p>
<p><figure 
	>
	<a href="/C:%5cUsers%5cAdministrator.YOURTREEDAD%5cAppData%5cRoaming%5cTypora%5ctypora-user-images%5cimage-20210921141653473.png" >
		<img src="/C:%5cUsers%5cAdministrator.YOURTREEDAD%5cAppData%5cRoaming%5cTypora%5ctypora-user-images%5cimage-20210921141653473.png"
			
			
			
			loading="lazy"
			alt="image-20210921141653473">
	</a>
	
	<figcaption>image-20210921141653473</figcaption>
	
</figure></p>
<p>每个都匹配了一遍 , 这不好 ,都是我的</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="n">name</span><span class="w"> </span><span class="p">,</span><span class="w"> </span><span class="n">boyName</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">beauty</span><span class="w"> </span><span class="p">,</span><span class="w"> </span><span class="n">boys</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="n">beauty</span><span class="p">.</span><span class="n">boyfriend_id</span><span class="w"> </span><span class="o">=</span><span class="n">boys</span><span class="p">.</span><span class="n">id</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">------------+---------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="n">name</span><span class="w">       </span><span class="o">|</span><span class="w"> </span><span class="n">boyName</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">------------+---------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="n">Angelababy</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="err">黄晓明</span><span class="w">  </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w"> </span><span class="err">热巴</span><span class="w">       </span><span class="o">|</span><span class="w"> </span><span class="err">鹿晗</span><span class="w">    </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w"> </span><span class="err">周芷若</span><span class="w">     </span><span class="o">|</span><span class="w"> </span><span class="err">张无忌</span><span class="w">  </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w"> </span><span class="err">小昭</span><span class="w">       </span><span class="o">|</span><span class="w"> </span><span class="err">张无忌</span><span class="w">  </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w"> </span><span class="err">王语嫣</span><span class="w">     </span><span class="o">|</span><span class="w"> </span><span class="err">段誉</span><span class="w">    </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w"> </span><span class="err">赵敏</span><span class="w">       </span><span class="o">|</span><span class="w"> </span><span class="err">张无忌</span><span class="w">  </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">------------+---------+
</span></code></pre></div><p>分类:</p>
<ul>
<li>按照年代分类
<ul>
<li>sql92标准 仅仅支持内连接</li>
<li>sql99标准 [推荐] 支持内连接+外连接(左外+右外)+交叉连接</li>
</ul>
</li>
<li>按功能分类
<ul>
<li>内连接
<ul>
<li>等值连接</li>
<li>非等值连接</li>
<li>自连接</li>
</ul>
</li>
<li>外连接
<ul>
<li>左外连接</li>
<li>右外连接</li>
<li>全外连接</li>
</ul>
</li>
<li>交叉连接</li>
</ul>
</li>
</ul>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="o">#</span><span class="err">以下是</span><span class="n">sql92标准的等值连接用法</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="n">last_name</span><span class="w"> </span><span class="p">,</span><span class="w"> </span><span class="n">department_name</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">employees</span><span class="w"> </span><span class="p">,</span><span class="w"> </span><span class="n">departments</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="n">employees</span><span class="p">.</span><span class="n">department_id</span><span class="w"> </span><span class="o">=</span><span class="n">departments</span><span class="p">.</span><span class="n">department_id</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">-------------+-----------------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="n">last_name</span><span class="w">   </span><span class="o">|</span><span class="w"> </span><span class="n">department_name</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">-------------+-----------------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="n">K_ing</span><span class="w">       </span><span class="o">|</span><span class="w"> </span><span class="n">Exe</span><span class="w">             </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w"> </span><span class="n">Kochhar</span><span class="w">     </span><span class="o">|</span><span class="w"> </span><span class="n">Exe</span><span class="w">             </span><span class="o">|</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="o">#</span><span class="err">为表起别名</span><span class="w"> </span><span class="err">提高语句的简洁度</span><span class="w"> </span><span class="err">区分多个重名的字段</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="n">last_name</span><span class="w"> </span><span class="p">,</span><span class="w"> </span><span class="n">e</span><span class="p">.</span><span class="n">job_id</span><span class="w"> </span><span class="p">,</span><span class="w"> </span><span class="n">job_title</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">employees</span><span class="w"> </span><span class="n">e</span><span class="w"> </span><span class="p">,</span><span class="w"> </span><span class="n">jobs</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="n">e</span><span class="p">.</span><span class="n">job_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">jobs</span><span class="p">.</span><span class="n">job_id</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">-------------+------------+---------------------------------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="n">last_name</span><span class="w">   </span><span class="o">|</span><span class="w"> </span><span class="n">job_id</span><span class="w">     </span><span class="o">|</span><span class="w"> </span><span class="n">job_title</span><span class="w">                       </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">-------------+------------+---------------------------------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="n">Gietz</span><span class="w">       </span><span class="o">|</span><span class="w"> </span><span class="n">AC_ACCOUNT</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="k">Public</span><span class="w"> </span><span class="n">Accountant</span><span class="w">               </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w"> </span><span class="n">Higgins</span><span class="w">     </span><span class="o">|</span><span class="w"> </span><span class="n">AC_MGR</span><span class="w">     </span><span class="o">|</span><span class="w"> </span><span class="n">Accounting</span><span class="w"> </span><span class="n">Manager</span><span class="w">              </span><span class="o">|</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="o">#</span><span class="err">交换表的出现顺序是可以的</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="o">#</span><span class="err">加上筛选条件</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="n">last_name</span><span class="w"> </span><span class="p">,</span><span class="w"> </span><span class="n">commission_pct</span><span class="w"> </span><span class="p">,</span><span class="w"> </span><span class="n">department_name</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">employees</span><span class="w"> </span><span class="n">e</span><span class="w"> </span><span class="p">,</span><span class="n">departments</span><span class="w"> </span><span class="n">d</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="n">commission_pct</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="k">not</span><span class="w"> </span><span class="k">null</span><span class="w"> </span><span class="k">and</span><span class="w"> </span><span class="n">e</span><span class="p">.</span><span class="n">department_id</span><span class="w">  </span><span class="o">=</span><span class="w"> </span><span class="n">d</span><span class="p">.</span><span class="n">department_id</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">------------+----------------+-----------------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="n">last_name</span><span class="w">  </span><span class="o">|</span><span class="w"> </span><span class="n">commission_pct</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">department_name</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">------------+----------------+-----------------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="n">Russell</span><span class="w">    </span><span class="o">|</span><span class="w">           </span><span class="mi">0</span><span class="p">.</span><span class="mi">40</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">Sal</span><span class="w">             </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w"> </span><span class="n">Partners</span><span class="w">   </span><span class="o">|</span><span class="w">           </span><span class="mi">0</span><span class="p">.</span><span class="mi">30</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">Sal</span><span class="w">             </span><span class="o">|</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="n">department_name</span><span class="w"> </span><span class="p">,</span><span class="w"> </span><span class="n">city</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">departments</span><span class="w"> </span><span class="n">d</span><span class="w"> </span><span class="p">,</span><span class="n">locations</span><span class="w"> </span><span class="n">l</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="n">d</span><span class="p">.</span><span class="n">location_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">l</span><span class="p">.</span><span class="n">location_id</span><span class="w"> </span><span class="k">and</span><span class="w"> </span><span class="n">city</span><span class="w"> </span><span class="k">like</span><span class="w"> </span><span class="s1">&#39;_o%&#39;</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">-----------------+---------------------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="n">department_name</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">city</span><span class="w">                </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">-----------------+---------------------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="n">IT</span><span class="w">              </span><span class="o">|</span><span class="w"> </span><span class="n">Southlake</span><span class="w">           </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w"> </span><span class="n">Shi</span><span class="w">             </span><span class="o">|</span><span class="w"> </span><span class="n">South</span><span class="w"> </span><span class="n">San</span><span class="w"> </span><span class="n">Francisco</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="o">#</span><span class="err">查询每个城市的部门个数</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="n">city</span><span class="w"> </span><span class="p">,</span><span class="w"> </span><span class="k">count</span><span class="p">(</span><span class="o">*</span><span class="p">)</span><span class="w"> </span><span class="err">部门个数</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">departments</span><span class="w"> </span><span class="n">d</span><span class="w"> </span><span class="p">,</span><span class="w"> </span><span class="n">locations</span><span class="w"> </span><span class="n">l</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="n">d</span><span class="p">.</span><span class="n">location_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">l</span><span class="p">.</span><span class="n">location_id</span><span class="w"> </span><span class="k">group</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="n">city</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">---------------------+----------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="n">city</span><span class="w">                </span><span class="o">|</span><span class="w"> </span><span class="err">部门个数</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">---------------------+----------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="n">Southlake</span><span class="w">           </span><span class="o">|</span><span class="w">        </span><span class="mi">1</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w"> </span><span class="n">South</span><span class="w"> </span><span class="n">San</span><span class="w"> </span><span class="n">Francisco</span><span class="w"> </span><span class="o">|</span><span class="w">        </span><span class="mi">1</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w"> </span><span class="n">Seattle</span><span class="w">             </span><span class="o">|</span><span class="w">       </span><span class="mi">21</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="n">d</span><span class="p">.</span><span class="n">department_id</span><span class="w"> </span><span class="p">,</span><span class="w"> </span><span class="n">department_name</span><span class="w"> </span><span class="p">,</span><span class="w"> </span><span class="n">d</span><span class="p">.</span><span class="n">manager_id</span><span class="w"> </span><span class="p">,</span><span class="w"> </span><span class="k">min</span><span class="p">(</span><span class="n">salary</span><span class="p">)</span><span class="w"> </span><span class="err">最低工资</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">employees</span><span class="w"> </span><span class="n">e</span><span class="w"> </span><span class="p">,</span><span class="w"> </span><span class="n">departments</span><span class="w"> </span><span class="n">d</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="n">e</span><span class="p">.</span><span class="n">department_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">d</span><span class="p">.</span><span class="n">department_id</span><span class="w"> </span><span class="k">and</span><span class="w"> </span><span class="n">commission_pct</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="k">not</span><span class="w"> </span><span class="k">null</span><span class="w"> </span><span class="k">group</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="n">department_id</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">---------------+-----------------+------------+----------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="n">department_id</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">department_name</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">manager_id</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="err">最低工资</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">---------------+-----------------+------------+----------+
</span><span class="c1"></span><span class="o">|</span><span class="w">            </span><span class="mi">80</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">Sal</span><span class="w">             </span><span class="o">|</span><span class="w">        </span><span class="mi">145</span><span class="w"> </span><span class="o">|</span><span class="w">  </span><span class="mi">6100</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">---------------+-----------------+------------+----------+
</span><span class="c1"></span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w">  </span><span class="k">select</span><span class="w"> </span><span class="n">job_title</span><span class="w"> </span><span class="p">,</span><span class="w"> </span><span class="k">count</span><span class="p">(</span><span class="o">*</span><span class="p">)</span><span class="w"> </span><span class="err">员工个数</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">employees</span><span class="w"> </span><span class="n">e</span><span class="w"> </span><span class="p">,</span><span class="w"> </span><span class="n">jobs</span><span class="w"> </span><span class="n">j</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="n">e</span><span class="p">.</span><span class="n">job_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">j</span><span class="p">.</span><span class="n">job_id</span><span class="w"> </span><span class="k">group</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="n">j</span><span class="p">.</span><span class="n">job_id</span><span class="w"> </span><span class="k">order</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="err">员工个数</span><span class="w"> </span><span class="k">desc</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">---------------------------------+----------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="n">job_title</span><span class="w">                       </span><span class="o">|</span><span class="w"> </span><span class="err">员工个数</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">---------------------------------+----------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="n">Sales</span><span class="w"> </span><span class="n">Representative</span><span class="w">            </span><span class="o">|</span><span class="w">       </span><span class="mi">30</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w"> </span><span class="n">Shipping</span><span class="w"> </span><span class="n">Clerk</span><span class="w">                  </span><span class="o">|</span><span class="w">       </span><span class="mi">20</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="o">#</span><span class="err">三表连接</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="n">last_name</span><span class="w"> </span><span class="p">,</span><span class="w"> </span><span class="n">department_name</span><span class="w"> </span><span class="p">,</span><span class="w"> </span><span class="n">city</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">employees</span><span class="w"> </span><span class="n">e</span><span class="w"> </span><span class="p">,</span><span class="w"> </span><span class="n">departments</span><span class="w"> </span><span class="n">d</span><span class="w"> </span><span class="p">,</span><span class="w"> </span><span class="n">locations</span><span class="w"> </span><span class="n">l</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="n">e</span><span class="p">.</span><span class="n">department_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">d</span><span class="p">.</span><span class="n">department_id</span><span class="w"> </span><span class="k">and</span><span class="w"> </span><span class="n">d</span><span class="p">.</span><span class="n">location_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">l</span><span class="p">.</span><span class="n">location_id</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">-------------+-----------------+---------------------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="n">last_name</span><span class="w">   </span><span class="o">|</span><span class="w"> </span><span class="n">department_name</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">city</span><span class="w">                </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">-------------+-----------------+---------------------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="n">Whalen</span><span class="w">      </span><span class="o">|</span><span class="w"> </span><span class="n">Adm</span><span class="w">             </span><span class="o">|</span><span class="w"> </span><span class="n">Seattle</span><span class="w">             </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w"> </span><span class="n">Hartstein</span><span class="w">   </span><span class="o">|</span><span class="w"> </span><span class="n">Mar</span><span class="w">             </span><span class="o">|</span><span class="w"> </span><span class="n">Toronto</span><span class="w">             </span><span class="o">|</span><span class="w">
</span></code></pre></div><p><strong>注意:如果为表起了别名,则查询的字段就不能使用原来的表名去限定了</strong></p>
<h5 id="sql92标准">sql92标准</h5>
<ol>
<li>等值连接
<ol>
<li>多表等值连接的结果为多表的交集部分</li>
<li>n表连接,至少需要n-1个连接条件</li>
<li>多表的顺序没有要求</li>
<li>一般需要为表其别名</li>
<li>可以搭配前面介绍的所有子句使用,比如排序/筛选/分组</li>
</ol>
</li>
<li>非等值连接</li>
</ol>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="o">#</span><span class="err">非等值连接</span><span class="w"> </span><span class="err">也可以加上排序</span><span class="o">/</span><span class="err">筛选</span><span class="o">/</span><span class="err">分组</span><span class="w">  
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="n">salary</span><span class="w"> </span><span class="p">,</span><span class="w"> </span><span class="n">grade_level</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">employees</span><span class="w"> </span><span class="n">e</span><span class="w"> </span><span class="p">,</span><span class="w"> </span><span class="n">job_grades</span><span class="w"> </span><span class="k">g</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="n">salary</span><span class="w"> </span><span class="k">between</span><span class="w"> </span><span class="n">lower_sal</span><span class="w"> </span><span class="k">and</span><span class="w"> </span><span class="n">highest_sal</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">----------+-------------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="n">salary</span><span class="w">   </span><span class="o">|</span><span class="w"> </span><span class="n">grade_level</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">----------+-------------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="mi">24000</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">E</span><span class="w">           </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w"> </span><span class="mi">17000</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">E</span><span class="w">           </span><span class="o">|</span><span class="w">
</span></code></pre></div><p>​	3.自连接</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="o">#</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w">  </span><span class="k">select</span><span class="w"> </span><span class="n">a</span><span class="p">.</span><span class="n">last_name</span><span class="w"> </span><span class="err">员工名</span><span class="w"> </span><span class="p">,</span><span class="n">b</span><span class="p">.</span><span class="n">last_name</span><span class="w"> </span><span class="err">领导名称</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">employees</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="p">,</span><span class="w"> </span><span class="n">employees</span><span class="w"> </span><span class="n">b</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="n">a</span><span class="p">.</span><span class="n">manager_id</span><span class="w"> </span><span class="o">=</span><span class="n">b</span><span class="p">.</span><span class="n">employee_id</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">-------------+-----------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="err">员工名</span><span class="w">      </span><span class="o">|</span><span class="w"> </span><span class="err">领导名称</span><span class="w">  </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">-------------+-----------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="n">Kochhar</span><span class="w">     </span><span class="o">|</span><span class="w"> </span><span class="n">K_ing</span><span class="w">     </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w"> </span><span class="n">De</span><span class="w"> </span><span class="n">Haan</span><span class="w">     </span><span class="o">|</span><span class="w"> </span><span class="n">K_ing</span><span class="w">     </span><span class="o">|</span><span class="w">
</span></code></pre></div><h5 id="练习一下">练习一下</h5>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="k">max</span><span class="p">(</span><span class="n">salary</span><span class="p">)</span><span class="w"> </span><span class="p">,</span><span class="w"> </span><span class="k">min</span><span class="p">(</span><span class="n">salary</span><span class="p">)</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">employees</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">-------------+-------------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="k">max</span><span class="p">(</span><span class="n">salary</span><span class="p">)</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="k">min</span><span class="p">(</span><span class="n">salary</span><span class="p">)</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">-------------+-------------+
</span><span class="c1"></span><span class="o">|</span><span class="w">    </span><span class="mi">24000</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="o">|</span><span class="w">     </span><span class="mi">2100</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">-------------+-------------+
</span><span class="c1"></span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="n">employee_id</span><span class="w"> </span><span class="p">,</span><span class="w"> </span><span class="n">job_id</span><span class="w"> </span><span class="p">,</span><span class="w"> </span><span class="n">last_name</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">employees</span><span class="w"> </span><span class="k">order</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="n">department_id</span><span class="w"> </span><span class="k">desc</span><span class="w"> </span><span class="p">,</span><span class="w"> </span><span class="n">salary</span><span class="w"> </span><span class="k">asc</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">-------------+------------+-------------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="n">employee_id</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">job_id</span><span class="w">     </span><span class="o">|</span><span class="w"> </span><span class="n">last_name</span><span class="w">   </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">-------------+------------+-------------+
</span><span class="c1"></span><span class="o">|</span><span class="w">         </span><span class="mi">206</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">AC_ACCOUNT</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">Gietz</span><span class="w">       </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w">         </span><span class="mi">205</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">AC_MGR</span><span class="w">     </span><span class="o">|</span><span class="w"> </span><span class="n">Higgins</span><span class="w">     </span><span class="o">|</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="n">job_id</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">employees</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="n">job_id</span><span class="w"> </span><span class="k">like</span><span class="w"> </span><span class="s1">&#39;%a%e%&#39;</span><span class="w"> </span><span class="k">order</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="n">job_id</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">---------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="n">job_id</span><span class="w">  </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">---------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="n">AD_PRES</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w"> </span><span class="n">SA_REP</span><span class="w">  </span><span class="o">|</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="n">substr</span><span class="p">(</span><span class="s1">&#39;aabbcc&#39;</span><span class="p">,</span><span class="mi">3</span><span class="p">)</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">--------------------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="n">substr</span><span class="p">(</span><span class="s1">&#39;aabbcc&#39;</span><span class="p">,</span><span class="mi">3</span><span class="p">)</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">--------------------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="n">bbcc</span><span class="w">               </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">--------------------+
</span><span class="c1"></span><span class="mi">1</span><span class="w"> </span><span class="k">row</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="k">set</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="k">trim</span><span class="p">(</span><span class="w"> </span><span class="s1">&#39;aa&#39;</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="s1">&#39;aaabbbcccaaa&#39;</span><span class="p">)</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">---------------------------------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="k">trim</span><span class="p">(</span><span class="w"> </span><span class="s1">&#39;aa&#39;</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="s1">&#39;aaabbbcccaaa&#39;</span><span class="p">)</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">---------------------------------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="n">abbbccca</span><span class="w">                        </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">---------------------------------+
</span><span class="c1"></span><span class="mi">1</span><span class="w"> </span><span class="k">row</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="k">set</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span><span class="w">
</span></code></pre></div><h5 id="复习一下-1">复习一下</h5>
<p>语法</p>
<p>select 查询列表 from 表 where 筛选条件 order by 排序列表 asc|desc</p>
<p>特点</p>
<p>asc 升序 默认 desc 降序</p>
<p>排序列表 支持 单个字段 多个字段 函数 表达式 别名</p>
<p>order by 位置一般放在查询语句的最后(除了limit语句之外)</p>
<p>常见函数</p>
<p>功能:类似于java中的方法</p>
<p>好处:提高重用性和隐藏实现细节</p>
<p>调用:select 函数名(实参列表) ;</p>
<p>单行函数</p>
<ul>
<li>字符函数 length concat substr substring upper lower instr  replace trim lpad rpad</li>
<li>数学函数 truncate round ceil mod floor rand(获取随机数 0-1)</li>
<li>日期函数 curdate curtime now year month monthname day hour minute second date_format str_to_date <strong>timediff datediff</strong></li>
<li>其他函数 version user database ifnull isnull <strong>md5</strong>(自动将字符加密成md格式密文)</li>
<li>流程控制函数 if case when then else end</li>
</ul>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="n">MD5</span><span class="p">(</span><span class="s1">&#39;lalala123&#39;</span><span class="p">)</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">----------------------------------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="n">MD5</span><span class="p">(</span><span class="s1">&#39;lalala123&#39;</span><span class="p">)</span><span class="w">                 </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">----------------------------------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="mi">24500</span><span class="n">fa6ecaeb8300905727802af3081</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">----------------------------------+
</span><span class="c1"></span><span class="mi">1</span><span class="w"> </span><span class="k">row</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="k">set</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span><span class="w">
</span></code></pre></div><p>流程控制函数</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="k">if</span><span class="p">(</span><span class="err">条件表达式</span><span class="p">,</span><span class="w"> </span><span class="err">表达式</span><span class="mi">1</span><span class="w"> </span><span class="p">,</span><span class="w"> </span><span class="err">表达式</span><span class="mi">2</span><span class="p">)</span><span class="w"> </span><span class="err">如果条件表达式成立</span><span class="p">,</span><span class="w"> </span><span class="err">返回表达式</span><span class="mi">1</span><span class="w"> </span><span class="p">,</span><span class="w"> </span><span class="err">否则返回表达式</span><span class="mi">2</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="k">case</span><span class="w"> </span><span class="err">情况</span><span class="mi">1</span><span class="w"> 
</span><span class="w">
</span><span class="w"></span><span class="k">case</span><span class="w"> </span><span class="err">变量或表达式或字段</span><span class="w">
</span><span class="w">
</span><span class="w">	</span><span class="k">when</span><span class="w"> </span><span class="err">常量</span><span class="mi">1</span><span class="w"> </span><span class="k">then</span><span class="w"> </span><span class="err">值</span><span class="mi">1</span><span class="w">
</span><span class="w">
</span><span class="w">	</span><span class="k">when</span><span class="w"> </span><span class="err">常量</span><span class="mi">2</span><span class="w"> </span><span class="k">then</span><span class="w"> </span><span class="err">值</span><span class="mi">2</span><span class="w">
</span><span class="w">
</span><span class="w">	</span><span class="k">else</span><span class="w"> </span><span class="err">值</span><span class="n">n</span><span class="w">
</span><span class="w">
</span><span class="w"> </span><span class="k">end</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="k">case</span><span class="w"> </span><span class="err">情况</span><span class="mi">2</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="k">case</span><span class="w"> 
</span><span class="w">
</span><span class="w">	</span><span class="k">when</span><span class="w"> </span><span class="err">条件</span><span class="mi">1</span><span class="w"> </span><span class="k">then</span><span class="w"> </span><span class="err">值</span><span class="mi">1</span><span class="w">
</span><span class="w">
</span><span class="w">	</span><span class="k">when</span><span class="w"> </span><span class="err">条件</span><span class="mi">2</span><span class="w"> </span><span class="k">then</span><span class="w"> </span><span class="err">值</span><span class="mi">2</span><span class="w">
</span><span class="w">
</span><span class="w">	</span><span class="k">else</span><span class="w"> </span><span class="err">值</span><span class="n">n</span><span class="w">
</span><span class="w">
</span><span class="w"> </span><span class="k">end</span><span class="w">
</span></code></pre></div><h5 id="分组函数-1">分组函数</h5>
<p>分类</p>
<p>max min avg sum count</p>
<p>特点</p>
<p>select max(字段) from 表名</p>
<p>支持的类型</p>
<p><strong>sum 和 avg 一般用于处理数值型</strong></p>
<p><strong>max min count 可以处理任何数据类型</strong></p>
<p><strong>以上分组函数都忽略null</strong></p>
<p><strong>都可以搭配distinct使用,实现去重的统计</strong></p>
<p>select sum(distinct 字段) from 表 ;</p>
<p>count函数</p>
<p>count(字段) 统计该字段非空值的个数</p>
<p>count(*) 统计结果集的行数</p>
<p>count(1) 统计结果集的行数</p>
<p>效率上:</p>
<p>myisam 存储引擎 count(*) 最高</p>
<p>innodb 存储引擎 count(*)和count(1) 效率&gt;count(字段)</p>
<p>和分组函数一同查询的字段,要求是group by后面出现的字段</p>
<h5 id="分组查询-1">分组查询</h5>
<p>select 分组函数, 分组后的字段 from 表 where 筛选条件 group by 分组的字段 having 分组后的筛选 order by 排序列表</p>
<p>分组前筛选 where 原始表 group by的前面</p>
<p>分组后筛选 having 分组后的结果 group by的后面</p>
<h5 id="连接查询-1">连接查询</h5>
<h5 id="含义">含义</h5>
<p>当查询中涉及到了多个表的字段,需要使用多表连接</p>
<p>select 字段1 , 字段2 from 表1 , 表2</p>
<p>笛卡儿乘积:当查询多个表时,没有添加有效的连接条件,导致多个表所有行实现完全连接</p>
<p>如何解决:添加有效的连接条件</p>
<h5 id="分类">分类</h5>
<ul>
<li>按年代分类
<ul>
<li>sql92
<ul>
<li>等值</li>
<li>非等值</li>
<li>自连接</li>
<li>也支持一部分外连接 用于oracle sqlserver , mysql不支持</li>
</ul>
</li>
<li>sql99 [推荐使用]
<ul>
<li>内连接
<ul>
<li>等值</li>
<li>非等值</li>
<li>自连接</li>
</ul>
</li>
<li>外连接
<ul>
<li>左外</li>
<li>右外</li>
<li>全外(mysql 不支持)</li>
</ul>
</li>
<li>交叉连接</li>
</ul>
</li>
</ul>
</li>
</ul>
<h5 id="等值连接">等值连接:</h5>
<p>select 查询列表 from 表1 别名, 表2 别名 where 表1.key = 表2.key and 筛选条件 group by 分组字段 having 分组后的筛选 order by 排序字段</p>
<p>特点:</p>
<ul>
<li>一般为表起别名</li>
<li>多表顺序可以调换</li>
<li>n表连接至少需要n-1个连接条件</li>
<li>等值连接的结果是多表的交集部分</li>
</ul>
<h5 id="非等值连接">非等值连接</h5>
<p>select 查询列表 from 表1 别名, 表2 别名 where 非等值连接条件 and 筛选条件 group by 分组字段 having 分组后的筛选 order by 排序字段</p>
<h5 id="自连接">自连接</h5>
<p>select 查询列表 from 表 别名1, 表 别名2 where 等值连接条件 and 筛选条件 group by 分组字段 having 分组后的筛选 order by 排序字段</p>
<p>练习一下</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="n">last_name</span><span class="w"> </span><span class="p">,</span><span class="w"> </span><span class="n">e</span><span class="p">.</span><span class="n">department_id</span><span class="w"> </span><span class="p">,</span><span class="w"> </span><span class="n">department_name</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">employees</span><span class="w"> </span><span class="n">e</span><span class="w"> </span><span class="p">,</span><span class="w"> </span><span class="n">departments</span><span class="w"> </span><span class="n">d</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="n">e</span><span class="p">.</span><span class="n">department_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">d</span><span class="p">.</span><span class="n">department_id</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">-------------+---------------+-----------------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="n">last_name</span><span class="w">   </span><span class="o">|</span><span class="w"> </span><span class="n">department_id</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">department_name</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">-------------+---------------+-----------------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="n">Whalen</span><span class="w">      </span><span class="o">|</span><span class="w">            </span><span class="mi">10</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">Adm</span><span class="w">             </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w"> </span><span class="n">Hartstein</span><span class="w">   </span><span class="o">|</span><span class="w">            </span><span class="mi">20</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">Mar</span><span class="w">             </span><span class="o">|</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="n">job_id</span><span class="w"> </span><span class="p">,</span><span class="w"> </span><span class="n">d</span><span class="p">.</span><span class="n">location_id</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">employees</span><span class="w"> </span><span class="n">e</span><span class="w"> </span><span class="p">,</span><span class="w"> </span><span class="n">departments</span><span class="w"> </span><span class="n">d</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="n">d</span><span class="p">.</span><span class="n">department_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">90</span><span class="w"> </span><span class="k">and</span><span class="w"> </span><span class="n">e</span><span class="p">.</span><span class="n">department_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">d</span><span class="p">.</span><span class="n">department_id</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">---------+-------------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="n">job_id</span><span class="w">  </span><span class="o">|</span><span class="w"> </span><span class="n">location_id</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">---------+-------------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="n">AD_PRES</span><span class="w"> </span><span class="o">|</span><span class="w">        </span><span class="mi">1700</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w"> </span><span class="n">AD_VP</span><span class="w">   </span><span class="o">|</span><span class="w">        </span><span class="mi">1700</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="n">last_name</span><span class="w"> </span><span class="p">,</span><span class="w"> </span><span class="n">department_name</span><span class="w"> </span><span class="p">,</span><span class="w"> </span><span class="n">d</span><span class="p">.</span><span class="n">location_id</span><span class="w"> </span><span class="p">,</span><span class="w"> </span><span class="n">city</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">employees</span><span class="w"> </span><span class="n">e</span><span class="w"> </span><span class="p">,</span><span class="w"> </span><span class="n">departments</span><span class="w"> </span><span class="n">d</span><span class="w"> </span><span class="p">,</span><span class="n">locations</span><span class="w"> </span><span class="n">l</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="n">e</span><span class="p">.</span><span class="n">department_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">d</span><span class="p">.</span><span class="n">department_id</span><span class="w"> </span><span class="k">and</span><span class="w"> </span><span class="n">d</span><span class="p">.</span><span class="n">location_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">l</span><span class="p">.</span><span class="n">location_id</span><span class="w"> </span><span class="k">and</span><span class="w"> </span><span class="n">commission_pct</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="k">not</span><span class="w"> </span><span class="k">null</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">------------+-----------------+-------------+--------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="n">last_name</span><span class="w">  </span><span class="o">|</span><span class="w"> </span><span class="n">department_name</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">location_id</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">city</span><span class="w">   </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">------------+-----------------+-------------+--------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="n">Russell</span><span class="w">    </span><span class="o">|</span><span class="w"> </span><span class="n">Sal</span><span class="w">             </span><span class="o">|</span><span class="w">        </span><span class="mi">2500</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">Oxford</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w"> </span><span class="n">Partners</span><span class="w">   </span><span class="o">|</span><span class="w"> </span><span class="n">Sal</span><span class="w">             </span><span class="o">|</span><span class="w">        </span><span class="mi">2500</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">Oxford</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="n">last_name</span><span class="w"> </span><span class="p">,</span><span class="w"> </span><span class="n">job_id</span><span class="w"> </span><span class="p">,</span><span class="w"> </span><span class="n">d</span><span class="p">.</span><span class="n">department_id</span><span class="w"> </span><span class="p">,</span><span class="w"> </span><span class="n">department_name</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">employees</span><span class="w"> </span><span class="n">e</span><span class="w"> </span><span class="p">,</span><span class="n">departments</span><span class="w"> </span><span class="n">d</span><span class="w"> </span><span class="p">,</span><span class="w"> </span><span class="n">locations</span><span class="w"> </span><span class="n">l</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="n">e</span><span class="p">.</span><span class="n">department_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">d</span><span class="p">.</span><span class="n">department_id</span><span class="w"> </span><span class="k">and</span><span class="w"> </span><span class="n">d</span><span class="p">.</span><span class="n">location_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">l</span><span class="p">.</span><span class="n">location_id</span><span class="w"> </span><span class="k">and</span><span class="w"> </span><span class="n">city</span><span class="w"> </span><span class="o">=</span><span class="s1">&#39;Toronto&#39;</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">-----------+--------+---------------+-----------------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="n">last_name</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">job_id</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">department_id</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">department_name</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">-----------+--------+---------------+-----------------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="n">Hartstein</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">MK_MAN</span><span class="w"> </span><span class="o">|</span><span class="w">            </span><span class="mi">20</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">Mar</span><span class="w">             </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w"> </span><span class="n">Fay</span><span class="w">       </span><span class="o">|</span><span class="w"> </span><span class="n">MK_REP</span><span class="w"> </span><span class="o">|</span><span class="w">            </span><span class="mi">20</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">Mar</span><span class="w">             </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">-----------+--------+---------------+-----------------+\
</span><span class="c1"></span><span class="w">
</span><span class="w"></span><span class="o">#</span><span class="err">查询每个工种</span><span class="w"> </span><span class="err">每个部门的部门名</span><span class="w"> </span><span class="err">工种名</span><span class="w"> </span><span class="err">和最低工资</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="n">department_name</span><span class="w"> </span><span class="p">,</span><span class="w"> </span><span class="n">job_title</span><span class="w"> </span><span class="p">,</span><span class="k">min</span><span class="p">(</span><span class="n">salary</span><span class="p">)</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">employees</span><span class="w"> </span><span class="n">e</span><span class="w"> </span><span class="p">,</span><span class="w"> </span><span class="n">departments</span><span class="w"> </span><span class="n">d</span><span class="p">,</span><span class="n">jobs</span><span class="w"> </span><span class="n">j</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="n">e</span><span class="p">.</span><span class="n">department_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">d</span><span class="p">.</span><span class="n">department_id</span><span class="w"> </span><span class="k">and</span><span class="w"> </span><span class="n">j</span><span class="p">.</span><span class="n">job_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">e</span><span class="p">.</span><span class="n">job_id</span><span class="w"> </span><span class="k">group</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="n">j</span><span class="p">.</span><span class="n">job_title</span><span class="w"> </span><span class="p">,</span><span class="w"> </span><span class="n">d</span><span class="p">.</span><span class="n">department_name</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">-----------------+---------------------------------+-------------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="n">department_name</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">job_title</span><span class="w">                       </span><span class="o">|</span><span class="w"> </span><span class="k">min</span><span class="p">(</span><span class="n">salary</span><span class="p">)</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">-----------------+---------------------------------+-------------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="n">Acc</span><span class="w">             </span><span class="o">|</span><span class="w"> </span><span class="k">Public</span><span class="w"> </span><span class="n">Accountant</span><span class="w">               </span><span class="o">|</span><span class="w">     </span><span class="mi">8300</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w"> </span><span class="n">Acc</span><span class="w">             </span><span class="o">|</span><span class="w"> </span><span class="n">Accounting</span><span class="w"> </span><span class="n">Manager</span><span class="w">              </span><span class="o">|</span><span class="w">    </span><span class="mi">12000</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="o">#</span><span class="err">查询每个国家下的部门个数大于</span><span class="mi">2</span><span class="err">的国家编号</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w">  </span><span class="k">select</span><span class="w"> </span><span class="n">country_id</span><span class="p">,</span><span class="k">count</span><span class="p">(</span><span class="o">*</span><span class="p">)</span><span class="w"> </span><span class="err">部门个数</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">locations</span><span class="w"> </span><span class="n">l</span><span class="w"> </span><span class="p">,</span><span class="w"> </span><span class="n">departments</span><span class="w"> </span><span class="n">d</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="n">l</span><span class="p">.</span><span class="n">location_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">d</span><span class="p">.</span><span class="n">location_id</span><span class="w"> </span><span class="k">group</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="n">country_id</span><span class="w"> </span><span class="k">having</span><span class="w"> </span><span class="err">部门个数</span><span class="o">&gt;</span><span class="mi">2</span><span class="w">  </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">------------+----------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="n">country_id</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="err">部门个数</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">------------+----------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="n">US</span><span class="w">         </span><span class="o">|</span><span class="w">       </span><span class="mi">23</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">------------+----------+
</span><span class="c1"></span><span class="w">
</span><span class="w"></span><span class="o">#</span><span class="err">选择指定员工的姓名</span><span class="w"> </span><span class="err">员工号</span><span class="w"> </span><span class="err">以及他的管理者的姓名和员工号</span><span class="w"> </span><span class="err">结果类似于下面的格式</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="n">a</span><span class="p">.</span><span class="n">last_name</span><span class="w"> </span><span class="n">employees</span><span class="w"> </span><span class="p">,</span><span class="w"> </span><span class="n">a</span><span class="p">.</span><span class="n">employee_id</span><span class="w"> </span><span class="n">Emp</span><span class="w"> </span><span class="p">,</span><span class="w"> </span><span class="n">b</span><span class="p">.</span><span class="n">last_name</span><span class="w"> </span><span class="n">manager</span><span class="w"> </span><span class="p">,</span><span class="w"> </span><span class="n">b</span><span class="p">.</span><span class="n">employee_id</span><span class="w"> </span><span class="n">Mgr</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">employees</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="p">,</span><span class="w"> </span><span class="n">employees</span><span class="w"> </span><span class="n">b</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="n">a</span><span class="p">.</span><span class="n">manager_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">b</span><span class="p">.</span><span class="n">employee_id</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">-------------+-----+-----------+-----+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="n">employees</span><span class="w">   </span><span class="o">|</span><span class="w"> </span><span class="n">Emp</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">manager</span><span class="w">   </span><span class="o">|</span><span class="w"> </span><span class="n">Mgr</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">-------------+-----+-----------+-----+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="n">Kochhar</span><span class="w">     </span><span class="o">|</span><span class="w"> </span><span class="mi">101</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">K_ing</span><span class="w">     </span><span class="o">|</span><span class="w"> </span><span class="mi">100</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w"> </span><span class="n">De</span><span class="w"> </span><span class="n">Haan</span><span class="w">     </span><span class="o">|</span><span class="w"> </span><span class="mi">102</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">K_ing</span><span class="w">     </span><span class="o">|</span><span class="w"> </span><span class="mi">100</span><span class="w"> </span><span class="o">|</span><span class="w">
</span></code></pre></div><h5 id="sql99语法">sql99语法</h5>
<p>语法:</p>
<p>select 查询列表 from 表1 别名 连接类型 join 表2 别名 on 连接条件 where 筛选条件 group by 分组条件 having 筛选条件 order by 排序列表</p>
<p>分类:</p>
<p>内连接: inner</p>
<p>外连接:</p>
<p>​	左外:left outer</p>
<p>​	右外:right outer</p>
<p>​	全外:full outer</p>
<p>交叉连接 :cross</p>
<h5 id="内连接">内连接</h5>
<p>select 查询列表 from 表1 别名 inner join 表2 别名 on 连接条件 where 筛选条件 &hellip;</p>
<p>分类:</p>
<ul>
<li>等值连接</li>
<li>非等值连接</li>
<li>自连接</li>
</ul>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="o">#</span><span class="err">调换顺序是可以的</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w">  </span><span class="k">select</span><span class="w"> </span><span class="n">last_name</span><span class="w"> </span><span class="p">,</span><span class="w"> </span><span class="n">department_name</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">employees</span><span class="w"> </span><span class="n">e</span><span class="w"> </span><span class="k">inner</span><span class="w"> </span><span class="k">join</span><span class="w"> </span><span class="n">departments</span><span class="w"> </span><span class="n">d</span><span class="w"> </span><span class="k">on</span><span class="w"> </span><span class="n">e</span><span class="p">.</span><span class="n">department_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">d</span><span class="p">.</span><span class="n">department_id</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">-------------+-----------------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="n">last_name</span><span class="w">   </span><span class="o">|</span><span class="w"> </span><span class="n">department_name</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">-------------+-----------------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="n">Whalen</span><span class="w">      </span><span class="o">|</span><span class="w"> </span><span class="n">Adm</span><span class="w">             </span><span class="o">|</span><span class="w">
</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="n">last_name</span><span class="w"> </span><span class="p">,</span><span class="w"> </span><span class="n">job_title</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">employees</span><span class="w"> </span><span class="n">e</span><span class="w"> </span><span class="k">inner</span><span class="w"> </span><span class="k">join</span><span class="w"> </span><span class="n">jobs</span><span class="w"> </span><span class="n">j</span><span class="w"> </span><span class="k">on</span><span class="w"> </span><span class="n">e</span><span class="p">.</span><span class="n">job_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">j</span><span class="p">.</span><span class="n">job_id</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="n">last_name</span><span class="w"> </span><span class="k">like</span><span class="w"> </span><span class="s1">&#39;%e%&#39;</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">-------------+---------------------------------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="n">last_name</span><span class="w">   </span><span class="o">|</span><span class="w"> </span><span class="n">job_title</span><span class="w">                       </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">-------------+---------------------------------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="n">De</span><span class="w"> </span><span class="n">Haan</span><span class="w">     </span><span class="o">|</span><span class="w"> </span><span class="n">Administration</span><span class="w"> </span><span class="n">Vice</span><span class="w"> </span><span class="n">President</span><span class="w">   </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w"> </span><span class="n">Ernst</span><span class="w">       </span><span class="o">|</span><span class="w"> </span><span class="n">Programmer</span><span class="w">                      </span><span class="o">|</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="n">last_name</span><span class="w"> </span><span class="p">,</span><span class="w"> </span><span class="n">job_title</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">employees</span><span class="w"> </span><span class="n">e</span><span class="w"> </span><span class="k">inner</span><span class="w"> </span><span class="k">join</span><span class="w"> </span><span class="n">jobs</span><span class="w"> </span><span class="n">j</span><span class="w"> </span><span class="k">on</span><span class="w"> </span><span class="n">e</span><span class="p">.</span><span class="n">job_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">j</span><span class="p">.</span><span class="n">job_id</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="n">e</span><span class="p">.</span><span class="n">last_name</span><span class="w"> </span><span class="k">like</span><span class="w"> </span><span class="s1">&#39;%e%&#39;</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">-------------+---------------------------------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="n">last_name</span><span class="w">   </span><span class="o">|</span><span class="w"> </span><span class="n">job_title</span><span class="w">                       </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">-------------+---------------------------------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="n">De</span><span class="w"> </span><span class="n">Haan</span><span class="w">     </span><span class="o">|</span><span class="w"> </span><span class="n">Administration</span><span class="w"> </span><span class="n">Vice</span><span class="w"> </span><span class="n">President</span><span class="w">   </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w"> </span><span class="n">Ernst</span><span class="w">       </span><span class="o">|</span><span class="w"> </span><span class="n">Programmer</span><span class="w">                      </span><span class="o">|</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="o">#</span><span class="err">查询部门个数</span><span class="o">&gt;</span><span class="mi">3</span><span class="err">的城市名和部门个数</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="n">city</span><span class="w"> </span><span class="p">,</span><span class="w"> </span><span class="k">count</span><span class="p">(</span><span class="o">*</span><span class="p">)</span><span class="w"> </span><span class="err">部门个数</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">departments</span><span class="w"> </span><span class="n">d</span><span class="w"> </span><span class="k">join</span><span class="w"> </span><span class="n">locations</span><span class="w"> </span><span class="n">l</span><span class="w"> </span><span class="k">on</span><span class="w"> </span><span class="n">d</span><span class="p">.</span><span class="n">location_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">l</span><span class="p">.</span><span class="n">location_id</span><span class="w"> </span><span class="k">group</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="n">l</span><span class="p">.</span><span class="n">location_id</span><span class="w"> </span><span class="k">having</span><span class="w"> </span><span class="err">部门个数</span><span class="o">&gt;</span><span class="mi">3</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">---------+----------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="n">city</span><span class="w">    </span><span class="o">|</span><span class="w"> </span><span class="err">部门个数</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">---------+----------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="n">Seattle</span><span class="w"> </span><span class="o">|</span><span class="w">       </span><span class="mi">21</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">---------+----------+
</span><span class="c1"></span><span class="w">
</span><span class="w"></span><span class="o">#</span><span class="err">查询哪个部门的员工个数</span><span class="o">&gt;</span><span class="mi">3</span><span class="err">的部门名和员工个数</span><span class="p">,</span><span class="err">并按个数降序</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w">  </span><span class="k">select</span><span class="w"> </span><span class="n">department_name</span><span class="w"> </span><span class="p">,</span><span class="w"> </span><span class="k">count</span><span class="p">(</span><span class="o">*</span><span class="p">)</span><span class="w"> </span><span class="err">员工个数</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">departments</span><span class="w"> </span><span class="n">d</span><span class="w"> </span><span class="k">inner</span><span class="w"> </span><span class="k">join</span><span class="w"> </span><span class="n">employees</span><span class="w"> </span><span class="n">e</span><span class="w"> </span><span class="k">on</span><span class="w"> </span><span class="n">e</span><span class="p">.</span><span class="n">department_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">d</span><span class="p">.</span><span class="n">department_id</span><span class="w"> </span><span class="k">group</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="n">e</span><span class="p">.</span><span class="n">department_id</span><span class="w"> </span><span class="k">having</span><span class="w"> </span><span class="k">count</span><span class="p">(</span><span class="o">*</span><span class="p">)</span><span class="o">&gt;</span><span class="mi">3</span><span class="w"> </span><span class="k">order</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="k">count</span><span class="p">(</span><span class="o">*</span><span class="p">)</span><span class="w"> </span><span class="k">desc</span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">-----------------+----------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="n">department_name</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="err">员工个数</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">-----------------+----------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="n">Shi</span><span class="w">             </span><span class="o">|</span><span class="w">       </span><span class="mi">45</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w"> </span><span class="n">Sal</span><span class="w">             </span><span class="o">|</span><span class="w">       </span><span class="mi">34</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w"> </span><span class="n">Pur</span><span class="w">             </span><span class="o">|</span><span class="w">        </span><span class="mi">6</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="o">#</span><span class="err">多表连接</span><span class="w"> </span><span class="err">是有顺序的</span><span class="w"> </span><span class="err">第一个表和第二个表在连接的时候形成了新的表</span><span class="w"> </span><span class="err">然后新的表里的字段和第三个表里的字段再连接</span><span class="w"> </span><span class="err">所以是有顺序之分的</span><span class="w"> </span><span class="err">这个和两表连接有差别</span><span class="w"> 
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="n">last_name</span><span class="w"> </span><span class="p">,</span><span class="w"> </span><span class="n">department_name</span><span class="w"> </span><span class="p">,</span><span class="w"> </span><span class="n">job_title</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">employees</span><span class="w"> </span><span class="n">e</span><span class="w"> </span><span class="k">join</span><span class="w"> </span><span class="n">departments</span><span class="w"> </span><span class="n">d</span><span class="w"> </span><span class="k">on</span><span class="w"> </span><span class="n">e</span><span class="p">.</span><span class="n">department_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">d</span><span class="p">.</span><span class="n">department_id</span><span class="w"> </span><span class="k">join</span><span class="w"> </span><span class="n">jobs</span><span class="w"> </span><span class="n">j</span><span class="w"> </span><span class="k">on</span><span class="w"> </span><span class="n">j</span><span class="p">.</span><span class="n">job_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">e</span><span class="p">.</span><span class="n">job_id</span><span class="w"> </span><span class="k">order</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="n">department_name</span><span class="w"> </span><span class="k">desc</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">-------------+-----------------+---------------------------------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="n">last_name</span><span class="w">   </span><span class="o">|</span><span class="w"> </span><span class="n">department_name</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">job_title</span><span class="w">                       </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">-------------+-----------------+---------------------------------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="n">Taylor</span><span class="w">      </span><span class="o">|</span><span class="w"> </span><span class="n">Shi</span><span class="w">             </span><span class="o">|</span><span class="w"> </span><span class="n">Shipping</span><span class="w"> </span><span class="n">Clerk</span><span class="w">                  </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w"> </span><span class="n">Fleaur</span><span class="w">      </span><span class="o">|</span><span class="w"> </span><span class="n">Shi</span><span class="w">             </span><span class="o">|</span><span class="w"> </span><span class="n">Shipping</span><span class="w"> </span><span class="n">Clerk</span><span class="w">                  </span><span class="o">|</span><span class="w">
</span></code></pre></div><p>特点:</p>
<ul>
<li>添加排序/分组/筛选</li>
<li>inner可以省略</li>
<li>筛选条件放在where后面 , 连接条件放在on后面, 提高分离性, 便于阅读</li>
<li>inner join等值连接和sql92中的等值连接效果是一样的,都是查询多表的交集</li>
</ul>
<h5 id="非等值连接-1">非等值连接</h5>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="o">#</span><span class="err">非等值连接</span><span class="w"> 
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="n">salary</span><span class="w"> </span><span class="p">,</span><span class="w"> </span><span class="n">grade_level</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">employees</span><span class="w"> </span><span class="n">e</span><span class="w"> </span><span class="k">join</span><span class="w"> </span><span class="n">job_grades</span><span class="w"> </span><span class="k">g</span><span class="w"> </span><span class="k">on</span><span class="w"> </span><span class="n">e</span><span class="p">.</span><span class="n">salary</span><span class="w"> </span><span class="k">between</span><span class="w"> </span><span class="k">g</span><span class="p">.</span><span class="n">lower_sal</span><span class="w"> </span><span class="k">and</span><span class="w"> </span><span class="k">g</span><span class="p">.</span><span class="n">highest_sal</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">----------+-------------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="n">salary</span><span class="w">   </span><span class="o">|</span><span class="w"> </span><span class="n">grade_level</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">----------+-------------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="mi">24000</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">E</span><span class="w">           </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w"> </span><span class="mi">17000</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">E</span><span class="w">           </span><span class="o">|</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="o">#</span><span class="err">查询工资级别的个数</span><span class="o">&gt;</span><span class="mi">2</span><span class="err">并且按工资级别降序</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="k">count</span><span class="p">(</span><span class="o">*</span><span class="p">)</span><span class="w"> </span><span class="err">级别个数</span><span class="w"> </span><span class="p">,</span><span class="w"> </span><span class="n">grade_level</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">employees</span><span class="w"> </span><span class="n">e</span><span class="w"> </span><span class="k">join</span><span class="w"> </span><span class="n">job_grades</span><span class="w"> </span><span class="k">g</span><span class="w"> </span><span class="k">on</span><span class="w"> </span><span class="n">e</span><span class="p">.</span><span class="n">salary</span><span class="w"> </span><span class="k">between</span><span class="w"> </span><span class="k">g</span><span class="p">.</span><span class="n">lower_sal</span><span class="w"> </span><span class="k">and</span><span class="w"> </span><span class="k">g</span><span class="p">.</span><span class="n">highest_sal</span><span class="w"> </span><span class="k">group</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="k">g</span><span class="p">.</span><span class="n">grade_level</span><span class="w"> </span><span class="k">having</span><span class="w"> </span><span class="err">级别个数</span><span class="o">&gt;</span><span class="mi">2</span><span class="w"> </span><span class="k">order</span><span class="w"> </span><span class="k">by</span><span class="w">  </span><span class="k">g</span><span class="p">.</span><span class="n">grade_level</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">----------+-------------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="err">级别个数</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">grade_level</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">----------+-------------+
</span><span class="c1"></span><span class="o">|</span><span class="w">       </span><span class="mi">24</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">A</span><span class="w">           </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w">       </span><span class="mi">26</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">B</span><span class="w">           </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w">       </span><span class="mi">38</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="k">C</span><span class="w">           </span><span class="o">|</span><span class="w">
</span></code></pre></div><h5 id="自连接-1">自连接</h5>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="o">#</span><span class="err">自连接</span><span class="w">
</span><span class="w"></span><span class="o">#</span><span class="err">查询员工姓名和他的领导的姓名</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="n">a</span><span class="p">.</span><span class="n">last_name</span><span class="w"> </span><span class="p">,</span><span class="w"> </span><span class="n">b</span><span class="p">.</span><span class="n">last_name</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">employees</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="k">join</span><span class="w"> </span><span class="n">employees</span><span class="w"> </span><span class="n">b</span><span class="w"> </span><span class="k">on</span><span class="w"> </span><span class="n">a</span><span class="p">.</span><span class="n">manager_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">b</span><span class="p">.</span><span class="n">employee_id</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">-------------+-----------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="n">last_name</span><span class="w">   </span><span class="o">|</span><span class="w"> </span><span class="n">last_name</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">-------------+-----------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="n">Kochhar</span><span class="w">     </span><span class="o">|</span><span class="w"> </span><span class="n">K_ing</span><span class="w">     </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w"> </span><span class="n">De</span><span class="w"> </span><span class="n">Haan</span><span class="w">     </span><span class="o">|</span><span class="w"> </span><span class="n">K_ing</span><span class="w">     </span><span class="o">|</span><span class="w">
</span></code></pre></div><h5 id="外连接">外连接</h5>
<h5 id="应用场景">应用场景</h5>
<p>用于查询一个表中有,另一个表中没有的记录</p>
<p>特点</p>
<ol>
<li>外连接的查询结果为主表中的所有记录
<ol>
<li>如果从表中有和他匹配的,则显示匹配的值</li>
<li>如果从表中没有和他匹配的,则显示null</li>
<li>外连接查询结果=内连接结果+主表中有而从表中没有的记录</li>
</ol>
</li>
<li>左外连接,left join左边的是主表</li>
<li>右外连接,right join右边的是主表</li>
<li>交换两表的顺序和关键字,可以实现同样的结果</li>
</ol>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="o">#</span><span class="err">查询没有男朋友的女神名</span><span class="w">
</span><span class="w"></span><span class="o">#</span><span class="err">这样的话就是内连接</span><span class="w"> </span><span class="err">内连接是取的交集</span><span class="w"> </span><span class="err">没有用查不到</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="n">name</span><span class="p">,</span><span class="n">b</span><span class="p">.</span><span class="n">id</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">beauty</span><span class="w"> </span><span class="k">g</span><span class="w"> </span><span class="k">join</span><span class="w"> </span><span class="n">boys</span><span class="w"> </span><span class="n">b</span><span class="w"> </span><span class="k">on</span><span class="w"> </span><span class="k">g</span><span class="p">.</span><span class="n">boyfriend_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">b</span><span class="p">.</span><span class="n">id</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">------------+----+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="n">name</span><span class="w">       </span><span class="o">|</span><span class="w"> </span><span class="n">id</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">------------+----+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="n">Angelababy</span><span class="w"> </span><span class="o">|</span><span class="w">  </span><span class="mi">3</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w"> </span><span class="err">热巴</span><span class="w">       </span><span class="o">|</span><span class="w">  </span><span class="mi">2</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="o">#</span><span class="err">这样的话就是外连接</span><span class="w"> </span><span class="err">外连接全取了</span><span class="w"> </span><span class="err">要加筛选条件</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="n">name</span><span class="p">,</span><span class="n">b</span><span class="p">.</span><span class="n">id</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">beauty</span><span class="w"> </span><span class="k">g</span><span class="w"> </span><span class="k">left</span><span class="w"> </span><span class="k">join</span><span class="w"> </span><span class="n">boys</span><span class="w"> </span><span class="n">b</span><span class="w"> </span><span class="k">on</span><span class="w"> </span><span class="k">g</span><span class="p">.</span><span class="n">boyfriend_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">b</span><span class="p">.</span><span class="n">id</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">------------+------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="n">name</span><span class="w">       </span><span class="o">|</span><span class="w"> </span><span class="n">id</span><span class="w">   </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">------------+------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="err">柳岩</span><span class="w">       </span><span class="o">|</span><span class="w"> </span><span class="k">NULL</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w"> </span><span class="err">苍老师</span><span class="w">     </span><span class="o">|</span><span class="w"> </span><span class="k">NULL</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w"> </span><span class="n">Angelababy</span><span class="w"> </span><span class="o">|</span><span class="w">    </span><span class="mi">3</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="o">#</span><span class="err">这样没错</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="n">name</span><span class="p">,</span><span class="n">b</span><span class="p">.</span><span class="n">id</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">beauty</span><span class="w"> </span><span class="k">g</span><span class="w"> </span><span class="k">left</span><span class="w"> </span><span class="k">join</span><span class="w"> </span><span class="n">boys</span><span class="w"> </span><span class="n">b</span><span class="w"> </span><span class="k">on</span><span class="w"> </span><span class="k">g</span><span class="p">.</span><span class="n">boyfriend_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">b</span><span class="p">.</span><span class="n">id</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="n">b</span><span class="p">.</span><span class="n">id</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="k">null</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">--------+------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="n">name</span><span class="w">   </span><span class="o">|</span><span class="w"> </span><span class="n">id</span><span class="w">   </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">--------+------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="err">柳岩</span><span class="w">   </span><span class="o">|</span><span class="w"> </span><span class="k">NULL</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w"> </span><span class="err">苍老师</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="k">NULL</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="o">#</span><span class="err">查询那个部门没有员工</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="n">d</span><span class="p">.</span><span class="n">department_id</span><span class="w"> </span><span class="p">,</span><span class="n">department_name</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">departments</span><span class="w"> </span><span class="n">d</span><span class="w"> </span><span class="k">left</span><span class="w"> </span><span class="k">join</span><span class="w"> </span><span class="n">employees</span><span class="w"> </span><span class="n">e</span><span class="w"> </span><span class="k">on</span><span class="w"> </span><span class="n">d</span><span class="p">.</span><span class="n">department_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">e</span><span class="p">.</span><span class="n">department_id</span><span class="w">  </span><span class="k">where</span><span class="w"> </span><span class="n">e</span><span class="p">.</span><span class="n">department_id</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="k">null</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">---------------+-----------------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="n">department_id</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">department_name</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">---------------+-----------------+
</span><span class="c1"></span><span class="o">|</span><span class="w">           </span><span class="mi">120</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">Tre</span><span class="w">             </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w">           </span><span class="mi">130</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">Cor</span><span class="w">             </span><span class="o">|</span><span class="w">
</span></code></pre></div><h5 id="全外连接-好像不支持-全外连接内连接的结果表1中有但表2没有的表2中有但表1没有的">全外连接 好像不支持 全外连接=内连接的结果+表1中有但表2没有的+表2中有但表1没有的</h5>
<h5 id="交叉连接">交叉连接</h5>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="o">#</span><span class="err">交叉做</span><span class="w"> </span><span class="err">笛卡尔乘积</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w">  </span><span class="k">select</span><span class="w"> </span><span class="n">beauty</span><span class="p">.</span><span class="o">*</span><span class="w"> </span><span class="p">,</span><span class="w"> </span><span class="n">boys</span><span class="p">.</span><span class="o">*</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">beauty</span><span class="w"> </span><span class="k">cross</span><span class="w"> </span><span class="k">join</span><span class="w"> </span><span class="n">boys</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">----+------------+------+---------------------+-------------+--------------+--------------+----+---------+--------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="n">id</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">name</span><span class="w">       </span><span class="o">|</span><span class="w"> </span><span class="n">sex</span><span class="w">  </span><span class="o">|</span><span class="w"> </span><span class="n">borndate</span><span class="w">            </span><span class="o">|</span><span class="w"> </span><span class="n">phone</span><span class="w">       </span><span class="o">|</span><span class="w"> </span><span class="n">photo</span><span class="w">        </span><span class="o">|</span><span class="w"> </span><span class="n">boyfriend_id</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">id</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">boyName</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">userCP</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">----+------------+------+---------------------+-------------+--------------+--------------+----+---------+--------+
</span><span class="c1"></span><span class="o">|</span><span class="w">  </span><span class="mi">1</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="err">柳岩</span><span class="w">       </span><span class="o">|</span><span class="w"> </span><span class="err">女</span><span class="w">   </span><span class="o">|</span><span class="w"> </span><span class="mi">1988</span><span class="o">-</span><span class="mi">02</span><span class="o">-</span><span class="mi">03</span><span class="w"> </span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="mi">18209876577</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="k">NULL</span><span class="w">         </span><span class="o">|</span><span class="w">            </span><span class="mi">8</span><span class="w"> </span><span class="o">|</span><span class="w">  </span><span class="mi">4</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="err">段誉</span><span class="w">    </span><span class="o">|</span><span class="w">    </span><span class="mi">300</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w">  </span><span class="mi">1</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="err">柳岩</span><span class="w">       </span><span class="o">|</span><span class="w"> </span><span class="err">女</span><span class="w">   </span><span class="o">|</span><span class="w"> </span><span class="mi">1988</span><span class="o">-</span><span class="mi">02</span><span class="o">-</span><span class="mi">03</span><span class="w"> </span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="w"> </span><span class="o">|</span><span class="w">
</span></code></pre></div><h5 id="sql92和sql99的区别">sql92和sql99的区别</h5>
<p>功能:sql99 支持的较多</p>
<p>可读性:sql99实现连接条件和筛选条件的分离,可读性较高</p>
<p><figure 
	>
	<a href="/C:%5cUsers%5cAdministrator.YOURTREEDAD%5cAppData%5cRoaming%5cTypora%5ctypora-user-images%5cimage-20210923202009215.png" >
		<img src="/C:%5cUsers%5cAdministrator.YOURTREEDAD%5cAppData%5cRoaming%5cTypora%5ctypora-user-images%5cimage-20210923202009215.png"
			
			
			
			loading="lazy"
			alt="image-20210923202009215">
	</a>
	
	<figcaption>image-20210923202009215</figcaption>
	
</figure></p>
<p><figure 
	>
	<a href="/C:%5cUsers%5cAdministrator.YOURTREEDAD%5cAppData%5cRoaming%5cTypora%5ctypora-user-images%5cimage-20210923202111351.png" >
		<img src="/C:%5cUsers%5cAdministrator.YOURTREEDAD%5cAppData%5cRoaming%5cTypora%5ctypora-user-images%5cimage-20210923202111351.png"
			
			
			
			loading="lazy"
			alt="image-20210923202111351">
	</a>
	
	<figcaption>image-20210923202111351</figcaption>
	
</figure></p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="o">#</span><span class="err">查询编号</span><span class="o">&gt;</span><span class="mi">3</span><span class="err">的女生的男朋友信息</span><span class="p">,</span><span class="err">如果有则列出</span><span class="p">,</span><span class="err">如果没有就</span><span class="n">null填充</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="k">g</span><span class="p">.</span><span class="n">id</span><span class="w"> </span><span class="err">女生</span><span class="n">id</span><span class="p">,</span><span class="k">g</span><span class="p">.</span><span class="n">name</span><span class="w"> </span><span class="p">,</span><span class="n">b</span><span class="p">.</span><span class="o">*</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">beauty</span><span class="w"> </span><span class="k">g</span><span class="w"> </span><span class="k">left</span><span class="w"> </span><span class="k">join</span><span class="w"> </span><span class="n">boys</span><span class="w"> </span><span class="n">b</span><span class="w"> </span><span class="k">on</span><span class="w"> </span><span class="k">g</span><span class="p">.</span><span class="n">boyfriend_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">b</span><span class="p">.</span><span class="n">id</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="k">g</span><span class="p">.</span><span class="n">id</span><span class="o">&gt;</span><span class="mi">3</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">--------+--------+------+---------+--------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="err">女生</span><span class="n">id</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">name</span><span class="w">   </span><span class="o">|</span><span class="w"> </span><span class="n">id</span><span class="w">   </span><span class="o">|</span><span class="w"> </span><span class="n">boyName</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">userCP</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">--------+--------+------+---------+--------+
</span><span class="c1"></span><span class="o">|</span><span class="w">      </span><span class="mi">4</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="err">热巴</span><span class="w">   </span><span class="o">|</span><span class="w">    </span><span class="mi">2</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="err">鹿晗</span><span class="w">    </span><span class="o">|</span><span class="w">    </span><span class="mi">800</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w">      </span><span class="mi">5</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="err">周冬雨</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="k">NULL</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="k">NULL</span><span class="w">    </span><span class="o">|</span><span class="w">   </span><span class="k">NULL</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w">      </span><span class="mi">6</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="err">周芷若</span><span class="w"> </span><span class="o">|</span><span class="w">    </span><span class="mi">1</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="err">张无忌</span><span class="w">  </span><span class="o">|</span><span class="w">    </span><span class="mi">100</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="o">#</span><span class="err">查询哪个城市没有部门</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="n">city</span><span class="w"> </span><span class="err">这个城市没有部门</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">locations</span><span class="w"> </span><span class="n">l</span><span class="w"> </span><span class="k">left</span><span class="w"> </span><span class="k">join</span><span class="w"> </span><span class="n">departments</span><span class="w"> </span><span class="n">d</span><span class="w"> </span><span class="k">on</span><span class="w"> </span><span class="n">l</span><span class="p">.</span><span class="n">location_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">d</span><span class="p">.</span><span class="n">location_id</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="n">department_id</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="k">null</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">------------------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="err">这个城市没有部门</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">------------------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="n">Roma</span><span class="w">             </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w"> </span><span class="n">Venice</span><span class="w">           </span><span class="o">|</span><span class="w">
</span></code></pre></div><h5 id="子查询">子查询</h5>
<p>含义:出现在其他语句中的eslect语句,称为子查询或内查询</p>
<p>外部的查询语句,称为主查询或外查询</p>
<p>分类:</p>
<ul>
<li>按子查询出现的位置
<ul>
<li>select后面
<ul>
<li>一般只支持标量子查询</li>
</ul>
</li>
<li>from后面
<ul>
<li>支持表子查询</li>
</ul>
</li>
<li>where 或者 having 后面**(重要)**
<ul>
<li>支持标量子查询/列子查询/行子查询</li>
</ul>
</li>
<li>exists 后面 (相关子查询)
<ul>
<li>表子查询</li>
</ul>
</li>
</ul>
</li>
<li>按功能(结果集的行列书不同)
<ul>
<li>标量子查询(结果集只有一行一列)</li>
<li>列子查询(结果集中只有一列多行)</li>
<li>行子查询(结果集有一行多列)</li>
<li>表子查询(结果结一般为多行多列)</li>
</ul>
</li>
</ul>
<h5 id="where或having后面的子查询">where或having后面的子查询</h5>
<p>支持标量子查询 / 列子查询 / 行子查询(多列多行)</p>
<p>特点:</p>
<ol>
<li>子查询放在小括号内</li>
<li>一般放在条件的右侧</li>
<li>标量子查询,一般搭配着单行操作符使用 &gt; &lt; &gt;= &lt;= &lt;&gt;</li>
<li>列子查询,一般搭配着多行操作符使用 in any/some all</li>
<li>子查询的执行顺序优先于主查询执行,主查询的条件用到了子查询的结果</li>
</ol>
<h5 id="标量子查询">标量子查询</h5>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="o">#</span><span class="err">谁的工资比</span><span class="n">Abel高</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="n">last_name</span><span class="w"> </span><span class="p">,</span><span class="w"> </span><span class="n">salary</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">employees</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="n">salary</span><span class="o">&gt;</span><span class="p">(</span><span class="k">select</span><span class="w"> </span><span class="n">salary</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">employees</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="n">last_name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;Abel&#39;</span><span class="p">)</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">-----------+----------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="n">last_name</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">salary</span><span class="w">   </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">-----------+----------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="n">K_ing</span><span class="w">     </span><span class="o">|</span><span class="w"> </span><span class="mi">24000</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w"> </span><span class="n">Kochhar</span><span class="w">   </span><span class="o">|</span><span class="w"> </span><span class="mi">17000</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="n">last_name</span><span class="w"> </span><span class="p">,</span><span class="w"> </span><span class="n">job_id</span><span class="w"> </span><span class="p">,</span><span class="n">salary</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">employees</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="n">employee_id</span><span class="o">=</span><span class="mi">141</span><span class="w"> </span><span class="k">and</span><span class="w"> </span><span class="n">salary</span><span class="w"> </span><span class="o">&gt;</span><span class="p">(</span><span class="k">select</span><span class="w"> </span><span class="n">salary</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">employees</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="n">employee_id</span><span class="w"> </span><span class="o">=</span><span class="mi">143</span><span class="p">)</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">-----------+----------+---------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="n">last_name</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">job_id</span><span class="w">   </span><span class="o">|</span><span class="w"> </span><span class="n">salary</span><span class="w">  </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">-----------+----------+---------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="n">Rajs</span><span class="w">      </span><span class="o">|</span><span class="w"> </span><span class="n">ST_CLERK</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="mi">3500</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">-----------+----------+---------+
</span><span class="c1"></span><span class="w">
</span><span class="w"></span><span class="o">#</span><span class="err">查询</span><span class="w"> </span><span class="n">job_id</span><span class="w"> </span><span class="err">和</span><span class="w"> </span><span class="mi">141</span><span class="err">号员工的</span><span class="n">job_id相同的</span><span class="p">,</span><span class="n">salary比143号员工多的员工</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="n">last_name</span><span class="w"> </span><span class="p">,</span><span class="w"> </span><span class="n">job_id</span><span class="w"> </span><span class="p">,</span><span class="n">salary</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">employees</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="n">job_id</span><span class="o">=</span><span class="p">(</span><span class="k">select</span><span class="w"> </span><span class="n">job_id</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">employees</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="n">employee_id</span><span class="w"> </span><span class="o">=</span><span class="mi">141</span><span class="p">)</span><span class="w"> </span><span class="k">and</span><span class="w"> </span><span class="n">salary</span><span class="w"> </span><span class="o">&gt;</span><span class="p">(</span><span class="k">select</span><span class="w"> </span><span class="n">salary</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">employees</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="n">employee_id</span><span class="w"> </span><span class="o">=</span><span class="mi">143</span><span class="p">)</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">-------------+----------+---------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="n">last_name</span><span class="w">   </span><span class="o">|</span><span class="w"> </span><span class="n">job_id</span><span class="w">   </span><span class="o">|</span><span class="w"> </span><span class="n">salary</span><span class="w">  </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">-------------+----------+---------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="n">Nayer</span><span class="w">       </span><span class="o">|</span><span class="w"> </span><span class="n">ST_CLERK</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="mi">3200</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w"> </span><span class="n">Mikkilineni</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">ST_CLERK</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="mi">2700</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w"> </span><span class="n">Bissot</span><span class="w">      </span><span class="o">|</span><span class="w"> </span><span class="n">ST_CLERK</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="mi">3300</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="o">#</span><span class="err">查询公司工资最少的员工的</span><span class="n">last_name</span><span class="w"> </span><span class="p">,</span><span class="w"> </span><span class="n">job_id</span><span class="p">,</span><span class="w"> </span><span class="err">和</span><span class="n">salary</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="n">last_name</span><span class="w"> </span><span class="p">,</span><span class="w"> </span><span class="n">job_id</span><span class="w"> </span><span class="p">,</span><span class="w"> </span><span class="n">salary</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">employees</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="n">salary</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="k">select</span><span class="w"> </span><span class="k">min</span><span class="p">(</span><span class="n">salary</span><span class="p">)</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">employees</span><span class="w"> </span><span class="p">)</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">-----------+----------+---------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="n">last_name</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">job_id</span><span class="w">   </span><span class="o">|</span><span class="w"> </span><span class="n">salary</span><span class="w">  </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">-----------+----------+---------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="n">Olson</span><span class="w">     </span><span class="o">|</span><span class="w"> </span><span class="n">ST_CLERK</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="mi">2100</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">-----------+----------+---------+
</span><span class="c1"></span><span class="mi">1</span><span class="w"> </span><span class="k">row</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="k">set</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="o">#</span><span class="err">查询最低工资大于</span><span class="mi">50</span><span class="err">号部门的最低工资的部门</span><span class="n">id和其最低工资</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="n">department_id</span><span class="w"> </span><span class="p">,</span><span class="w"> </span><span class="k">min</span><span class="p">(</span><span class="n">salary</span><span class="p">)</span><span class="w"> </span><span class="err">最低工资</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">employees</span><span class="w"> </span><span class="k">group</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="n">department_id</span><span class="w"> </span><span class="k">having</span><span class="w"> </span><span class="k">min</span><span class="p">(</span><span class="n">salary</span><span class="p">)</span><span class="w"> </span><span class="o">&gt;</span><span class="p">(</span><span class="k">select</span><span class="w"> </span><span class="k">min</span><span class="p">(</span><span class="n">salary</span><span class="p">)</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">employees</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="n">department_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">50</span><span class="p">)</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">---------------+----------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="n">department_id</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="err">最低工资</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">---------------+----------+
</span><span class="c1"></span><span class="o">|</span><span class="w">          </span><span class="k">NULL</span><span class="w"> </span><span class="o">|</span><span class="w">  </span><span class="mi">7000</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w">            </span><span class="mi">10</span><span class="w"> </span><span class="o">|</span><span class="w">  </span><span class="mi">4400</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="o">|</span><span class="w">
</span></code></pre></div><h5 id="标量子查询可能出现的问题">标量子查询可能出现的问题</h5>
<ul>
<li>子查询里查到的元素个数不止一个</li>
<li>子查询里压根没查到任何元素</li>
</ul>
<h5 id="列子查询">列子查询</h5>
<p><figure 
	>
	<a href="/C:%5cUsers%5cAdministrator.YOURTREEDAD%5cAppData%5cRoaming%5cTypora%5ctypora-user-images%5cimage-20210923211703043.png" >
		<img src="/C:%5cUsers%5cAdministrator.YOURTREEDAD%5cAppData%5cRoaming%5cTypora%5ctypora-user-images%5cimage-20210923211703043.png"
			
			
			
			loading="lazy"
			alt="image-20210923211703043">
	</a>
	
	<figcaption>image-20210923211703043</figcaption>
	
</figure></p>
<p><strong>any就是大于最小值小于最大值 all就是大于最大值小于最小值</strong></p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="o">#</span><span class="err">查询</span><span class="n">location_id是1400或1700的部门中的所有员工姓名</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="n">last_name</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">employees</span><span class="w"> </span><span class="n">e</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="n">department_id</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="p">(</span><span class="k">select</span><span class="w"> </span><span class="k">distinct</span><span class="w"> </span><span class="n">department_id</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">departments</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="n">location_id</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="p">(</span><span class="mi">1400</span><span class="p">,</span><span class="mi">1700</span><span class="p">));</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">------------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="n">last_name</span><span class="w">  </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">------------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="n">Hunold</span><span class="w">     </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w"> </span><span class="n">Ernst</span><span class="w">      </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w"> </span><span class="n">Austin</span><span class="w">     </span><span class="o">|</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="o">#</span><span class="err">返回比</span><span class="n">job_id为IT_PROG部门任意工资低的员工的员工号</span><span class="o">/</span><span class="err">姓名</span><span class="o">/</span><span class="n">job_id以及salary</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="n">employee_id</span><span class="w"> </span><span class="p">,</span><span class="w"> </span><span class="n">last_name</span><span class="w"> </span><span class="p">,</span><span class="w"> </span><span class="n">job_id</span><span class="w"> </span><span class="p">,</span><span class="w"> </span><span class="n">salary</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">employees</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="n">salary</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="k">any</span><span class="p">(</span><span class="k">select</span><span class="w"> </span><span class="n">salary</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">employees</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="n">job_id</span><span class="o">=</span><span class="s1">&#39;IT_PROG&#39;</span><span class="p">)</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">-------------+-------------+------------+---------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="n">employee_id</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">last_name</span><span class="w">   </span><span class="o">|</span><span class="w"> </span><span class="n">job_id</span><span class="w">     </span><span class="o">|</span><span class="w"> </span><span class="n">salary</span><span class="w">  </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">-------------+-------------+------------+---------+
</span><span class="c1"></span><span class="o">|</span><span class="w">         </span><span class="mi">104</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">Ernst</span><span class="w">       </span><span class="o">|</span><span class="w"> </span><span class="n">IT_PROG</span><span class="w">    </span><span class="o">|</span><span class="w"> </span><span class="mi">6000</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w">         </span><span class="mi">105</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">Austin</span><span class="w">      </span><span class="o">|</span><span class="w"> </span><span class="n">IT_PROG</span><span class="w">    </span><span class="o">|</span><span class="w"> </span><span class="mi">4800</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="o">#</span><span class="err">也可以使用</span><span class="n">max或者min来代替any</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="n">employee_id</span><span class="w"> </span><span class="p">,</span><span class="w"> </span><span class="n">last_name</span><span class="w"> </span><span class="p">,</span><span class="w"> </span><span class="n">job_id</span><span class="w"> </span><span class="p">,</span><span class="w"> </span><span class="n">salary</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">employees</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="n">salary</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="k">any</span><span class="p">(</span><span class="k">select</span><span class="w"> </span><span class="n">salary</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">employees</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="n">job_id</span><span class="o">=</span><span class="s1">&#39;IT_PROG&#39;</span><span class="p">)</span><span class="w"> </span><span class="k">order</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="n">employee_id</span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">-------------+-------------+------------+---------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="n">employee_id</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">last_name</span><span class="w">   </span><span class="o">|</span><span class="w"> </span><span class="n">job_id</span><span class="w">     </span><span class="o">|</span><span class="w"> </span><span class="n">salary</span><span class="w">  </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">-------------+-------------+------------+---------+
</span><span class="c1"></span><span class="o">|</span><span class="w">         </span><span class="mi">104</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">Ernst</span><span class="w">       </span><span class="o">|</span><span class="w"> </span><span class="n">IT_PROG</span><span class="w">    </span><span class="o">|</span><span class="w"> </span><span class="mi">6000</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w">         </span><span class="mi">105</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">Austin</span><span class="w">      </span><span class="o">|</span><span class="w"> </span><span class="n">IT_PROG</span><span class="w">    </span><span class="o">|</span><span class="w"> </span><span class="mi">4800</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="o">#</span><span class="n">all也是同样的</span><span class="w">
</span><span class="w"></span><span class="o">#</span><span class="k">in</span><span class="w"> </span><span class="err">和</span><span class="w"> </span><span class="o">=</span><span class="n">Any也是一样的</span><span class="w">
</span><span class="w"></span><span class="o">#</span><span class="k">not</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="err">和</span><span class="w"> </span><span class="o">&lt;&gt;</span><span class="n">All也是一样的</span><span class="w">
</span></code></pre></div><h5 id="行子查询">行子查询</h5>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="o">#</span><span class="err">查询员工编号最小并且工资最高的员工信息</span><span class="w"> </span><span class="p">(</span><span class="err">不一定存在</span><span class="p">)</span><span class="w">
</span><span class="w"></span><span class="o">#</span><span class="err">简单粗暴的做法</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w">  </span><span class="k">select</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">employees</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="n">employee_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="k">select</span><span class="w"> </span><span class="k">min</span><span class="p">(</span><span class="n">employee_id</span><span class="p">)</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">employees</span><span class="w"> </span><span class="p">)</span><span class="w"> </span><span class="k">and</span><span class="w"> </span><span class="n">salary</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="k">select</span><span class="w"> </span><span class="k">max</span><span class="p">(</span><span class="n">salary</span><span class="p">)</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">employees</span><span class="w"> </span><span class="p">)</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">-------------+------------+-----------+-------+--------------+---------+----------+----------------+------------+---------------+---------------------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="n">employee_id</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">first_name</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">last_name</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">email</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">phone_number</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">job_id</span><span class="w">  </span><span class="o">|</span><span class="w"> </span><span class="n">salary</span><span class="w">   </span><span class="o">|</span><span class="w"> </span><span class="n">commission_pct</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">manager_id</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">department_id</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">hiredate</span><span class="w">            </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">-------------+------------+-----------+-------+--------------+---------+----------+----------------+------------+---------------+---------------------+
</span><span class="c1"></span><span class="o">|</span><span class="w">         </span><span class="mi">100</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">Steven</span><span class="w">     </span><span class="o">|</span><span class="w"> </span><span class="n">K_ing</span><span class="w">     </span><span class="o">|</span><span class="w"> </span><span class="n">SKING</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="mi">515</span><span class="p">.</span><span class="mi">123</span><span class="p">.</span><span class="mi">4567</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">AD_PRES</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="mi">24000</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="o">|</span><span class="w">           </span><span class="k">NULL</span><span class="w"> </span><span class="o">|</span><span class="w">       </span><span class="k">NULL</span><span class="w"> </span><span class="o">|</span><span class="w">            </span><span class="mi">90</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="mi">1992</span><span class="o">-</span><span class="mi">04</span><span class="o">-</span><span class="mi">03</span><span class="w"> </span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">-------------+------------+-----------+-------+--------------+---------+----------+----------------+------------+---------------+---------------------+
</span><span class="c1"></span><span class="mi">1</span><span class="w"> </span><span class="k">row</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="k">set</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="o">#</span><span class="err">行子查询</span><span class="w"> </span><span class="err">有局限性</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">employees</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="p">(</span><span class="n">employee_id</span><span class="p">,</span><span class="n">salary</span><span class="p">)</span><span class="o">=</span><span class="p">(</span><span class="k">select</span><span class="w"> </span><span class="k">min</span><span class="p">(</span><span class="n">employee_id</span><span class="p">),</span><span class="k">max</span><span class="p">(</span><span class="n">salary</span><span class="p">)</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">employees</span><span class="p">)</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">-------------+------------+-----------+-------+--------------+---------+----------+----------------+------------+---------------+---------------------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="n">employee_id</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">first_name</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">last_name</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">email</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">phone_number</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">job_id</span><span class="w">  </span><span class="o">|</span><span class="w"> </span><span class="n">salary</span><span class="w">   </span><span class="o">|</span><span class="w"> </span><span class="n">commission_pct</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">manager_id</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">department_id</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">hiredate</span><span class="w">            </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">-------------+------------+-----------+-------+--------------+---------+----------+----------------+------------+---------------+---------------------+
</span><span class="c1"></span><span class="o">|</span><span class="w">         </span><span class="mi">100</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">Steven</span><span class="w">     </span><span class="o">|</span><span class="w"> </span><span class="n">K_ing</span><span class="w">     </span><span class="o">|</span><span class="w"> </span><span class="n">SKING</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="mi">515</span><span class="p">.</span><span class="mi">123</span><span class="p">.</span><span class="mi">4567</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">AD_PRES</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="mi">24000</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="o">|</span><span class="w">           </span><span class="k">NULL</span><span class="w"> </span><span class="o">|</span><span class="w">       </span><span class="k">NULL</span><span class="w"> </span><span class="o">|</span><span class="w">            </span><span class="mi">90</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="mi">1992</span><span class="o">-</span><span class="mi">04</span><span class="o">-</span><span class="mi">03</span><span class="w"> </span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">-------------+------------+-----------+-------+--------------+---------+----------+----------------+------------+---------------+---------------------+
</span><span class="c1"></span><span class="mi">1</span><span class="w"> </span><span class="k">row</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="k">set</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span><span class="w">
</span></code></pre></div><h5 id="放在select后面的子查询">放在select后面的子查询</h5>
<p><strong>仅仅支持标量子查询</strong></p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="o">#</span><span class="err">查询每个部门的员工个数</span><span class="w"> 
</span><span class="w"></span><span class="o">#</span><span class="err">通过子查询来做</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="n">d</span><span class="p">.</span><span class="o">*</span><span class="w"> </span><span class="p">,(</span><span class="k">select</span><span class="w"> </span><span class="k">count</span><span class="p">(</span><span class="o">*</span><span class="p">)</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">employees</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="n">department_id</span><span class="o">=</span><span class="n">d</span><span class="p">.</span><span class="n">department_id</span><span class="p">)</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">departments</span><span class="w"> </span><span class="n">d</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">---------------+-----------------+------------+-------------+----------------------------------------------------------------------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="n">department_id</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">department_name</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">manager_id</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">location_id</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="p">(</span><span class="k">select</span><span class="w"> </span><span class="k">count</span><span class="p">(</span><span class="o">*</span><span class="p">)</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">employees</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="n">department_id</span><span class="o">=</span><span class="n">d</span><span class="p">.</span><span class="n">department_id</span><span class="p">)</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">---------------+-----------------+------------+-------------+----------------------------------------------------------------------+
</span><span class="c1"></span><span class="o">|</span><span class="w">            </span><span class="mi">10</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">Adm</span><span class="w">             </span><span class="o">|</span><span class="w">        </span><span class="mi">200</span><span class="w"> </span><span class="o">|</span><span class="w">        </span><span class="mi">1700</span><span class="w"> </span><span class="o">|</span><span class="w">                                                                    </span><span class="mi">1</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w">            </span><span class="mi">20</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">Mar</span><span class="w">             </span><span class="o">|</span><span class="w">        </span><span class="mi">201</span><span class="w"> </span><span class="o">|</span><span class="w">        </span><span class="mi">1800</span><span class="w"> </span><span class="o">|</span><span class="w">                                                                    </span><span class="mi">2</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">#</span><span class="err">也可以通过左右连接来做</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="n">d</span><span class="p">.</span><span class="o">*</span><span class="w"> </span><span class="p">,</span><span class="w"> </span><span class="k">count</span><span class="p">(</span><span class="o">*</span><span class="p">)</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">employees</span><span class="w"> </span><span class="n">e</span><span class="w"> </span><span class="k">right</span><span class="w"> </span><span class="k">join</span><span class="w"> </span><span class="n">departments</span><span class="w"> </span><span class="n">d</span><span class="w"> </span><span class="k">on</span><span class="w"> </span><span class="n">e</span><span class="p">.</span><span class="n">department_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">d</span><span class="p">.</span><span class="n">department_id</span><span class="w"> </span><span class="k">group</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="n">d</span><span class="p">.</span><span class="n">department_id</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">---------------+-----------------+------------+-------------+----------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="n">department_id</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">department_name</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">manager_id</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">location_id</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="k">count</span><span class="p">(</span><span class="o">*</span><span class="p">)</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">---------------+-----------------+------------+-------------+----------+
</span><span class="c1"></span><span class="o">|</span><span class="w">            </span><span class="mi">10</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">Adm</span><span class="w">             </span><span class="o">|</span><span class="w">        </span><span class="mi">200</span><span class="w"> </span><span class="o">|</span><span class="w">        </span><span class="mi">1700</span><span class="w"> </span><span class="o">|</span><span class="w">        </span><span class="mi">1</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w">            </span><span class="mi">20</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">Mar</span><span class="w">             </span><span class="o">|</span><span class="w">        </span><span class="mi">201</span><span class="w"> </span><span class="o">|</span><span class="w">        </span><span class="mi">1800</span><span class="w"> </span><span class="o">|</span><span class="w">        </span><span class="mi">2</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w">            </span><span class="mi">30</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">Pur</span><span class="w">             </span><span class="o">|</span><span class="w">        </span><span class="mi">114</span><span class="w"> </span><span class="o">|</span><span class="w">        </span><span class="mi">1700</span><span class="w"> </span><span class="o">|</span><span class="w">        </span><span class="mi">6</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="o">#</span><span class="err">查询员工号</span><span class="o">=</span><span class="mi">102</span><span class="err">的部门名</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="n">employee_id</span><span class="w"> </span><span class="p">,(</span><span class="k">select</span><span class="w"> </span><span class="n">department_name</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">departments</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="n">department_id</span><span class="w"> </span><span class="o">=</span><span class="n">e</span><span class="p">.</span><span class="n">department_id</span><span class="p">)</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">employees</span><span class="w"> </span><span class="n">e</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="n">e</span><span class="p">.</span><span class="n">employee_id</span><span class="w"> </span><span class="o">=</span><span class="mi">102</span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">-------------+--------------------------------------------------------------------------------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="n">employee_id</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="p">(</span><span class="k">select</span><span class="w"> </span><span class="n">department_name</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">departments</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="n">department_id</span><span class="w"> </span><span class="o">=</span><span class="n">e</span><span class="p">.</span><span class="n">department_id</span><span class="p">)</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">-------------+--------------------------------------------------------------------------------+
</span><span class="c1"></span><span class="o">|</span><span class="w">         </span><span class="mi">102</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">Exe</span><span class="w">                                                                            </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">-------------+--------------------------------------------------------------------------------+
</span><span class="c1"></span><span class="mi">1</span><span class="w"> </span><span class="k">row</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="k">set</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span><span class="w">
</span></code></pre></div><h5 id="from后面">from后面</h5>
<p>特点：将子查询充当一张表 <strong>要求必须起别名</strong></p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="o">#</span><span class="err">查询每个部门的平均工资的工资等级</span><span class="w">
</span><span class="w"></span><span class="o">#</span><span class="n">sql92语法</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="n">department_id</span><span class="w"> </span><span class="p">,</span><span class="n">grade_level</span><span class="p">,</span><span class="n">av</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="p">(</span><span class="k">select</span><span class="w"> </span><span class="n">department_id</span><span class="w"> </span><span class="p">,</span><span class="w"> </span><span class="k">avg</span><span class="p">(</span><span class="n">salary</span><span class="p">)</span><span class="w"> </span><span class="n">av</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">employees</span><span class="w"> </span><span class="k">group</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="n">department_id</span><span class="p">)</span><span class="w"> </span><span class="n">a</span><span class="p">,</span><span class="n">job_grades</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="n">av</span><span class="w"> </span><span class="k">between</span><span class="w"> </span><span class="n">lower_sal</span><span class="w"> </span><span class="k">and</span><span class="w"> </span><span class="n">highest_sal</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">---------------+-------------+--------------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="n">department_id</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">grade_level</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">av</span><span class="w">           </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">---------------+-------------+--------------+
</span><span class="c1"></span><span class="o">|</span><span class="w">          </span><span class="k">NULL</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="k">C</span><span class="w">           </span><span class="o">|</span><span class="w">  </span><span class="mi">7000</span><span class="p">.</span><span class="mi">000000</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w">            </span><span class="mi">10</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">B</span><span class="w">           </span><span class="o">|</span><span class="w">  </span><span class="mi">4400</span><span class="p">.</span><span class="mi">000000</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="o">#</span><span class="n">sql99语法</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="n">av</span><span class="p">.</span><span class="n">department_id</span><span class="w"> </span><span class="p">,</span><span class="w"> </span><span class="n">grade_level</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="p">(</span><span class="k">select</span><span class="w"> </span><span class="n">e</span><span class="p">.</span><span class="n">department_id</span><span class="w"> </span><span class="p">,</span><span class="w"> </span><span class="k">avg</span><span class="p">(</span><span class="n">salary</span><span class="p">)</span><span class="w"> </span><span class="n">avs</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">employees</span><span class="w"> </span><span class="n">e</span><span class="w"> </span><span class="k">group</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="n">e</span><span class="p">.</span><span class="n">department_id</span><span class="p">)</span><span class="w"> </span><span class="n">av</span><span class="w"> </span><span class="k">join</span><span class="w"> </span><span class="n">job_grades</span><span class="w"> </span><span class="n">j</span><span class="w"> </span><span class="k">on</span><span class="w"> </span><span class="n">av</span><span class="p">.</span><span class="n">avs</span><span class="w"> </span><span class="k">between</span><span class="w"> </span><span class="n">j</span><span class="p">.</span><span class="n">lower_sal</span><span class="w"> </span><span class="k">and</span><span class="w"> </span><span class="n">j</span><span class="p">.</span><span class="n">highest_sal</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">---------------+-------------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="n">department_id</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">grade_level</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">---------------+-------------+
</span><span class="c1"></span><span class="o">|</span><span class="w">          </span><span class="k">NULL</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="k">C</span><span class="w">           </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w">            </span><span class="mi">10</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">B</span><span class="w">           </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w">            </span><span class="mi">20</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="k">C</span><span class="w">           </span><span class="o">|</span><span class="w">
</span></code></pre></div><h5 id="exists后面子查询">exists后面（子查询）</h5>
<p>select exists(select employee_id from employees)</p>
<p>语法:</p>
<p>exists(完整的查询语句) 结果是1/0</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="o">#</span><span class="err">回顾</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="n">last_name</span><span class="w"> </span><span class="p">,</span><span class="w"> </span><span class="p">(</span><span class="k">select</span><span class="w"> </span><span class="n">department_name</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">departments</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="n">department_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">e</span><span class="p">.</span><span class="n">department_id</span><span class="w"> </span><span class="p">)</span><span class="err">部门</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">employees</span><span class="w"> </span><span class="n">e</span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">-------------+------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="n">last_name</span><span class="w">   </span><span class="o">|</span><span class="w"> </span><span class="err">部门</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">-------------+------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="n">K_ing</span><span class="w">       </span><span class="o">|</span><span class="w"> </span><span class="n">Exe</span><span class="w">  </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w"> </span><span class="n">Kochhar</span><span class="w">     </span><span class="o">|</span><span class="w"> </span><span class="n">Exe</span><span class="w">  </span><span class="o">|</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="o">#</span><span class="err">查询有员工的部门名</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="n">d</span><span class="p">.</span><span class="n">department_id</span><span class="w"> </span><span class="p">,</span><span class="w"> </span><span class="n">d</span><span class="p">.</span><span class="n">department_name</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">departments</span><span class="w"> </span><span class="n">d</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="k">exists</span><span class="p">(</span><span class="k">select</span><span class="w"> </span><span class="n">d</span><span class="p">.</span><span class="n">department_id</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">employees</span><span class="w"> </span><span class="n">e</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="n">d</span><span class="p">.</span><span class="n">department_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">e</span><span class="p">.</span><span class="n">department_id</span><span class="p">);</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">---------------+-----------------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="n">department_id</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">department_name</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">---------------+-----------------+
</span><span class="c1"></span><span class="o">|</span><span class="w">            </span><span class="mi">10</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">Adm</span><span class="w">             </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w">            </span><span class="mi">20</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">Mar</span><span class="w">             </span><span class="o">|</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="o">#</span><span class="err">可以用</span><span class="n">in来代替</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="n">d</span><span class="p">.</span><span class="n">department_id</span><span class="w"> </span><span class="p">,</span><span class="w"> </span><span class="n">d</span><span class="p">.</span><span class="n">department_name</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">departments</span><span class="w"> </span><span class="n">d</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="n">d</span><span class="p">.</span><span class="n">department_id</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="p">(</span><span class="k">select</span><span class="w"> </span><span class="k">distinct</span><span class="w"> </span><span class="n">e</span><span class="p">.</span><span class="n">department_id</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">employees</span><span class="w"> </span><span class="n">e</span><span class="w"> </span><span class="p">)</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">---------------+-----------------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="n">department_id</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">department_name</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">---------------+-----------------+
</span><span class="c1"></span><span class="o">|</span><span class="w">            </span><span class="mi">10</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">Adm</span><span class="w">             </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w">            </span><span class="mi">20</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">Mar</span><span class="w">             </span><span class="o">|</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="o">#</span><span class="err">查询没有女朋友的男生信息</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="n">b</span><span class="p">.</span><span class="o">*</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">boys</span><span class="w"> </span><span class="n">b</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="k">not</span><span class="w"> </span><span class="k">exists</span><span class="p">(</span><span class="k">select</span><span class="w"> </span><span class="n">boyfriend_id</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">beauty</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="n">boyfriend_id</span><span class="w"> </span><span class="o">=</span><span class="n">b</span><span class="p">.</span><span class="n">id</span><span class="p">)</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">----+---------+--------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="n">id</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">boyName</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">userCP</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">----+---------+--------+
</span><span class="c1"></span><span class="o">|</span><span class="w">  </span><span class="mi">4</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="err">段誉</span><span class="w">    </span><span class="o">|</span><span class="w">    </span><span class="mi">300</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">----+---------+--------+
</span><span class="c1"></span><span class="mi">1</span><span class="w"> </span><span class="k">row</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="k">set</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span><span class="w">
</span></code></pre></div><p>练习一下</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="n">last_name</span><span class="w"> </span><span class="p">,</span><span class="w"> </span><span class="n">salary</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">employees</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="n">department_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="k">select</span><span class="w"> </span><span class="n">department_id</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">employees</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="n">last_name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;Zlotkey&#39;</span><span class="p">)</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">------------+----------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="n">last_name</span><span class="w">  </span><span class="o">|</span><span class="w"> </span><span class="n">salary</span><span class="w">   </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">------------+----------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="n">Russell</span><span class="w">    </span><span class="o">|</span><span class="w"> </span><span class="mi">14000</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w"> </span><span class="n">Partners</span><span class="w">   </span><span class="o">|</span><span class="w"> </span><span class="mi">13500</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="n">last_name</span><span class="w"> </span><span class="p">,</span><span class="w"> </span><span class="n">salary</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">employees</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="n">salary</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="p">(</span><span class="k">select</span><span class="w"> </span><span class="k">avg</span><span class="p">(</span><span class="n">salary</span><span class="p">)</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">employees</span><span class="w"> </span><span class="p">)</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">------------+----------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="n">last_name</span><span class="w">  </span><span class="o">|</span><span class="w"> </span><span class="n">salary</span><span class="w">   </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">------------+----------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="n">K_ing</span><span class="w">      </span><span class="o">|</span><span class="w"> </span><span class="mi">24000</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w"> </span><span class="n">Kochhar</span><span class="w">    </span><span class="o">|</span><span class="w"> </span><span class="mi">17000</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="o">#</span><span class="err">查询各部门中工资比本部门平均工资中搞的员工和员工号</span><span class="p">,</span><span class="err">姓名和工资</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="n">e</span><span class="p">.</span><span class="n">department_id</span><span class="w"> </span><span class="p">,</span><span class="w"> </span><span class="n">e</span><span class="p">.</span><span class="n">employee_id</span><span class="w"> </span><span class="p">,</span><span class="w"> </span><span class="n">e</span><span class="p">.</span><span class="n">last_name</span><span class="w"> </span><span class="p">,</span><span class="w"> </span><span class="n">e</span><span class="p">.</span><span class="n">salary</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">employees</span><span class="w"> </span><span class="n">e</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="n">salary</span><span class="w"> </span><span class="o">&gt;</span><span class="p">(</span><span class="k">select</span><span class="w"> </span><span class="k">avg</span><span class="p">(</span><span class="n">salary</span><span class="p">)</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">employees</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="n">department_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">e</span><span class="p">.</span><span class="n">department_id</span><span class="w"> </span><span class="p">)</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">---------------+-------------+-----------+----------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="n">department_id</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">employee_id</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">last_name</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">salary</span><span class="w">   </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">---------------+-------------+-----------+----------+
</span><span class="c1"></span><span class="o">|</span><span class="w">            </span><span class="mi">90</span><span class="w"> </span><span class="o">|</span><span class="w">         </span><span class="mi">100</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">K_ing</span><span class="w">     </span><span class="o">|</span><span class="w"> </span><span class="mi">24000</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w">            </span><span class="mi">60</span><span class="w"> </span><span class="o">|</span><span class="w">         </span><span class="mi">103</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">Hunold</span><span class="w">    </span><span class="o">|</span><span class="w">  </span><span class="mi">9000</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="n">department_id</span><span class="w"> </span><span class="p">,</span><span class="w"> </span><span class="n">employee_id</span><span class="w"> </span><span class="p">,</span><span class="w"> </span><span class="n">last_name</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">employees</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="n">department_id</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="p">(</span><span class="k">select</span><span class="w"> </span><span class="n">department_id</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">employees</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="n">last_name</span><span class="w"> </span><span class="k">like</span><span class="w"> </span><span class="s1">&#39;%u%&#39;</span><span class="p">)</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">---------------+-------------+-------------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="n">department_id</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">employee_id</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">last_name</span><span class="w">   </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">---------------+-------------+-------------+
</span><span class="c1"></span><span class="o">|</span><span class="w">            </span><span class="mi">60</span><span class="w"> </span><span class="o">|</span><span class="w">         </span><span class="mi">103</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">Hunold</span><span class="w">      </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w">            </span><span class="mi">60</span><span class="w"> </span><span class="o">|</span><span class="w">         </span><span class="mi">104</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">Ernst</span><span class="w">       </span><span class="o">|</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="o">#</span><span class="err">查询部门的</span><span class="n">location_id是1700的部门工作的员工的员工号</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="n">e</span><span class="p">.</span><span class="n">employee_id</span><span class="w"> </span><span class="p">,</span><span class="w"> </span><span class="n">e</span><span class="p">.</span><span class="n">department_id</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">employees</span><span class="w"> </span><span class="n">e</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="n">e</span><span class="p">.</span><span class="n">department_id</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="p">(</span><span class="k">select</span><span class="w"> </span><span class="n">department_id</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">departments</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="n">location_id</span><span class="w"> </span><span class="o">=</span><span class="mi">1700</span><span class="p">)</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">-------------+---------------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="n">employee_id</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">department_id</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">-------------+---------------+
</span><span class="c1"></span><span class="o">|</span><span class="w">         </span><span class="mi">200</span><span class="w"> </span><span class="o">|</span><span class="w">            </span><span class="mi">10</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w">         </span><span class="mi">114</span><span class="w"> </span><span class="o">|</span><span class="w">            </span><span class="mi">30</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="n">last_name</span><span class="w"> </span><span class="p">,</span><span class="w"> </span><span class="n">salary</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">employees</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="n">manager_id</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="p">(</span><span class="k">select</span><span class="w"> </span><span class="n">employee_id</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">employees</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="n">last_name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;K_ing&#39;</span><span class="p">)</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">-----------+----------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="n">last_name</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">salary</span><span class="w">   </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">-----------+----------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="n">Kochhar</span><span class="w">   </span><span class="o">|</span><span class="w"> </span><span class="mi">17000</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w"> </span><span class="n">De</span><span class="w"> </span><span class="n">Haan</span><span class="w">   </span><span class="o">|</span><span class="w"> </span><span class="mi">17000</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="o">#</span><span class="err">查询最高工资的员工的姓名</span><span class="p">,</span><span class="err">要求</span><span class="n">first_name和last_name显示为一列</span><span class="p">,</span><span class="err">列名为姓名</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="n">concat</span><span class="p">(</span><span class="n">a</span><span class="p">.</span><span class="err">姓</span><span class="w"> </span><span class="p">,</span><span class="w"> </span><span class="n">a</span><span class="p">.</span><span class="err">名</span><span class="p">)</span><span class="err">姓名</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="p">(</span><span class="k">select</span><span class="w"> </span><span class="n">first_name</span><span class="w"> </span><span class="err">姓</span><span class="p">,</span><span class="n">last_name</span><span class="w"> </span><span class="err">名</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">employees</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="n">salary</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="k">select</span><span class="w"> </span><span class="k">max</span><span class="p">(</span><span class="n">salary</span><span class="p">)</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">employees</span><span class="p">))</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">-------------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="err">姓名</span><span class="w">        </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">-------------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="n">StevenK_ing</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">-------------+
</span><span class="c1"></span><span class="mi">1</span><span class="w"> </span><span class="k">row</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="k">set</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span><span class="w">
</span></code></pre></div><h5 id="分页查询">分页查询</h5>
<p>应用场景:当要显示的数据,一页显示不全,需要分页提交sql请求的时候</p>
<p><strong>语法</strong>:select  查询列表 from 表 inner join 表2 on 连接条件 group by 分组字段 having 分组后的筛选 order by 排序后的字段 limit offset,size ;</p>
<p>offset要显示条目的起始索引(起始索引从0开始)</p>
<p>size要显示的条目个数</p>
<p><strong>特点</strong>:</p>
<ul>
<li>limit语句放在查询语句的最后</li>
<li>公式  要显示的页数 page 每页的条目数size , 那么就是limit (page-1)*size,size</li>
</ul>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">employees</span><span class="w"> </span><span class="k">limit</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="mi">5</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">-------------+------------+-----------+----------+--------------+---------+----------+----------------+------------+---------------+---------------------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="n">employee_id</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">first_name</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">last_name</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">email</span><span class="w">    </span><span class="o">|</span><span class="w"> </span><span class="n">phone_number</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">job_id</span><span class="w">  </span><span class="o">|</span><span class="w"> </span><span class="n">salary</span><span class="w">   </span><span class="o">|</span><span class="w"> </span><span class="n">commission_pct</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">manager_id</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">department_id</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">hiredate</span><span class="w">            </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">-------------+------------+-----------+----------+--------------+---------+----------+----------------+------------+---------------+---------------------+
</span><span class="c1"></span><span class="o">|</span><span class="w">         </span><span class="mi">100</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">Steven</span><span class="w">     </span><span class="o">|</span><span class="w"> </span><span class="n">K_ing</span><span class="w">     </span><span class="o">|</span><span class="w"> </span><span class="n">SKING</span><span class="w">    </span><span class="o">|</span><span class="w"> </span><span class="mi">515</span><span class="p">.</span><span class="mi">123</span><span class="p">.</span><span class="mi">4567</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">AD_PRES</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="mi">24000</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="o">|</span><span class="w">           </span><span class="k">NULL</span><span class="w"> </span><span class="o">|</span><span class="w">       </span><span class="k">NULL</span><span class="w"> </span><span class="o">|</span><span class="w">            </span><span class="mi">90</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="mi">1992</span><span class="o">-</span><span class="mi">04</span><span class="o">-</span><span class="mi">03</span><span class="w"> </span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w">         </span><span class="mi">101</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">Neena</span><span class="w">      </span><span class="o">|</span><span class="w"> </span><span class="n">Kochhar</span><span class="w">   </span><span class="o">|</span><span class="w"> </span><span class="n">NKOCHHAR</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="mi">515</span><span class="p">.</span><span class="mi">123</span><span class="p">.</span><span class="mi">4568</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">AD_VP</span><span class="w">   </span><span class="o">|</span><span class="w"> </span><span class="mi">17000</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="o">|</span><span class="w">           </span><span class="k">NULL</span><span class="w"> </span><span class="o">|</span><span class="w">        </span><span class="mi">100</span><span class="w"> </span><span class="o">|</span><span class="w">            </span><span class="mi">90</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="mi">1992</span><span class="o">-</span><span class="mi">04</span><span class="o">-</span><span class="mi">03</span><span class="w"> </span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w">         </span><span class="mi">102</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">Lex</span><span class="w">        </span><span class="o">|</span><span class="w"> </span><span class="n">De</span><span class="w"> </span><span class="n">Haan</span><span class="w">   </span><span class="o">|</span><span class="w"> </span><span class="n">LDEHAAN</span><span class="w">  </span><span class="o">|</span><span class="w"> </span><span class="mi">515</span><span class="p">.</span><span class="mi">123</span><span class="p">.</span><span class="mi">4569</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">AD_VP</span><span class="w">   </span><span class="o">|</span><span class="w"> </span><span class="mi">17000</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="o">|</span><span class="w">           </span><span class="k">NULL</span><span class="w"> </span><span class="o">|</span><span class="w">        </span><span class="mi">100</span><span class="w"> </span><span class="o">|</span><span class="w">            </span><span class="mi">90</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="mi">1992</span><span class="o">-</span><span class="mi">04</span><span class="o">-</span><span class="mi">03</span><span class="w"> </span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w">         </span><span class="mi">103</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">Alexander</span><span class="w">  </span><span class="o">|</span><span class="w"> </span><span class="n">Hunold</span><span class="w">    </span><span class="o">|</span><span class="w"> </span><span class="n">AHUNOLD</span><span class="w">  </span><span class="o">|</span><span class="w"> </span><span class="mi">590</span><span class="p">.</span><span class="mi">423</span><span class="p">.</span><span class="mi">4567</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">IT_PROG</span><span class="w"> </span><span class="o">|</span><span class="w">  </span><span class="mi">9000</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="o">|</span><span class="w">           </span><span class="k">NULL</span><span class="w"> </span><span class="o">|</span><span class="w">        </span><span class="mi">102</span><span class="w"> </span><span class="o">|</span><span class="w">            </span><span class="mi">60</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="mi">1992</span><span class="o">-</span><span class="mi">04</span><span class="o">-</span><span class="mi">03</span><span class="w"> </span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w">         </span><span class="mi">104</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">Bruce</span><span class="w">      </span><span class="o">|</span><span class="w"> </span><span class="n">Ernst</span><span class="w">     </span><span class="o">|</span><span class="w"> </span><span class="n">BERNST</span><span class="w">   </span><span class="o">|</span><span class="w"> </span><span class="mi">590</span><span class="p">.</span><span class="mi">423</span><span class="p">.</span><span class="mi">4568</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">IT_PROG</span><span class="w"> </span><span class="o">|</span><span class="w">  </span><span class="mi">6000</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="o">|</span><span class="w">           </span><span class="k">NULL</span><span class="w"> </span><span class="o">|</span><span class="w">        </span><span class="mi">103</span><span class="w"> </span><span class="o">|</span><span class="w">            </span><span class="mi">60</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="mi">1992</span><span class="o">-</span><span class="mi">04</span><span class="o">-</span><span class="mi">03</span><span class="w"> </span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">-------------+------------+-----------+----------+--------------+---------+----------+----------------+------------+---------------+---------------------+
</span><span class="c1"></span><span class="mi">5</span><span class="w"> </span><span class="k">rows</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="k">set</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="o">#</span><span class="err">如果从第一条开始的话</span><span class="p">,</span><span class="err">那么这样可以省略前一个数字</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">employees</span><span class="w"> </span><span class="k">limit</span><span class="w"> </span><span class="mi">5</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">-------------+------------+-----------+----------+--------------+---------+----------+----------------+------------+---------------+---------------------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="n">employee_id</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">first_name</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">last_name</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">email</span><span class="w">    </span><span class="o">|</span><span class="w"> </span><span class="n">phone_number</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">job_id</span><span class="w">  </span><span class="o">|</span><span class="w"> </span><span class="n">salary</span><span class="w">   </span><span class="o">|</span><span class="w"> </span><span class="n">commission_pct</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">manager_id</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">department_id</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">hiredate</span><span class="w">            </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">-------------+------------+-----------+----------+--------------+---------+----------+----------------+------------+---------------+---------------------+
</span><span class="c1"></span><span class="o">|</span><span class="w">         </span><span class="mi">100</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">Steven</span><span class="w">     </span><span class="o">|</span><span class="w"> </span><span class="n">K_ing</span><span class="w">     </span><span class="o">|</span><span class="w"> </span><span class="n">SKING</span><span class="w">    </span><span class="o">|</span><span class="w"> </span><span class="mi">515</span><span class="p">.</span><span class="mi">123</span><span class="p">.</span><span class="mi">4567</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">AD_PRES</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="mi">24000</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="o">|</span><span class="w">           </span><span class="k">NULL</span><span class="w"> </span><span class="o">|</span><span class="w">       </span><span class="k">NULL</span><span class="w"> </span><span class="o">|</span><span class="w">            </span><span class="mi">90</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="mi">1992</span><span class="o">-</span><span class="mi">04</span><span class="o">-</span><span class="mi">03</span><span class="w"> </span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w">         </span><span class="mi">101</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">Neena</span><span class="w">      </span><span class="o">|</span><span class="w"> </span><span class="n">Kochhar</span><span class="w">   </span><span class="o">|</span><span class="w"> </span><span class="n">NKOCHHAR</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="mi">515</span><span class="p">.</span><span class="mi">123</span><span class="p">.</span><span class="mi">4568</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">AD_VP</span><span class="w">   </span><span class="o">|</span><span class="w"> </span><span class="mi">17000</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="o">|</span><span class="w">           </span><span class="k">NULL</span><span class="w"> </span><span class="o">|</span><span class="w">        </span><span class="mi">100</span><span class="w"> </span><span class="o">|</span><span class="w">            </span><span class="mi">90</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="mi">1992</span><span class="o">-</span><span class="mi">04</span><span class="o">-</span><span class="mi">03</span><span class="w"> </span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w">         </span><span class="mi">102</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">Lex</span><span class="w">        </span><span class="o">|</span><span class="w"> </span><span class="n">De</span><span class="w"> </span><span class="n">Haan</span><span class="w">   </span><span class="o">|</span><span class="w"> </span><span class="n">LDEHAAN</span><span class="w">  </span><span class="o">|</span><span class="w"> </span><span class="mi">515</span><span class="p">.</span><span class="mi">123</span><span class="p">.</span><span class="mi">4569</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">AD_VP</span><span class="w">   </span><span class="o">|</span><span class="w"> </span><span class="mi">17000</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="o">|</span><span class="w">           </span><span class="k">NULL</span><span class="w"> </span><span class="o">|</span><span class="w">        </span><span class="mi">100</span><span class="w"> </span><span class="o">|</span><span class="w">            </span><span class="mi">90</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="mi">1992</span><span class="o">-</span><span class="mi">04</span><span class="o">-</span><span class="mi">03</span><span class="w"> </span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w">         </span><span class="mi">103</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">Alexander</span><span class="w">  </span><span class="o">|</span><span class="w"> </span><span class="n">Hunold</span><span class="w">    </span><span class="o">|</span><span class="w"> </span><span class="n">AHUNOLD</span><span class="w">  </span><span class="o">|</span><span class="w"> </span><span class="mi">590</span><span class="p">.</span><span class="mi">423</span><span class="p">.</span><span class="mi">4567</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">IT_PROG</span><span class="w"> </span><span class="o">|</span><span class="w">  </span><span class="mi">9000</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="o">|</span><span class="w">           </span><span class="k">NULL</span><span class="w"> </span><span class="o">|</span><span class="w">        </span><span class="mi">102</span><span class="w"> </span><span class="o">|</span><span class="w">            </span><span class="mi">60</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="mi">1992</span><span class="o">-</span><span class="mi">04</span><span class="o">-</span><span class="mi">03</span><span class="w"> </span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w">         </span><span class="mi">104</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">Bruce</span><span class="w">      </span><span class="o">|</span><span class="w"> </span><span class="n">Ernst</span><span class="w">     </span><span class="o">|</span><span class="w"> </span><span class="n">BERNST</span><span class="w">   </span><span class="o">|</span><span class="w"> </span><span class="mi">590</span><span class="p">.</span><span class="mi">423</span><span class="p">.</span><span class="mi">4568</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">IT_PROG</span><span class="w"> </span><span class="o">|</span><span class="w">  </span><span class="mi">6000</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="o">|</span><span class="w">           </span><span class="k">NULL</span><span class="w"> </span><span class="o">|</span><span class="w">        </span><span class="mi">103</span><span class="w"> </span><span class="o">|</span><span class="w">            </span><span class="mi">60</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="mi">1992</span><span class="o">-</span><span class="mi">04</span><span class="o">-</span><span class="mi">03</span><span class="w"> </span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">-------------+------------+-----------+----------+--------------+---------+----------+----------------+------------+---------------+---------------------+
</span><span class="c1"></span><span class="mi">5</span><span class="w"> </span><span class="k">rows</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="k">set</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="o">#</span><span class="err">第</span><span class="mi">11</span><span class="err">到第</span><span class="mi">25</span><span class="err">条</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">employees</span><span class="w"> </span><span class="k">limit</span><span class="w"> </span><span class="mi">10</span><span class="p">,</span><span class="mi">15</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">employees</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="n">commission_pct</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="k">not</span><span class="w"> </span><span class="k">null</span><span class="w"> </span><span class="k">order</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="n">salary</span><span class="o">*</span><span class="p">(</span><span class="mi">1</span><span class="o">+</span><span class="n">commission_pct</span><span class="p">)</span><span class="w"> </span><span class="k">desc</span><span class="w"> </span><span class="k">limit</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="mi">10</span><span class="w"> </span><span class="p">;</span><span class="w">
</span></code></pre></div><h5 id="练习一下-1">练习一下</h5>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="n">mysql</span><span class="o">&gt;</span><span class="w">  </span><span class="k">select</span><span class="w"> </span><span class="n">substr</span><span class="p">(</span><span class="n">email</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="n">instr</span><span class="p">(</span><span class="n">email</span><span class="p">,</span><span class="s1">&#39;@&#39;</span><span class="p">)</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">stuinfo</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="k">count</span><span class="p">(</span><span class="o">*</span><span class="p">)</span><span class="w"> </span><span class="err">个数</span><span class="w"> </span><span class="p">,</span><span class="w"> </span><span class="n">sex</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">stuinfo</span><span class="w"> </span><span class="k">group</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="n">sex</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="k">min</span><span class="p">(</span><span class="n">age</span><span class="p">)</span><span class="w"> </span><span class="p">,</span><span class="w"> </span><span class="p">(</span><span class="k">select</span><span class="w"> </span><span class="n">gradeName</span><span class="w"> </span><span class="p">,</span><span class="w"> </span><span class="n">id</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">grade</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="n">id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">stuinfo</span><span class="p">.</span><span class="n">gradeid</span><span class="p">)</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">stuinfo</span><span class="w"> </span><span class="k">group</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="n">gradeId</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="k">min</span><span class="p">(</span><span class="n">age</span><span class="p">)</span><span class="w"> </span><span class="p">,</span><span class="w"> </span><span class="p">(</span><span class="k">select</span><span class="w"> </span><span class="n">gradeName</span><span class="w"> </span><span class="p">,</span><span class="w"> </span><span class="n">id</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">grade</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="n">id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">stuinfo</span><span class="p">.</span><span class="n">id</span><span class="p">)</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">stuinfo</span><span class="w"> </span><span class="k">group</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="n">gradeId</span><span class="w"> </span><span class="k">having</span><span class="w"> </span><span class="k">min</span><span class="p">(</span><span class="n">age</span><span class="p">)</span><span class="o">&gt;</span><span class="mi">20</span><span class="p">;</span><span class="w">
</span></code></pre></div><h5 id="查询语句中涉及到的所有关键字以及执行先后顺序">查询语句中涉及到的所有关键字,以及执行先后顺序.</h5>
<p>select 查询列表  ⑦</p>
<p>from 表   ① 锁定数据源</p>
<p>连接类型 join 表2   ②拼接数据源 笛卡尔儿乘积</p>
<p>on 连接条件  ③缩小数据源 非笛卡尔乘积</p>
<p>where 筛选条件   ④缩小数据范围</p>
<p>group by 分组列表    ⑤</p>
<p>having 分组后的筛选   ⑥分组后筛选</p>
<p>order by 排序列表    ⑧</p>
<p>limit 偏移,条目数;    ⑨</p>
<h5 id="sql99语法-1">sql99语法</h5>
<h5 id="内连接-1">内连接</h5>
<p>select 查询列表 from 表1 别名 inner join 表2 别名 on 连接条件 where 筛选条件 group by 分组列表 having 分组后的筛选 order by 排序列表 limit子句</p>
<p><strong>特点:</strong></p>
<p>表的顺序可以调换</p>
<p>内连接的结果=多表的交集</p>
<p>n表连接至少需要n-1个连接条件</p>
<p>分类: 等值连接 非等值连接 自连接</p>
<h5 id="外连接-1">外连接</h5>
<p>select 查询列表 from 表1 别名 left|right|full outer join 表2 别名 on 连接条件</p>
<p>where 筛选条件 group by 分组列表 having 分组后的筛选 order by 排序列表 limit 子句;</p>
<p><strong>特点:</strong></p>
<p>查询的结果=主表中所有的行,其中从表和他匹配的将显示匹配行,如果从表没有匹配的则显示null</p>
<p>left join 左边的就是主表,right join右边的就是主表</p>
<p>full join 两边都是主表</p>
<p>一般用于查询除了交集部分的剩余的不匹配的行</p>
<h5 id="交叉连接-1">交叉连接</h5>
<p>select 查询列表 from 表1 别名 cross join 表2 别名 ;</p>
<p>**特点:	**</p>
<p>类似于笛卡尔乘积</p>
<h5 id="子查询-1">子查询</h5>
<p>嵌套在其他语句内部的select语句称为子查询或内查询</p>
<p>外面的语句可以是insert update select delete 等等,一般select 作为外面语句较多</p>
<p>外面如果为select语句,则此语句成为外查询或主查询</p>
<p>**分类:	**</p>
<ol>
<li>
<p>按出现的位置</p>
<ul>
<li>select 后面 仅仅支持标量子查询</li>
<li>from 后面 表子查询</li>
<li><strong>where或having后面 标量子查询 / 列子查询</strong> / 行子查询</li>
<li>exists后面 标量子查询 列子查询 行子查询 表子查询</li>
</ul>
</li>
<li>
<p>按结果集的行列</p>
<ul>
<li><strong>标量子查询(单行子查询):结果集为一行一列</strong></li>
<li><strong>列子查询(多行子查询):结果集为多行一列</strong></li>
<li>行子查询(结果集为多行多列)</li>
<li>表子查询(结果集为多行多列)</li>
</ul>
</li>
<li>
<p>示例</p>
<p>标量子查询</p>
<p>查询最低工资的员工姓名和工资</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="n">last_name</span><span class="w"> </span><span class="p">,</span><span class="w"> </span><span class="n">salary</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">employees</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="n">salary</span><span class="o">=</span><span class="p">(</span><span class="k">select</span><span class="w"> </span><span class="k">min</span><span class="p">(</span><span class="n">salary</span><span class="p">)</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">employees</span><span class="p">)</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">-----------+---------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="n">last_name</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">salary</span><span class="w">  </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">-----------+---------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="n">Olson</span><span class="w">     </span><span class="o">|</span><span class="w"> </span><span class="mi">2100</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">-----------+---------+
</span><span class="c1"></span><span class="mi">1</span><span class="w"> </span><span class="k">row</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="k">set</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span><span class="w">
</span></code></pre></div><p>列子查询</p>
<p>查询所有是领导的员工姓名</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="n">mysql</span><span class="o">&gt;</span><span class="w">  </span><span class="k">select</span><span class="w"> </span><span class="n">last_name</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">employees</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="n">employee_id</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="p">(</span><span class="k">select</span><span class="w"> </span><span class="n">manager_id</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">employees</span><span class="p">)</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">-----------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="n">last_name</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">-----------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="n">K_ing</span><span class="w">     </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w"> </span><span class="n">De</span><span class="w"> </span><span class="n">Haan</span><span class="w">   </span><span class="o">|</span><span class="w">
</span></code></pre></div></li>
</ol>
<h5 id="分页查询-1">分页查询</h5>
<p>当要查询的条目数太多,一页显示不全</p>
<p>语法</p>
<p>select 查询列表 from 表 limit offset,size</p>
<p>**注意	** offset代表的是起始的条目索引,默认是从0开始  size代表的是要显示的条目数</p>
<p>公式 limit (page-1)*size , size</p>
<h5 id="练习一下-2">练习一下</h5>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="n">mysql</span><span class="o">&gt;</span><span class="w">  </span><span class="k">select</span><span class="w"> </span><span class="n">last_name</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">employees</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="n">employee_id</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="p">(</span><span class="k">select</span><span class="w"> </span><span class="n">manager_id</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">employees</span><span class="p">)</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">-----------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="n">last_name</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">-----------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="n">K_ing</span><span class="w">     </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w"> </span><span class="n">De</span><span class="w"> </span><span class="n">Haan</span><span class="w">   </span><span class="o">|</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="o">#</span><span class="err">查询平均工资最低的部门信息</span><span class="w"> </span><span class="err">直接使用</span><span class="k">order</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="err">平均工资</span><span class="w"> </span><span class="k">asc</span><span class="w"> </span><span class="err">再</span><span class="k">limit</span><span class="w"> </span><span class="mi">1</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="n">d</span><span class="p">.</span><span class="o">*</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">departments</span><span class="w"> </span><span class="n">d</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="n">d</span><span class="p">.</span><span class="n">department_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="k">select</span><span class="w"> </span><span class="n">department_id</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">employees</span><span class="w"> </span><span class="k">group</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="n">department_id</span><span class="w"> </span><span class="k">order</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="k">avg</span><span class="p">(</span><span class="n">salary</span><span class="p">)</span><span class="w"> </span><span class="k">asc</span><span class="w"> </span><span class="k">limit</span><span class="w"> </span><span class="mi">1</span><span class="p">);</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">---------------+-----------------+------------+-------------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="n">department_id</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">department_name</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">manager_id</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">location_id</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">---------------+-----------------+------------+-------------+
</span><span class="c1"></span><span class="o">|</span><span class="w">            </span><span class="mi">50</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">Shi</span><span class="w">             </span><span class="o">|</span><span class="w">        </span><span class="mi">121</span><span class="w"> </span><span class="o">|</span><span class="w">        </span><span class="mi">1500</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">---------------+-----------------+------------+-------------+
</span><span class="c1"></span><span class="w">
</span><span class="w"></span><span class="o">#</span><span class="err">查询平均工资最低的部门信息和它的平均工资</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="n">d</span><span class="p">.</span><span class="o">*</span><span class="p">,</span><span class="n">a</span><span class="p">.</span><span class="n">avgsalary</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">departments</span><span class="w"> </span><span class="n">d</span><span class="w"> </span><span class="k">join</span><span class="w"> </span><span class="p">(</span><span class="k">select</span><span class="w"> </span><span class="n">department_id</span><span class="p">,</span><span class="k">avg</span><span class="p">(</span><span class="n">salary</span><span class="p">)</span><span class="w"> </span><span class="n">avgsalary</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">employees</span><span class="w"> </span><span class="k">group</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="n">department_id</span><span class="w"> </span><span class="k">order</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="k">avg</span><span class="p">(</span><span class="n">salary</span><span class="p">)</span><span class="w"> </span><span class="k">asc</span><span class="w"> </span><span class="k">limit</span><span class="w"> </span><span class="mi">1</span><span class="p">)</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="k">on</span><span class="w"> </span><span class="n">d</span><span class="p">.</span><span class="n">department_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">a</span><span class="p">.</span><span class="n">department_id</span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">---------------+-----------------+------------+-------------+-------------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="n">department_id</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">department_name</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">manager_id</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">location_id</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">avgsalary</span><span class="w">   </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">---------------+-----------------+------------+-------------+-------------+
</span><span class="c1"></span><span class="o">|</span><span class="w">            </span><span class="mi">50</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">Shi</span><span class="w">             </span><span class="o">|</span><span class="w">        </span><span class="mi">121</span><span class="w"> </span><span class="o">|</span><span class="w">        </span><span class="mi">1500</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="mi">3475</span><span class="p">.</span><span class="mi">555556</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">---------------+-----------------+------------+-------------+-------------+
</span><span class="c1"></span><span class="mi">1</span><span class="w"> </span><span class="k">row</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="k">set</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span><span class="w">
</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="o">#</span><span class="err">查询平均工资最高的</span><span class="n">job信息</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="n">j</span><span class="p">.</span><span class="o">*</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">jobs</span><span class="w"> </span><span class="n">j</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="n">j</span><span class="p">.</span><span class="n">job_id</span><span class="w"> </span><span class="o">=</span><span class="p">(</span><span class="k">select</span><span class="w"> </span><span class="n">job_id</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">employees</span><span class="w"> </span><span class="k">group</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="n">job_id</span><span class="w"> </span><span class="k">order</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="k">avg</span><span class="p">(</span><span class="n">salary</span><span class="p">)</span><span class="w"> </span><span class="k">desc</span><span class="w"> </span><span class="k">limit</span><span class="w"> </span><span class="mi">1</span><span class="p">);</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">---------+-----------+------------+------------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="n">job_id</span><span class="w">  </span><span class="o">|</span><span class="w"> </span><span class="n">job_title</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">min_salary</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">max_salary</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">---------+-----------+------------+------------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="n">AD_PRES</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">President</span><span class="w"> </span><span class="o">|</span><span class="w">      </span><span class="mi">20000</span><span class="w"> </span><span class="o">|</span><span class="w">      </span><span class="mi">40000</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">---------+-----------+------------+------------+
</span><span class="c1"></span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="k">avg</span><span class="p">(</span><span class="n">salary</span><span class="p">),</span><span class="n">department_id</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">employees</span><span class="w"> </span><span class="k">group</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="n">department_id</span><span class="w"> </span><span class="k">having</span><span class="w"> </span><span class="k">avg</span><span class="p">(</span><span class="n">salary</span><span class="p">)</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="p">(</span><span class="k">select</span><span class="w"> </span><span class="k">avg</span><span class="p">(</span><span class="n">salary</span><span class="p">)</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">employees</span><span class="w"> </span><span class="p">)</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">--------------+---------------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="k">avg</span><span class="p">(</span><span class="n">salary</span><span class="p">)</span><span class="w">  </span><span class="o">|</span><span class="w"> </span><span class="n">department_id</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">--------------+---------------+
</span><span class="c1"></span><span class="o">|</span><span class="w">  </span><span class="mi">7000</span><span class="p">.</span><span class="mi">000000</span><span class="w"> </span><span class="o">|</span><span class="w">          </span><span class="k">NULL</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w">  </span><span class="mi">9500</span><span class="p">.</span><span class="mi">000000</span><span class="w"> </span><span class="o">|</span><span class="w">            </span><span class="mi">20</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w">  </span><span class="mi">6500</span><span class="p">.</span><span class="mi">000000</span><span class="w"> </span><span class="o">|</span><span class="w">            </span><span class="mi">40</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w"> </span><span class="mi">10000</span><span class="p">.</span><span class="mi">000000</span><span class="w"> </span><span class="o">|</span><span class="w">            </span><span class="mi">70</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w">  </span><span class="mi">8955</span><span class="p">.</span><span class="mi">882353</span><span class="w"> </span><span class="o">|</span><span class="w">            </span><span class="mi">80</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w"> </span><span class="mi">19333</span><span class="p">.</span><span class="mi">333333</span><span class="w"> </span><span class="o">|</span><span class="w">            </span><span class="mi">90</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w">  </span><span class="mi">8600</span><span class="p">.</span><span class="mi">000000</span><span class="w"> </span><span class="o">|</span><span class="w">           </span><span class="mi">100</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w"> </span><span class="mi">10150</span><span class="p">.</span><span class="mi">000000</span><span class="w"> </span><span class="o">|</span><span class="w">           </span><span class="mi">110</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">--------------+---------------+
</span><span class="c1"></span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">employees</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="n">employee_id</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="p">(</span><span class="k">select</span><span class="w"> </span><span class="n">manager_id</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">employees</span><span class="w"> </span><span class="p">)</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">-------------+------------+-----------+----------+--------------------+---------+----------+----------------+------------+---------------+---------------------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="n">employee_id</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">first_name</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">last_name</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">email</span><span class="w">    </span><span class="o">|</span><span class="w"> </span><span class="n">phone_number</span><span class="w">       </span><span class="o">|</span><span class="w"> </span><span class="n">job_id</span><span class="w">  </span><span class="o">|</span><span class="w"> </span><span class="n">salary</span><span class="w">   </span><span class="o">|</span><span class="w"> </span><span class="n">commission_pct</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">manager_id</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">department_id</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">hiredate</span><span class="w">            </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">-------------+------------+-----------+----------+--------------------+---------+----------+----------------+------------+---------------+---------------------+
</span><span class="c1"></span><span class="o">|</span><span class="w">         </span><span class="mi">100</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">Steven</span><span class="w">     </span><span class="o">|</span><span class="w"> </span><span class="n">K_ing</span><span class="w">     </span><span class="o">|</span><span class="w"> </span><span class="n">SKING</span><span class="w">    </span><span class="o">|</span><span class="w"> </span><span class="mi">515</span><span class="p">.</span><span class="mi">123</span><span class="p">.</span><span class="mi">4567</span><span class="w">       </span><span class="o">|</span><span class="w"> </span><span class="n">AD_PRES</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="mi">24000</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="o">|</span><span class="w">           </span><span class="k">NULL</span><span class="w"> </span><span class="o">|</span><span class="w">       </span><span class="k">NULL</span><span class="w"> </span><span class="o">|</span><span class="w">            </span><span class="mi">90</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="mi">1992</span><span class="o">-</span><span class="mi">04</span><span class="o">-</span><span class="mi">03</span><span class="w"> </span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w">         </span><span class="mi">102</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">Lex</span><span class="w">        </span><span class="o">|</span><span class="w"> </span><span class="n">De</span><span class="w"> </span><span class="n">Haan</span><span class="w">   </span><span class="o">|</span><span class="w"> </span><span class="n">LDEH</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="o">#</span><span class="err">查询各个部门中最高工资中最低的那个部门的最低工资是多少</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w">  </span><span class="k">select</span><span class="w"> </span><span class="k">min</span><span class="p">(</span><span class="n">salary</span><span class="p">)</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">employees</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="n">department_id</span><span class="w"> </span><span class="o">=</span><span class="p">(</span><span class="k">select</span><span class="w"> </span><span class="n">department_id</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="p">(</span><span class="k">select</span><span class="w"> </span><span class="k">max</span><span class="p">(</span><span class="n">salary</span><span class="p">),</span><span class="n">department_id</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">employees</span><span class="w"> </span><span class="k">group</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="n">department_id</span><span class="w"> </span><span class="k">order</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="k">max</span><span class="p">(</span><span class="n">salary</span><span class="p">)</span><span class="w"> </span><span class="k">asc</span><span class="w"> </span><span class="k">limit</span><span class="w"> </span><span class="mi">1</span><span class="p">)</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="p">);</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">-------------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="k">min</span><span class="p">(</span><span class="n">salary</span><span class="p">)</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">-------------+
</span><span class="c1"></span><span class="o">|</span><span class="w">     </span><span class="mi">4400</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">-------------+
</span><span class="c1"></span><span class="mi">1</span><span class="w"> </span><span class="k">row</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="k">set</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="o">#</span><span class="err">查询平均工资最高的部门的</span><span class="n">manager的详细信息</span><span class="p">:</span><span class="n">last_name</span><span class="w"> </span><span class="p">,</span><span class="w"> </span><span class="n">department_id</span><span class="w"> </span><span class="p">,</span><span class="w"> </span><span class="n">email</span><span class="w"> </span><span class="p">,</span><span class="w"> </span><span class="n">salary</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="n">last_name</span><span class="w"> </span><span class="p">,</span><span class="w"> </span><span class="n">department_id</span><span class="w"> </span><span class="p">,</span><span class="w"> </span><span class="n">email</span><span class="w"> </span><span class="p">,</span><span class="w"> </span><span class="n">salary</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">employees</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="n">employee_id</span><span class="w"> </span><span class="o">=</span><span class="p">(</span><span class="k">select</span><span class="w"> </span><span class="n">manager_id</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">departments</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="n">department_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="k">select</span><span class="w"> </span><span class="n">department_id</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">employees</span><span class="w"> </span><span class="k">group</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="n">department_id</span><span class="w"> </span><span class="k">order</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="k">avg</span><span class="p">(</span><span class="n">salary</span><span class="p">)</span><span class="w"> </span><span class="k">desc</span><span class="w"> </span><span class="k">limit</span><span class="w"> </span><span class="mi">1</span><span class="p">))</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">-----------+---------------+-------+----------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="n">last_name</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">department_id</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">email</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">salary</span><span class="w">   </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">-----------+---------------+-------+----------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="n">K_ing</span><span class="w">     </span><span class="o">|</span><span class="w">            </span><span class="mi">90</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">SKING</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="mi">24000</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">-----------+---------------+-------+----------+
</span></code></pre></div><p>练习一下</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="k">count</span><span class="p">(</span><span class="o">*</span><span class="p">)</span><span class="err">个数</span><span class="w"> </span><span class="p">,</span><span class="w"> </span><span class="p">(</span><span class="k">select</span><span class="w"> </span><span class="n">majorid</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">major</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="n">majorid</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">s</span><span class="p">.</span><span class="n">majorid</span><span class="p">)</span><span class="err">专业号</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">student</span><span class="w"> </span><span class="n">s</span><span class="w"> </span><span class="k">group</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="n">majorid</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">------+--------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="err">个数</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="err">专业号</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">------+--------+
</span><span class="c1"></span><span class="o">|</span><span class="w">    </span><span class="mi">8</span><span class="w"> </span><span class="o">|</span><span class="w">      </span><span class="mi">1</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w">    </span><span class="mi">3</span><span class="w"> </span><span class="o">|</span><span class="w">      </span><span class="mi">2</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="k">avg</span><span class="p">(</span><span class="n">score</span><span class="p">),</span><span class="k">max</span><span class="p">(</span><span class="n">score</span><span class="p">)</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="k">result</span><span class="w"> </span><span class="k">group</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="n">studentno</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">--------------------+------------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="k">avg</span><span class="p">(</span><span class="n">score</span><span class="p">)</span><span class="w">         </span><span class="o">|</span><span class="w"> </span><span class="k">max</span><span class="p">(</span><span class="n">score</span><span class="p">)</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">--------------------+------------+
</span><span class="c1"></span><span class="o">|</span><span class="w">                </span><span class="mi">100</span><span class="w"> </span><span class="o">|</span><span class="w">        </span><span class="mi">100</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w">                 </span><span class="mi">90</span><span class="w"> </span><span class="o">|</span><span class="w">         </span><span class="mi">90</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="o">#</span><span class="err">查询姓张的每个学生的最低分大于</span><span class="mi">60</span><span class="err">的学号姓名</span><span class="w">  </span><span class="err">其实可以用</span><span class="k">join</span><span class="w"> </span><span class="err">就不用那么麻烦了</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="k">min</span><span class="p">(</span><span class="n">score</span><span class="p">)</span><span class="w"> </span><span class="err">最低分</span><span class="p">,</span><span class="n">r</span><span class="p">.</span><span class="n">studentno</span><span class="p">,(</span><span class="k">select</span><span class="w"> </span><span class="n">s</span><span class="p">.</span><span class="n">studentname</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">student</span><span class="w"> </span><span class="n">s</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="n">s</span><span class="p">.</span><span class="n">studentno</span><span class="o">=</span><span class="n">r</span><span class="p">.</span><span class="n">studentno</span><span class="w"> </span><span class="k">and</span><span class="w"> </span><span class="n">s</span><span class="p">.</span><span class="n">studentname</span><span class="w"> </span><span class="k">like</span><span class="s1">&#39;张%&#39;</span><span class="p">)</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="k">result</span><span class="w"> </span><span class="n">r</span><span class="w"> </span><span class="k">group</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="n">r</span><span class="p">.</span><span class="n">studentno</span><span class="w"> </span><span class="k">having</span><span class="w"> </span><span class="err">最低分</span><span class="o">&gt;</span><span class="mi">60</span><span class="w"> </span><span class="k">and</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="k">not</span><span class="w"> </span><span class="k">null</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">--------+-----------+--------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="err">最低分</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">studentno</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">a</span><span class="w">      </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">--------+-----------+--------+
</span><span class="c1"></span><span class="o">|</span><span class="w">    </span><span class="mi">100</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">s001</span><span class="w">      </span><span class="o">|</span><span class="w"> </span><span class="err">张三封</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w">     </span><span class="mi">70</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">s004</span><span class="w">      </span><span class="o">|</span><span class="w"> </span><span class="err">张翠山</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">--------+-----------+--------+
</span><span class="c1"></span><span class="w">
</span><span class="w"></span><span class="o">#</span><span class="err">可以使用</span><span class="n">diff函数</span><span class="w"> </span><span class="err">和</span><span class="w"> </span><span class="k">join</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="n">s</span><span class="p">.</span><span class="n">studentname</span><span class="p">,(</span><span class="k">select</span><span class="w"> </span><span class="n">majorname</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">major</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="n">majorid</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">s</span><span class="p">.</span><span class="n">majorid</span><span class="p">)</span><span class="w"> </span><span class="err">专业名称</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">student</span><span class="w"> </span><span class="n">s</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="n">s</span><span class="p">.</span><span class="n">borndate</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="s1">&#39;1998-1-1&#39;</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">-------------+----------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="n">studentname</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="err">专业名称</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">-------------+----------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="err">张无忌</span><span class="w">      </span><span class="o">|</span><span class="w"> </span><span class="n">html5</span><span class="w">    </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w"> </span><span class="err">赵敏</span><span class="w">        </span><span class="o">|</span><span class="w"> </span><span class="n">javaee</span><span class="w">   </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">-------------+----------+
</span><span class="c1"></span><span class="mi">2</span><span class="w"> </span><span class="k">rows</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="k">set</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="n">s</span><span class="p">.</span><span class="n">studentname</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">student</span><span class="w"> </span><span class="n">s</span><span class="w"> </span><span class="k">join</span><span class="w"> </span><span class="n">major</span><span class="w"> </span><span class="n">m</span><span class="w"> </span><span class="k">on</span><span class="w"> </span><span class="n">s</span><span class="p">.</span><span class="n">majorid</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">m</span><span class="p">.</span><span class="n">majorid</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="n">datediff</span><span class="p">(</span><span class="n">s</span><span class="p">.</span><span class="n">borndate</span><span class="p">,</span><span class="s1">&#39;1998-1-1&#39;</span><span class="p">)</span><span class="o">&gt;</span><span class="mi">0</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">-------------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="n">studentname</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">-------------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="err">张无忌</span><span class="w">      </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w"> </span><span class="err">赵敏</span><span class="w">        </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">-------------+
</span><span class="c1"></span><span class="mi">2</span><span class="w"> </span><span class="k">rows</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="k">set</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="o">#</span><span class="err">查询每个专业的男生人数和女生人数分别是多少</span><span class="w"> </span><span class="err">在这里</span><span class="n">s</span><span class="p">.</span><span class="n">majorid</span><span class="o">=</span><span class="n">s1</span><span class="p">.</span><span class="n">majorid</span><span class="w"> </span><span class="n">s1一定不能省略</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="n">s1</span><span class="p">.</span><span class="n">majorid</span><span class="p">,(</span><span class="k">select</span><span class="w"> </span><span class="k">count</span><span class="p">(</span><span class="o">*</span><span class="p">)</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">student</span><span class="w"> </span><span class="n">s</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="n">s</span><span class="p">.</span><span class="n">majorid</span><span class="o">=</span><span class="n">s1</span><span class="p">.</span><span class="n">majorid</span><span class="w"> </span><span class="k">and</span><span class="w"> </span><span class="n">s</span><span class="p">.</span><span class="n">sex</span><span class="w"> </span><span class="o">=</span><span class="s1">&#39;男&#39;</span><span class="p">)</span><span class="err">男生</span><span class="p">,(</span><span class="k">select</span><span class="w"> </span><span class="k">count</span><span class="p">(</span><span class="o">*</span><span class="p">)</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">student</span><span class="w"> </span><span class="n">s</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="n">s</span><span class="p">.</span><span class="n">majorid</span><span class="o">=</span><span class="n">s1</span><span class="p">.</span><span class="n">majorid</span><span class="w"> </span><span class="k">and</span><span class="w"> </span><span class="n">s</span><span class="p">.</span><span class="n">sex</span><span class="o">=</span><span class="s1">&#39;女&#39;</span><span class="p">)</span><span class="w"> </span><span class="err">女生</span><span class="w">  </span><span class="k">from</span><span class="w"> </span><span class="n">student</span><span class="w"> </span><span class="n">s1</span><span class="w"> </span><span class="k">group</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="n">s1</span><span class="p">.</span><span class="n">majorid</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">---------+------+------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="n">majorid</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="err">男生</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="err">女生</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">---------+------+------+
</span><span class="c1"></span><span class="o">|</span><span class="w">       </span><span class="mi">1</span><span class="w"> </span><span class="o">|</span><span class="w">    </span><span class="mi">5</span><span class="w"> </span><span class="o">|</span><span class="w">    </span><span class="mi">3</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w">       </span><span class="mi">2</span><span class="w"> </span><span class="o">|</span><span class="w">    </span><span class="mi">2</span><span class="w"> </span><span class="o">|</span><span class="w">    </span><span class="mi">1</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w">       </span><span class="mi">3</span><span class="w"> </span><span class="o">|</span><span class="w">    </span><span class="mi">2</span><span class="w"> </span><span class="o">|</span><span class="w">    </span><span class="mi">2</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">---------+------+------+
</span><span class="c1"></span><span class="mi">3</span><span class="w"> </span><span class="k">rows</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="k">set</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="o">#</span><span class="err">查询专业和张翠山一样的学生的最低分</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="k">min</span><span class="p">(</span><span class="n">score</span><span class="p">)</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="k">result</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="n">studentno</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="p">(</span><span class="k">select</span><span class="w"> </span><span class="n">s</span><span class="p">.</span><span class="n">studentno</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">student</span><span class="w"> </span><span class="n">s</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="n">majorid</span><span class="w"> </span><span class="o">=</span><span class="p">(</span><span class="k">select</span><span class="w"> </span><span class="n">majorid</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">student</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="n">studentname</span><span class="w"> </span><span class="o">=</span><span class="s1">&#39;张翠山&#39;</span><span class="p">)</span><span class="w"> </span><span class="k">and</span><span class="w"> </span><span class="n">studentname</span><span class="w"> </span><span class="o">&lt;&gt;</span><span class="s1">&#39;张翠山&#39;</span><span class="p">)</span><span class="w"> </span><span class="k">group</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="n">studentno</span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">------------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="k">min</span><span class="p">(</span><span class="n">score</span><span class="p">)</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">------------+
</span><span class="c1"></span><span class="o">|</span><span class="w">        </span><span class="mi">100</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w">         </span><span class="mi">90</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">------------+
</span><span class="c1"></span><span class="mi">2</span><span class="w"> </span><span class="k">rows</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="k">set</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="o">#</span><span class="err">查询大于</span><span class="mi">60</span><span class="err">分的学生的姓名</span><span class="w"> </span><span class="err">密码</span><span class="w"> </span><span class="err">专业名</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="n">s</span><span class="p">.</span><span class="n">studentname</span><span class="w"> </span><span class="p">,</span><span class="w"> </span><span class="n">s</span><span class="p">.</span><span class="n">loginpwd</span><span class="w"> </span><span class="p">,</span><span class="w"> </span><span class="p">(</span><span class="k">select</span><span class="w"> </span><span class="n">majorname</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">major</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="n">majorid</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">s</span><span class="p">.</span><span class="n">majorid</span><span class="p">)</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">student</span><span class="w"> </span><span class="n">s</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="n">s</span><span class="p">.</span><span class="n">studentno</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="p">(</span><span class="k">select</span><span class="w"> </span><span class="k">distinct</span><span class="w"> </span><span class="n">studentno</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="k">result</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="n">score</span><span class="w"> </span><span class="o">&gt;</span><span class="mi">60</span><span class="p">)</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">-------------+----------+---------------------------------------------------------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="n">studentname</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">loginpwd</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="p">(</span><span class="k">select</span><span class="w"> </span><span class="n">majorname</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">major</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="n">majorid</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">s</span><span class="p">.</span><span class="n">majorid</span><span class="p">)</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">-------------+----------+---------------------------------------------------------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="err">张三封</span><span class="w">      </span><span class="o">|</span><span class="w"> </span><span class="mi">8888</span><span class="w">     </span><span class="o">|</span><span class="w"> </span><span class="n">javaee</span><span class="w">                                                  </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w"> </span><span class="err">殷天正</span><span class="w">      </span><span class="o">|</span><span class="w"> </span><span class="mi">8888</span><span class="w">     </span><span class="o">|</span><span class="w"> </span><span class="n">javaee</span><span class="w">                                                  </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w"> </span><span class="err">周伯通</span><span class="w">      </span><span class="o">|</span><span class="w"> </span><span class="mi">8888</span><span class="w">     </span><span class="o">|</span><span class="w"> </span><span class="n">html5</span><span class="w">                                                   </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w"> </span><span class="err">张翠山</span><span class="w">      </span><span class="o">|</span><span class="w"> </span><span class="mi">8888</span><span class="w">     </span><span class="o">|</span><span class="w"> </span><span class="n">javaee</span><span class="w">                                                  </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w"> </span><span class="err">小小张</span><span class="w">      </span><span class="o">|</span><span class="w"> </span><span class="mi">8888</span><span class="w">     </span><span class="o">|</span><span class="w"> </span><span class="n">android</span><span class="w">                                                 </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w"> </span><span class="err">张无忌</span><span class="w">      </span><span class="o">|</span><span class="w"> </span><span class="mi">8888</span><span class="w">     </span><span class="o">|</span><span class="w"> </span><span class="n">html5</span><span class="w">                                                   </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">-------------+----------+---------------------------------------------------------+
</span><span class="c1"></span><span class="w">
</span><span class="w"></span><span class="o">#</span><span class="err">按邮箱的位数分组</span><span class="p">,</span><span class="err">并查询个数</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="k">count</span><span class="p">(</span><span class="o">*</span><span class="p">)</span><span class="err">个数</span><span class="p">,</span><span class="w"> </span><span class="k">length</span><span class="p">(</span><span class="n">s</span><span class="p">.</span><span class="n">email</span><span class="p">)</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">student</span><span class="w"> </span><span class="n">s</span><span class="w"> </span><span class="k">group</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="k">length</span><span class="p">(</span><span class="n">s</span><span class="p">.</span><span class="n">email</span><span class="p">)</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">------+-----------------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="err">个数</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="k">length</span><span class="p">(</span><span class="n">s</span><span class="p">.</span><span class="n">email</span><span class="p">)</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">------+-----------------+
</span><span class="c1"></span><span class="o">|</span><span class="w">    </span><span class="mi">1</span><span class="w"> </span><span class="o">|</span><span class="w">              </span><span class="mi">20</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w">    </span><span class="mi">2</span><span class="w"> </span><span class="o">|</span><span class="w">              </span><span class="mi">19</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w">    </span><span class="mi">2</span><span class="w"> </span><span class="o">|</span><span class="w">              </span><span class="mi">18</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w">    </span><span class="mi">6</span><span class="w"> </span><span class="o">|</span><span class="w">            </span><span class="k">NULL</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w">    </span><span class="mi">2</span><span class="w"> </span><span class="o">|</span><span class="w">              </span><span class="mi">17</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w">    </span><span class="mi">2</span><span class="w"> </span><span class="o">|</span><span class="w">              </span><span class="mi">15</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">------+-----------------+
</span><span class="c1"></span><span class="w">
</span><span class="w"></span><span class="o">#</span><span class="err">查询学生名</span><span class="w"> </span><span class="err">专业名</span><span class="w"> </span><span class="err">分数</span><span class="w"> </span><span class="err">这是错误的</span><span class="w"> </span><span class="err">如果使用</span><span class="n">join是取完全交集</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="n">s</span><span class="p">.</span><span class="n">studentname</span><span class="w"> </span><span class="p">,</span><span class="n">m</span><span class="p">.</span><span class="n">majorname</span><span class="w"> </span><span class="p">,</span><span class="w"> </span><span class="n">r</span><span class="p">.</span><span class="n">score</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">student</span><span class="w"> </span><span class="n">s</span><span class="w"> </span><span class="k">join</span><span class="w"> </span><span class="n">major</span><span class="w"> </span><span class="n">m</span><span class="w"> </span><span class="k">on</span><span class="w"> </span><span class="n">s</span><span class="p">.</span><span class="n">majorid</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">m</span><span class="p">.</span><span class="n">majorid</span><span class="w"> </span><span class="k">join</span><span class="w"> </span><span class="k">result</span><span class="w"> </span><span class="n">r</span><span class="w"> </span><span class="k">on</span><span class="w"> </span><span class="n">s</span><span class="p">.</span><span class="n">studentno</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">r</span><span class="p">.</span><span class="n">studentno</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">-------------+-----------+-------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="n">studentname</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">majorname</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">score</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">-------------+-----------+-------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="err">张翠山</span><span class="w">      </span><span class="o">|</span><span class="w"> </span><span class="n">javaee</span><span class="w">    </span><span class="o">|</span><span class="w">    </span><span class="mi">70</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w"> </span><span class="err">殷天正</span><span class="w">      </span><span class="o">|</span><span class="w"> </span><span class="n">javaee</span><span class="w">    </span><span class="o">|</span><span class="w">    </span><span class="mi">90</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="o">#</span><span class="err">查询学生名</span><span class="w"> </span><span class="err">专业名</span><span class="w"> </span><span class="err">分数</span><span class="w"> </span><span class="err">这是错误的</span><span class="w"> </span><span class="err">应该使用</span><span class="k">left</span><span class="w"> </span><span class="n">join防止出现score为null的情况</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="n">s</span><span class="p">.</span><span class="n">studentname</span><span class="w"> </span><span class="p">,</span><span class="n">m</span><span class="p">.</span><span class="n">majorname</span><span class="w"> </span><span class="p">,</span><span class="w"> </span><span class="n">r</span><span class="p">.</span><span class="n">score</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">student</span><span class="w"> </span><span class="n">s</span><span class="w"> </span><span class="k">join</span><span class="w"> </span><span class="n">major</span><span class="w"> </span><span class="n">m</span><span class="w"> </span><span class="k">on</span><span class="w"> </span><span class="n">s</span><span class="p">.</span><span class="n">majorid</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">m</span><span class="p">.</span><span class="n">majorid</span><span class="w"> </span><span class="k">left</span><span class="w"> </span><span class="k">join</span><span class="w"> </span><span class="k">result</span><span class="w"> </span><span class="n">r</span><span class="w"> </span><span class="k">on</span><span class="w"> </span><span class="n">s</span><span class="p">.</span><span class="n">studentno</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">r</span><span class="p">.</span><span class="n">studentno</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">-------------+-----------+-------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="n">studentname</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">majorname</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">score</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">-------------+-----------+-------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="err">张三封</span><span class="w">      </span><span class="o">|</span><span class="w"> </span><span class="n">javaee</span><span class="w">    </span><span class="o">|</span><span class="w">   </span><span class="mi">100</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w"> </span><span class="err">殷天正</span><span class="w">      </span><span class="o">|</span><span class="w"> </span><span class="n">javaee</span><span class="w">    </span><span class="o">|</span><span class="w">    </span><span class="mi">90</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w"> </span><span class="err">周伯通</span><span class="w">      </span><span class="o">|</span><span class="w"> </span><span class="n">html5</span><span class="w">     </span><span class="o">|</span><span class="w">    </span><span class="mi">80</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="n">s</span><span class="p">.</span><span class="n">studentname</span><span class="w"> </span><span class="p">,</span><span class="n">m</span><span class="p">.</span><span class="n">majorname</span><span class="w"> </span><span class="p">,</span><span class="w"> </span><span class="n">r</span><span class="p">.</span><span class="n">score</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">student</span><span class="w"> </span><span class="n">s</span><span class="w"> </span><span class="k">join</span><span class="w"> </span><span class="n">major</span><span class="w"> </span><span class="n">m</span><span class="w"> </span><span class="k">on</span><span class="w"> </span><span class="n">s</span><span class="p">.</span><span class="n">majorid</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">m</span><span class="p">.</span><span class="n">majorid</span><span class="w"> </span><span class="k">left</span><span class="w"> </span><span class="k">join</span><span class="w"> </span><span class="k">result</span><span class="w"> </span><span class="n">r</span><span class="w"> </span><span class="k">on</span><span class="w"> </span><span class="n">s</span><span class="p">.</span><span class="n">studentno</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">r</span><span class="p">.</span><span class="n">studentno</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="o">#</span><span class="err">查询没有成绩的学生人数</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="p">(</span><span class="k">select</span><span class="w"> </span><span class="k">distinct</span><span class="w"> </span><span class="n">s</span><span class="p">.</span><span class="n">studentno</span><span class="w"> </span><span class="err">学号</span><span class="p">,(</span><span class="k">select</span><span class="w"> </span><span class="n">score</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="k">result</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="n">studentno</span><span class="w"> </span><span class="o">=</span><span class="n">s</span><span class="p">.</span><span class="n">studentno</span><span class="w"> </span><span class="k">limit</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="p">)</span><span class="n">a</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">student</span><span class="w"> </span><span class="n">s</span><span class="p">)</span><span class="w"> </span><span class="n">b</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="n">b</span><span class="p">.</span><span class="n">a</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="k">null</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">------+------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="err">学号</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">a</span><span class="w">    </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">------+------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="n">S007</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="k">NULL</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w"> </span><span class="n">S008</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="k">NULL</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w"> </span><span class="n">S009</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="k">NULL</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="k">count</span><span class="p">(</span><span class="o">*</span><span class="p">)</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="p">(</span><span class="k">select</span><span class="w"> </span><span class="k">distinct</span><span class="w"> </span><span class="n">s</span><span class="p">.</span><span class="n">studentno</span><span class="w"> </span><span class="err">学号</span><span class="p">,(</span><span class="k">select</span><span class="w"> </span><span class="n">score</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="k">result</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="n">studentno</span><span class="w"> </span><span class="o">=</span><span class="n">s</span><span class="p">.</span><span class="n">studentno</span><span class="w"> </span><span class="k">limit</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="p">)</span><span class="n">a</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">student</span><span class="w"> </span><span class="n">s</span><span class="p">)</span><span class="w"> </span><span class="n">b</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="n">b</span><span class="p">.</span><span class="n">a</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="k">null</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">----------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="k">count</span><span class="p">(</span><span class="o">*</span><span class="p">)</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">----------+
</span><span class="c1"></span><span class="o">|</span><span class="w">        </span><span class="mi">9</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">----------+
</span></code></pre></div><h5 id="联合查询">联合查询</h5>
<p>union 联合 合并:将多条查询语句的结果合并成一个结果</p>
<p>查询语句1 union 查询语句2 union 查询语句3 &hellip;</p>
<p>查询部门编号&gt;90 或 邮箱包含a的员工信息</p>
<p><strong>应用场景</strong></p>
<p>保证两个表的列数一致 , 并不要求两个表的列名一致 ,就可以使用联合查询</p>
<p>要查询的结果来源于多个表,且多个表没有直接的连接关系,但查询的信息一致时</p>
<p>例如全站搜索 ,肯定不可能所有的数据都放在一个表里 , 所以这时候就需要union</p>
<p><strong>注意</strong></p>
<p><strong>union 会默认去重</strong></p>
<p><strong>union all 可以包含重复项</strong></p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">employees</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="n">department_id</span><span class="w"> </span><span class="o">&gt;</span><span class="mi">90</span><span class="w"> </span><span class="k">or</span><span class="w"> </span><span class="n">email</span><span class="w"> </span><span class="k">like</span><span class="s1">&#39;%a%&#39;</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">employees</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="n">department_id</span><span class="w"> </span><span class="o">&gt;</span><span class="mi">90</span><span class="w"> </span><span class="k">union</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">employees</span><span class="w"> </span><span class="k">where</span><span class="w">  </span><span class="n">email</span><span class="w"> </span><span class="k">like</span><span class="s1">&#39;%a%&#39;</span><span class="w"> </span><span class="p">;</span><span class="w">
</span></code></pre></div><h5 id="dml语言-数据操作语言">DML语言 数据操作语言</h5>
<p>插入 insert</p>
<p>更新 update</p>
<p>删除 delete</p>
<h5 id="插入语句">插入语句</h5>
<p><strong>方式一</strong></p>
<p>语法:</p>
<p>insert into 表名(列名, &hellip;) values(值, &hellip;) ;</p>
<p><strong>注意</strong></p>
<ul>
<li>插入的值的类型要与列的类型一直或兼容</li>
<li>不可以为null的列必须插入值,可以为null的列如何插入值
<ul>
<li>插入null</li>
<li>或者在 into beauty(少一点字段)</li>
</ul>
</li>
<li>列的顺序可以调换</li>
<li>列和值的个数必须一致</li>
<li>可以省略列名,默认所有列名,而且列的顺序和表中列的顺序一直</li>
</ul>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="o">#</span><span class="err">经典型</span><span class="w"> </span><span class="k">insert</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">insert</span><span class="w"> </span><span class="k">into</span><span class="w"> </span><span class="n">beauty</span><span class="p">(</span><span class="n">id</span><span class="p">,</span><span class="n">name</span><span class="p">,</span><span class="n">sex</span><span class="p">,</span><span class="n">borndate</span><span class="p">,</span><span class="n">phone</span><span class="p">,</span><span class="n">photo</span><span class="p">,</span><span class="n">boyfriend_id</span><span class="p">)</span><span class="w"> </span><span class="k">values</span><span class="p">(</span><span class="mi">13</span><span class="p">,</span><span class="s1">&#39;唐艺昕&#39;</span><span class="p">,</span><span class="s1">&#39;女&#39;</span><span class="p">,</span><span class="s1">&#39;1990-4-23&#39;</span><span class="p">,</span><span class="s1">&#39;18988888&#39;</span><span class="p">,</span><span class="k">null</span><span class="p">,</span><span class="mi">2</span><span class="p">);</span><span class="w">
</span><span class="w"></span><span class="n">Query</span><span class="w"> </span><span class="n">OK</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="k">row</span><span class="w"> </span><span class="n">affected</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">insert</span><span class="w"> </span><span class="k">into</span><span class="w"> </span><span class="n">beauty</span><span class="p">(</span><span class="n">id</span><span class="p">,</span><span class="n">name</span><span class="p">,</span><span class="n">sex</span><span class="p">,</span><span class="n">phone</span><span class="p">)</span><span class="w"> </span><span class="k">values</span><span class="p">(</span><span class="mi">14</span><span class="p">,</span><span class="s1">&#39;金星&#39;</span><span class="p">,</span><span class="s1">&#39;女&#39;</span><span class="p">,</span><span class="s1">&#39;13888888&#39;</span><span class="p">);</span><span class="w">
</span><span class="w"></span><span class="n">Query</span><span class="w"> </span><span class="n">OK</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="k">row</span><span class="w"> </span><span class="n">affected</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">insert</span><span class="w"> </span><span class="k">into</span><span class="w"> </span><span class="n">beauty</span><span class="w"> </span><span class="k">values</span><span class="p">(</span><span class="mi">18</span><span class="p">,</span><span class="s1">&#39;张飞&#39;</span><span class="p">,</span><span class="s1">&#39;女&#39;</span><span class="p">,</span><span class="s1">&#39;1990-4-23&#39;</span><span class="p">,</span><span class="s1">&#39;119&#39;</span><span class="p">,</span><span class="k">null</span><span class="p">,</span><span class="k">null</span><span class="p">);</span><span class="w">
</span><span class="w"></span><span class="n">Query</span><span class="w"> </span><span class="n">OK</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="k">row</span><span class="w"> </span><span class="n">affected</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span><span class="w">
</span></code></pre></div><p>**方式二	**</p>
<p>语法</p>
<p>insert into 表名 set 列名 = 值 , 列名 = 值 &hellip;</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">insert</span><span class="w"> </span><span class="k">into</span><span class="w"> </span><span class="n">beauty</span><span class="w"> </span><span class="k">set</span><span class="w"> </span><span class="n">id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">19</span><span class="w"> </span><span class="p">,</span><span class="w"> </span><span class="n">name</span><span class="w">  </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;文涛&#39;</span><span class="w"> </span><span class="p">,</span><span class="w"> </span><span class="n">phone</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;999&#39;</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="n">Query</span><span class="w"> </span><span class="n">OK</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="k">row</span><span class="w"> </span><span class="n">affected</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span><span class="w">
</span></code></pre></div><p>**两种方式的区别	**</p>
<ul>
<li>方式一支持多行插入,方式二不支持</li>
<li>方式一支持子查询,方式二不支持</li>
</ul>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="o">#</span><span class="err">方式一</span><span class="w"> </span><span class="err">支持子查询</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">insert</span><span class="w"> </span><span class="k">into</span><span class="w"> </span><span class="n">beauty</span><span class="p">(</span><span class="n">id</span><span class="p">,</span><span class="n">name</span><span class="p">,</span><span class="n">phone</span><span class="p">)</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="mi">26</span><span class="p">,</span><span class="s1">&#39;宋西&#39;</span><span class="p">,</span><span class="s1">&#39;11809866&#39;</span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="n">Query</span><span class="w"> </span><span class="n">OK</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="k">row</span><span class="w"> </span><span class="n">affected</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">01</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span><span class="w">
</span><span class="w"></span><span class="n">Records</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="w">  </span><span class="n">Duplicates</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="w">  </span><span class="n">Warnings</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="o">#</span><span class="err">方式一</span><span class="w"> </span><span class="err">支持多行插入</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">insert</span><span class="w"> </span><span class="k">into</span><span class="w"> </span><span class="n">beauty</span><span class="p">(</span><span class="n">id</span><span class="p">,</span><span class="n">name</span><span class="p">,</span><span class="n">phone</span><span class="p">)</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="n">id</span><span class="w"> </span><span class="p">,</span><span class="w"> </span><span class="n">boyname</span><span class="p">,</span><span class="s1">&#39;120&#39;</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">boys</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="n">id</span><span class="o">&lt;</span><span class="mi">3</span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="n">ERROR</span><span class="w"> </span><span class="mi">1062</span><span class="w"> </span><span class="p">(</span><span class="mi">23000</span><span class="p">):</span><span class="w"> </span><span class="n">Duplicate</span><span class="w"> </span><span class="n">entry</span><span class="w"> </span><span class="s1">&#39;1&#39;</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="k">key</span><span class="w"> </span><span class="s1">&#39;beauty.PRIMARY&#39;</span><span class="w">
</span></code></pre></div><h5 id="修改语句">修改语句</h5>
<p>修改单表的记录(重要)</p>
<p>update 表名 set 列=新值 , 列=新值 where 筛选条件 ;</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="k">update</span><span class="w"> </span><span class="n">beauty</span><span class="w"> </span><span class="k">set</span><span class="w"> </span><span class="n">phone</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;11010011&#39;</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="n">name</span><span class="w"> </span><span class="k">like</span><span class="w"> </span><span class="s1">&#39;唐%&#39;</span><span class="w"> </span><span class="p">;</span><span class="w"> 
</span><span class="w">
</span><span class="w"></span><span class="k">update</span><span class="w"> </span><span class="n">boys</span><span class="w"> </span><span class="k">set</span><span class="w"> </span><span class="n">boyname</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;张飞&#39;</span><span class="w"> </span><span class="p">,</span><span class="n">userCp</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">10</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="n">id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="p">;</span><span class="w">  
</span></code></pre></div><p>修改多表的记录(补充)</p>
<p><strong>sql92语法</strong></p>
<p>update 表1 别名 , 表2 别名</p>
<p>set 列=值 , &hellip; where 连接条件 and 筛选条件 ;</p>
<p><strong>sql99语法</strong></p>
<p>update 表1 别名 inner join 表2 别名 on 连接条件 set 列=值, &hellip; where 筛选条件</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="o">#</span><span class="err">修改张无忌的女朋友的手机号为</span><span class="mi">114</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">update</span><span class="w"> </span><span class="n">beauty</span><span class="w"> </span><span class="n">b</span><span class="w"> </span><span class="k">join</span><span class="w"> </span><span class="n">boys</span><span class="w"> </span><span class="k">on</span><span class="w"> </span><span class="n">b</span><span class="p">.</span><span class="n">boyfriend_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">boys</span><span class="p">.</span><span class="n">id</span><span class="w">  </span><span class="k">set</span><span class="w"> </span><span class="n">phone</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;114&#39;</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="n">boys</span><span class="p">.</span><span class="n">boyname</span><span class="w"> </span><span class="o">=</span><span class="s1">&#39;张无忌&#39;</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="n">Query</span><span class="w"> </span><span class="n">OK</span><span class="p">,</span><span class="w"> </span><span class="mi">3</span><span class="w"> </span><span class="k">rows</span><span class="w"> </span><span class="n">affected</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span><span class="w">
</span><span class="w"></span><span class="k">Rows</span><span class="w"> </span><span class="n">matched</span><span class="p">:</span><span class="w"> </span><span class="mi">3</span><span class="w">  </span><span class="n">Changed</span><span class="p">:</span><span class="w"> </span><span class="mi">3</span><span class="w">  </span><span class="n">Warnings</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="o">#</span><span class="err">也可以使用修改单表</span><span class="w"> </span><span class="err">使用子查询</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">update</span><span class="w"> </span><span class="n">beauty</span><span class="w"> </span><span class="n">b</span><span class="w"> </span><span class="k">set</span><span class="w"> </span><span class="n">phone</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;115&#39;</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="n">b</span><span class="p">.</span><span class="n">boyfriend_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="k">select</span><span class="w"> </span><span class="n">id</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">boys</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="n">boyname</span><span class="w"> </span><span class="o">=</span><span class="s1">&#39;张无忌&#39;</span><span class="p">)</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="n">Query</span><span class="w"> </span><span class="n">OK</span><span class="p">,</span><span class="w"> </span><span class="mi">3</span><span class="w"> </span><span class="k">rows</span><span class="w"> </span><span class="n">affected</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span><span class="w">
</span><span class="w"></span><span class="k">Rows</span><span class="w"> </span><span class="n">matched</span><span class="p">:</span><span class="w"> </span><span class="mi">3</span><span class="w">  </span><span class="n">Changed</span><span class="p">:</span><span class="w"> </span><span class="mi">3</span><span class="w">  </span><span class="n">Warnings</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="o">#</span><span class="err">修改没有男朋友的女神的男朋友编号都为</span><span class="mi">2</span><span class="err">号</span><span class="w">
</span><span class="w"></span><span class="o">#</span><span class="err">先</span><span class="k">select</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="n">b</span><span class="p">.</span><span class="n">name</span><span class="w"> </span><span class="p">,</span><span class="n">b</span><span class="p">.</span><span class="n">boyfriend_id</span><span class="p">,</span><span class="n">boyname</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">beauty</span><span class="w"> </span><span class="n">b</span><span class="w"> </span><span class="k">left</span><span class="w"> </span><span class="k">join</span><span class="w"> </span><span class="n">boys</span><span class="w"> </span><span class="k">on</span><span class="w"> </span><span class="n">b</span><span class="p">.</span><span class="n">boyfriend_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">boys</span><span class="p">.</span><span class="n">id</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="n">boyfriend_id</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="k">not</span><span class="w"> </span><span class="k">null</span><span class="w"> </span><span class="k">and</span><span class="w"> </span><span class="n">boyname</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="k">null</span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">--------+--------------+---------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="n">name</span><span class="w">   </span><span class="o">|</span><span class="w"> </span><span class="n">boyfriend_id</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">boyname</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">--------+--------------+---------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="err">柳岩</span><span class="w">   </span><span class="o">|</span><span class="w">            </span><span class="mi">8</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="k">NULL</span><span class="w">    </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w"> </span><span class="err">苍老师</span><span class="w"> </span><span class="o">|</span><span class="w">            </span><span class="mi">9</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="k">NULL</span><span class="w">    </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w"> </span><span class="err">周冬雨</span><span class="w"> </span><span class="o">|</span><span class="w">            </span><span class="mi">9</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="k">NULL</span><span class="w">    </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w"> </span><span class="err">岳灵珊</span><span class="w"> </span><span class="o">|</span><span class="w">            </span><span class="mi">9</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="k">NULL</span><span class="w">    </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w"> </span><span class="err">双儿</span><span class="w">   </span><span class="o">|</span><span class="w">            </span><span class="mi">9</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="k">NULL</span><span class="w">    </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w"> </span><span class="err">夏雪</span><span class="w">   </span><span class="o">|</span><span class="w">            </span><span class="mi">9</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="k">NULL</span><span class="w">    </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">--------+--------------+---------+
</span><span class="c1"></span><span class="mi">6</span><span class="w"> </span><span class="k">rows</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="k">set</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="o">#</span><span class="err">再</span><span class="k">update</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">update</span><span class="w"> </span><span class="n">beauty</span><span class="w"> </span><span class="n">b</span><span class="w"> </span><span class="k">left</span><span class="w"> </span><span class="k">join</span><span class="w"> </span><span class="n">boys</span><span class="w"> </span><span class="k">on</span><span class="w"> </span><span class="n">b</span><span class="p">.</span><span class="n">boyfriend_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">boys</span><span class="p">.</span><span class="n">id</span><span class="w"> </span><span class="k">set</span><span class="w"> </span><span class="n">b</span><span class="p">.</span><span class="n">boyfriend_id</span><span class="w"> </span><span class="o">=</span><span class="mi">2</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="n">boyfriend_id</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="k">not</span><span class="w"> </span><span class="k">null</span><span class="w"> </span><span class="k">and</span><span class="w"> </span><span class="n">boyname</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="k">null</span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="n">Query</span><span class="w"> </span><span class="n">OK</span><span class="p">,</span><span class="w"> </span><span class="mi">6</span><span class="w"> </span><span class="k">rows</span><span class="w"> </span><span class="n">affected</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span><span class="w">
</span><span class="w"></span><span class="k">Rows</span><span class="w"> </span><span class="n">matched</span><span class="p">:</span><span class="w"> </span><span class="mi">6</span><span class="w">  </span><span class="n">Changed</span><span class="p">:</span><span class="w"> </span><span class="mi">6</span><span class="w">  </span><span class="n">Warnings</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="o">#</span><span class="err">再查一下</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="n">b</span><span class="p">.</span><span class="n">name</span><span class="w"> </span><span class="p">,</span><span class="n">b</span><span class="p">.</span><span class="n">boyfriend_id</span><span class="p">,</span><span class="n">boyname</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">beauty</span><span class="w"> </span><span class="n">b</span><span class="w"> </span><span class="k">left</span><span class="w"> </span><span class="k">join</span><span class="w"> </span><span class="n">boys</span><span class="w"> </span><span class="k">on</span><span class="w"> </span><span class="n">b</span><span class="p">.</span><span class="n">boyfriend_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">boys</span><span class="p">.</span><span class="n">id</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="n">boyfriend_id</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="k">not</span><span class="w"> </span><span class="k">null</span><span class="w"> </span><span class="k">and</span><span class="w"> </span><span class="n">boyname</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="k">null</span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="n">Empty</span><span class="w"> </span><span class="k">set</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span><span class="w">
</span></code></pre></div><h5 id="删除语句">删除语句</h5>
<p>方式一  delete</p>
<p>方式二 truncate</p>
<p>语法:truncate table 表名 (删除的是所有的 不能加筛选条件)</p>
<p><strong>单表的删除</strong></p>
<p>语法:delete from 表名 where 筛选条件</p>
<p><strong>多表的删除</strong></p>
<p>语法:</p>
<p><strong>sql92语法</strong></p>
<p>delete 表1的别名 from 表1 别名 , 表2 别名 where 连接条件 and 筛选条件 ;  //删除的是表1的数据内容</p>
<p>delete 表2的别名 from 表1 别名 , 表2 别名 where 连接条件 and 筛选条件 ;  //删除的是表2的数据内容</p>
<p>delete 表1的别名, 表2的别名 from 表1 别名 , 表2 别名 where 连接条件 and 筛选条件 ; //删除的是表1和表2的数据内容</p>
<p><strong>sql99语法</strong></p>
<p>delete 表1的别名,表2的别名 from 表1 别名 join 表2 别名 on 连接条件 where 筛选条件</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="o">#</span><span class="err">单表的删除</span><span class="w">
</span><span class="w"></span><span class="k">delete</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">beauty</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="n">phone</span><span class="w"> </span><span class="k">like</span><span class="w"> </span><span class="s1">&#39;%9&#39;</span><span class="w"> </span><span class="p">;</span><span class="w"> 
</span><span class="w">
</span><span class="w"></span><span class="o">#</span><span class="err">删除张无忌的女朋友的信息</span><span class="w">
</span><span class="w"></span><span class="o">#</span><span class="err">多表删除</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">delete</span><span class="w"> </span><span class="n">b</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">beauty</span><span class="w"> </span><span class="n">b</span><span class="w"> </span><span class="k">join</span><span class="w"> </span><span class="n">boys</span><span class="w"> </span><span class="n">boy</span><span class="w"> </span><span class="k">on</span><span class="w"> </span><span class="n">b</span><span class="p">.</span><span class="n">boyfriend_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">boy</span><span class="p">.</span><span class="n">id</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="n">boy</span><span class="p">.</span><span class="n">boyname</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;张无忌&#39;</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="n">Query</span><span class="w"> </span><span class="n">OK</span><span class="p">,</span><span class="w"> </span><span class="mi">3</span><span class="w"> </span><span class="k">rows</span><span class="w"> </span><span class="n">affected</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">01</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="o">#</span><span class="err">删除黄晓明和他女朋友的信息</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">delete</span><span class="w"> </span><span class="k">g</span><span class="w"> </span><span class="p">,</span><span class="w"> </span><span class="n">b</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">beauty</span><span class="w"> </span><span class="k">g</span><span class="w"> </span><span class="k">join</span><span class="w"> </span><span class="n">boys</span><span class="w"> </span><span class="n">b</span><span class="w"> </span><span class="k">on</span><span class="w"> </span><span class="k">g</span><span class="p">.</span><span class="n">boyfriend_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">b</span><span class="p">.</span><span class="n">id</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="n">b</span><span class="p">.</span><span class="n">boyname</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;黄晓明&#39;</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="n">Query</span><span class="w"> </span><span class="n">OK</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="k">rows</span><span class="w"> </span><span class="n">affected</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span><span class="w">
</span></code></pre></div><p><strong>方式二 truncate语句</strong></p>
<p>直接清空 truncate table boys ;</p>
<h5 id="delete和truncate的区别">delete和truncate的区别</h5>
<ul>
<li>delete可以加where条件 , truncate不能加</li>
<li>truncate 删除, 效率高一丢丢</li>
<li>假如要删除的表中有自增长列,如果用delete删除后,再插入数据,自增长列的值依旧是从断点开始,而如果truncate删除后,再插入数据,自增长列的值从1开始</li>
<li>truncate删除没有返回值,delete删除有返回值</li>
<li>truncate删除回滚,delete删除可以回滚</li>
</ul>

</section>


    <footer class="article-footer">
    

    
    <section class="article-copyright">
        <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-copyright" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="12" cy="12" r="9" />
  <path d="M14.5 9a3.5 4 0 1 0 0 6" />
</svg>



        <span>Licensed under CC BY-NC-SA 4.0</span>
    </section>
    </footer>


    
</article>

    <aside class="related-contents--wrapper">
    
    
</aside>

     
     
        
    <div class="disqus-container">
    <div id="disqus_thread"></div>
<script type="application/javascript">
    var disqus_config = function () {
    
    
    
    };
    (function() {
        if (["localhost", "127.0.0.1"].indexOf(window.location.hostname) != -1) {
            document.getElementById('disqus_thread').innerHTML = 'Disqus comments not available by default when the website is previewed locally.';
            return;
        }
        var d = document, s = d.createElement('script'); s.async = true;
        s.src = '//' + "hugo-theme-stack" + '.disqus.com/embed.js';
        s.setAttribute('data-timestamp', +new Date());
        (d.head || d.body).appendChild(s);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="https://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
</div>

<style>
    .disqus-container {
        background-color: var(--card-background);
        border-radius: var(--card-border-radius);
        box-shadow: var(--shadow-l1);
        padding: var(--card-padding);
    }
</style>

<script>
    window.addEventListener('onColorSchemeChange', (e) => {
        if (DISQUS) {
            DISQUS.reset({
                reload: true
            });
        }
    })
</script>

    

    <footer class="site-footer">
    <section class="copyright">
        &copy; 
        
            2020 - 
        
        2021 think hy how to learn
    </section>
    
    <section class="powerby">
        Built with <a href="https://gohugo.io/" target="_blank" rel="noopener">Hugo</a> <br />
        Theme <b><a href="https://github.com/CaiJimmy/hugo-theme-stack" target="_blank" rel="noopener" data-version="3.2.0">Stack</a></b> designed by <a href="https://jimmycai.com" target="_blank" rel="noopener">Jimmy</a>
    </section>
</footer>


    
<div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">

    
    <div class="pswp__bg"></div>

    
    <div class="pswp__scroll-wrap">

        
        <div class="pswp__container">
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
        </div>

        
        <div class="pswp__ui pswp__ui--hidden">

            <div class="pswp__top-bar">

                

                <div class="pswp__counter"></div>

                <button class="pswp__button pswp__button--close" title="Close (Esc)"></button>

                <button class="pswp__button pswp__button--share" title="Share"></button>

                <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>

                <button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>

                
                
                <div class="pswp__preloader">
                    <div class="pswp__preloader__icn">
                        <div class="pswp__preloader__cut">
                            <div class="pswp__preloader__donut"></div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
                <div class="pswp__share-tooltip"></div>
            </div>

            <button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
            </button>

            <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)">
            </button>

            <div class="pswp__caption">
                <div class="pswp__caption__center"></div>
            </div>

        </div>

    </div>

</div><script 
                src="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.js"integrity="sha256-ePwmChbbvXbsO02lbM3HoHbSHTHFAeChekF1xKJdleo="crossorigin="anonymous"
                defer="true"
                >
            </script><script 
                src="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe-ui-default.min.js"integrity="sha256-UKkzOn/w1mBxRmLLGrSeyB4e1xbrp4xylgAWb3M42pU="crossorigin="anonymous"
                defer="true"
                >
            </script><link 
                rel="stylesheet" 
                href="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/default-skin/default-skin.css"integrity="sha256-c0uckgykQ9v5k&#43;IqViZOZKc47Jn7KQil4/MP3ySA3F8="crossorigin="anonymous"
            ><link 
                rel="stylesheet" 
                href="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.css"integrity="sha256-SBLU4vv6CA6lHsZ1XyTdhyjJxCjPif/TRkjnsyGAGnE="crossorigin="anonymous"
            >

            </main>
    
        <aside class="sidebar right-sidebar sticky">
            <section class="widget archives">
                <div class="widget-icon">
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-hash" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <line x1="5" y1="9" x2="19" y2="9" />
  <line x1="5" y1="15" x2="19" y2="15" />
  <line x1="11" y1="4" x2="7" y2="20" />
  <line x1="17" y1="4" x2="13" y2="20" />
</svg>



                </div>
                <h2 class="widget-title section-title">目录</h2>
                
                <div class="widget--toc">
                    <nav id="TableOfContents">
  <ol>
    <li>
      <ol>
        <li><a href="#mysql学习文档">mysql学习文档</a>
          <ol>
            <li></li>
          </ol>
        </li>
      </ol>
    </li>
  </ol>
</nav>
                </div>
            </section>
        </aside>
    

        </div>
        <script 
                src="https://cdn.jsdelivr.net/npm/node-vibrant@3.1.5/dist/vibrant.min.js"integrity="sha256-5NovOZc4iwiAWTYIFiIM7DxKUXKWvpVEuMEPLzcm5/g="crossorigin="anonymous"
                defer="false"
                >
            </script><script type="text/javascript" src="/ts/main.js" defer></script>
<script>
    (function () {
        const customFont = document.createElement('link');
        customFont.href = "https://fonts.googleapis.com/css2?family=Lato:wght@300;400;700&display=swap";

        customFont.type = "text/css";
        customFont.rel = "stylesheet";

        document.head.appendChild(customFont);
    }());
</script>

    </body>
</html>
